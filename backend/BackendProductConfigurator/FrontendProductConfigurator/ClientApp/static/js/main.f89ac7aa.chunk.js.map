{"version":3,"sources":["assets/img/notfound.jpg","assets/img sync /^/.*$","assets/img/Computer0.jpg","assets/img/Watch0.jpg","assets/img/vw-golf-r-2021--.jpg","lang/index.js","state/language/languageSelectors.js","api/general.js","state/language/languageSlice.js","components/header/LanguageSelect.js","state/user/userSelector.js","api/userAPI.js","state/alert/alertSlice.js","state/user/userSlice.js","state/inputDialog/inputDialogSelectors.js","state/inputDialog/inputDialogSlice.js","components/header/LoginButton.js","components/header/RegisterButton.js","components/header/Header.js","state/confirmationDialog/confirmationSelectors.js","state/confirmationDialog/confirmationSlice.js","state/configuration/configurationSelectors.js","components/configuration/Configurator/Options/OptionListItem.js","components/dialog/ConfirmationDialog.js","components/dialog/InputDialog.js","state/alert/alertSelectors.js","components/alert/GenericAlert.js","state/product/productSelector.js","components/products/Product.js","api/productsAPI.js","state/product/productSlice.js","components/Loader.js","components/products/ProductView.js","api/configurationAPI.js","state/configuration/configurationSlice.js","components/configuration/Configurator/SidePanel/PriceListItem.js","components/configuration/Configurator/SidePanel/Summary.js","components/account/ConfigurationList.js","components/account/ConfigurationTabs.js","components/account/AccountView.js","state/configurationBuilder/builderSelectors.js","state/configurationBuilder/builderSlice.js","components/configuration/Builder/ConfigurationProperties.js","components/configuration/Builder/EditButton.js","components/configuration/Builder/Model/Model.js","components/configuration/Builder/Model/CreateModel.js","components/configuration/Builder/Options/BuilderOption.js","components/configuration/Builder/Options/BuilderOptionGroup.js","components/configuration/Builder/SectionTabs.js","components/configuration/Builder/ConfigurationBuilderView.js","components/configuration/Configurator/ModelSelector/ModelOptionText.js","components/configuration/Configurator/ModelSelector/SectionOptionList.js","components/configuration/Configurator/ModelSelector/ModelButton.js","components/configuration/Configurator/ModelSelector/ModelSelector.js","components/configuration/Configurator/Options/Option.js","components/configuration/Configurator/Options/GroupInvalidError.js","components/configuration/Configurator/Options/OptionGroup.js","components/configuration/Configurator/OptionTabs.js","components/configuration/Configurator/Configurator.js","components/configuration/Configurator/ConfigurationView.js","Theme.js","App.js","state/store.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","languageNames","EN","DE","FR","defaultLang","languages","en","de","fr","translate","key","language","langData","translation","console","log","selectLanguage","state","baseURL","axios","defaults","timeout","setAuthorizationToken","token","headers","common","initialState","languageSlice","createSlice","name","reducers","changedLanguage","action","payload","setLanguage","lang","dispatch","values","includes","localStorage","setItem","setAcceptLanguage","actions","mapDispatchToProps","connect","Box","sx","minWidth","FormControl","variant","fullWidth","InputLabel","Select","labelId","value","autoWidth","label","onChange","event","target","MenuItem","selectIsAuthenticated","user","isAuthenticated","selectIsAdmin","admin","selectUserName","selectCurrentUser","userName","selectUserEmail","userEmail","selectSavedConfigurations","savedConfigurations","selectOrderedConfigurations","orderedConfigurations","selectAllOrderedConfigurations","allOrderedConfigurations","requestLogin","username","password","Promise","reject","setTimeout","jwt","decode","loginTest","alertStatus","alertTypes","status","alerts","alertSlice","addAlert","push","closeAlert","shift","length","openAlert","message","type","a","userSlice","setCurrentUser","setSavedConfigurations","setOrderedConfigurations","setAllOrderedConfigurations","selectIsInputDialogOpen","inputDialog","open","selectInputDialogData","data","selectInputDialogHeaderMessage","headerMessage","inputDialogSlice","show","close","setData","onConfirm","inputDialogOpen","onConfirmCallback","getState","openLogInDialog","isPassword","then","res","catch","err","openLogin","size","Button","onClick","openInputDialog","register","email","isEmail","confirmPassword","logout","removeItem","isLoggedIn","isAdmin","navigate","useNavigate","useState","drawerOpen","setDrawerOpen","mobileView","setMobileView","useEffect","setResponsiveness","window","innerWidth","addEventListener","removeEventListener","userButtons","startIcon","AccountCircle","Typography","maxWidth","overflow","textOverflow","Tooltip","title","IconButton","Logout","adminButtons","guestButtons","homeButton","Home","color","getMenuButtons","handleToggleDrawer","on","flexGrow","align","marginBottom","AppBar","position","Toolbar","Grid","container","direction","edge","mr","Menu","fontSize","Drawer","anchor","onClose","padding","gap","justifyContent","selectIsConfirmDialogOpen","confirmation","selectConfirmDialogMessage","selectConfirmDialogData","confirmationSlice","bodyContent","confirmDialogOpen","body","GROUP_ERRORS","OPTION_ERRORS","selectGroupId","groupId","selectOptionId","optionId","selectAllOptionIncompatibilities","configuration","rules","incompatibilities","selectAllOptionRequirements","requirements","selectConfigurationStatus","selectConfigurationId","configId","selectBasePrice","basePrice","selectPriceList","priceList","selectDefaultModel","defaultModel","selectSelectedModel","selectedModel","selectModels","models","selectConfigurationName","selectConfigurationDescription","description","selectConfigurationImages","images","selectOptions","options","selectOptionGroups","optionGroups","selectOptionSections","optionSections","selectSelectedOptions","selectedOptions","extractModelNameFromModel","model","extractModelOptionsFromModel","getModelOptions","createSelector","modelName","find","m","getOptionsInSection","sectionId","groups","sections","section","s","groupsInSection","filter","g","optionGroupIds","forEach","optionIds","getOption","getOptionName","option","getIsOptionSelected","getOptionReplacementGroup","replacementGroups","replacementGroup","getOptionIncompatibilities","getIsOptionCompatible","compatible","incompatibleOptions","incompatibility","getOptionRequirements","getIsOptionRequirementsMet","reqMet","requiredOptions","requirement","getIsOptionSelectable","isRequirementsMet","isCompatible","getGroupRequirements","groupRequirements","allRequirements","getGroup","selectedGroup","getIsGroupValid","required","requiredGroups","requirementsMet","groupSelected","atLeastOneOptionSelected","getOptionPrice","getCurrentPrice","reduce","total","getDependentOptionsDeselect","selectedOptionId","dependencies","dependenciesFromDependencyLists","d","getDependentOptionsSelect","dependentOption","dependencyLists","dependencyList","dependency","ownProps","image","highlight","bgCol","green","red","margin","backgroundColor","cancel","confirm","content","isOpen","selectedOption","selected","deselectedOption","deselected","optionsToSelect","optionsToRemove","text","confirmationPrompt","youWantToSelect","youWantToRemove","theseOptionsWillBeRemoved","youAlsoNeedToSelect","handleClose","renderDialogContentOptions","alignItems","Dialog","scroll","DialogTitle","DialogContent","dividers","DialogContentText","DialogActions","autoFocus","setInputData","inputData","dialogTitle","submit","localData","setLocalData","valuesChanged","prevData","index","inputdata","isCheckBox","FormControlLabel","labelPlacement","control","Checkbox","checked","TextField","autoComplete","error","renderInputField","valid","selectIsAlertOpen","alert","selectCurrentAlert","Toast","Swal","mixin","toast","showConfirmButton","timer","timerProgressBar","didOpen","stopTimer","resumeTimer","didClose","isVisible","fire","icon","selectProducts","product","products","selectProductError","selectProductStatus","Product","extractIdFromProduct","extractNameFromProduct","extractDescriptionFromProduct","extractImagesFromProduct","imageSource","getImageSource","ImageListItem","width","cursor","src","srcSet","alt","loading","ImageListItemBar","subtitle","fetchAll","get","toString","productSlice","loadingStarted","loadingSucceeded","loadingFailed","Loader","fetchProducts","isEmpty","renderLoadingProducts","columns","spacing","paddingTop","marginRight","item","sm","md","lg","xl","errorMessage","render","fetchId","productId","postConfiguration","newConfiguration","post","configurationSlice","selectOption","deselectOption","setSelectedOptions","setSelectedModel","reset","loadSelectedOptionsFromStorage","extraReducers","builder","fetchConfiguration","setModel","checkModel","containsAll","arr1","arr2","every","arr2Item","modelOptions","saveConfigurationToStorage","configurations","loadConfigurationsFromStorage","c","writeToLocalStorage","readFromLocalStorage","selectWithDependencies","replacementGroupOptionsToDeselect","incompatibleOptionsToDeselect","optionsToDeselect","deeperOptionsToDeselect","getDependenciesDeselect","allOptionsToDeselect","incompatibleOptionNames","dependentId","selectedOptionName","confirmMessage","join","selectAndDeselectOptions","deselectWithDependencies","dependentOptions","dependentOptionNames","deselectedOptionName","concat","subDependentOptions","x","price","loadedConfigurationId","currentPrice","configurationId","renderSectionContent","sectionGroups","groupOptions","group","vairant","Divider","marginTop","Stack","Accordion","AccordionSummary","expandIcon","ExpandMoreOutlined","AccordionDetails","openConfirm","isOrdered","isAdminView","handleDeleteClicked","savedName","delete","requestDeleteSavedConfiguration","config","extractOptionsFromConfiguration","extractNameFromConfiguration","date","extractDateFromConfiguration","extractUsernameFromConfiguration","display","handleEditClick","Edit","Delete","handleShowSummaryClicked","Preview","Date","toLocaleTimeString","TabPanel","props","children","other","role","hidden","p","tabNames","forAdmin","tab","useParams","foundTab","t","tabName","tabIndex","setValue","tabProps","Tabs","scrollButtons","allowScrollButtonsMobile","newValue","Tab","path","getSavedConfigurations","saved","ordered","getAllOrderedConfigurations","adminActions","userActions","className","flexDirection","paddingBottom","selectCurrentBuilderLanguage","currentLanguage","selectBuilderConfiguration","selectBuilderStatus","selectBuilderError","selectBuilderInputLanguage","selectBuilderSections","selectBuilderGroups","selectBuilderModels","selectBuilderDefaultModel","selectBuilderBasePrice","selectBuilderOptionRequirements","selectBuilderOptionIncompatibilities","selectBuilderGroupRequirements","selectBuilderOptionsFromCurrentLanguage","selectBuilderGroupsFromCurrentLanguage","selectBuilderSectionsFromCurrentLanguage","selectName","getBuilderName","builderName","getBuilderDescription","builderDescription","getBuilderOptionById","getBuilderOptionPrice","getBuilderOptionRequirementsByOptionId","optionReq","getBuilderOptionIncompatibilitiesByOptionId","optionIncomp","getBuilderSectionById","getBuilderGroupsInSection","getBuilderGroupById","getBuilderGroupNameByOptionId","groupLangObj","getBuilderGroupRequirementsByGroupId","groupReq","getBuilderLanguageObject","getDoesSectionExist","sectionName","toUpperCase","getDoesGroupdExist","groupName","getDoesOptionExist","optionName","getGroupPropertiesFromBuilderGroup","langObj","getGroupNameFromBuilderGroup","getGroupDescriptionFromBuilderGroup","getModelPropertiesFromBuilderModel","modelObj","getModelNameFromBuilderModel","getModelDescriptionFromBuilderModel","builderSlice","addSection","newSection","changeSectionProperties","newName","removeSection","addOptionGroup","isRequired","isReplacementGroup","replacement","newGroup","changeGroupProperties","newDescription","setGroupRequirements","gId","setGroupIsRequired","setGroupIsReplacement","removeOptionGroup","addOption","newOption","changeOptionProperties","setOptionPrice","setOptionRequirements","oId","setOptionIncompatibilities","removeOption","addModel","newModel","changeModelProperties","modelId","setDefaultModel","setModelOptions","removeModel","setBasePrice","setDescription","setName","changeInputLanguage","newLanguage","resetBuild","loadingHandled","deleteOptionGroup","extractOptionsFromBuilderGroup","deleteOption","newOptions","extractModelOptionsFromBuilderModel","changeModelOptions","allIncompatibilities","setPrice","priceError","setPriceError","nameInput","setNameInput","descriptionInput","setDescriptionInput","rowGap","rowSpacing","columnSpacing","xs","onBlur","Number","defaultValue","InputProps","inputProps","min","startAdornment","InputAdornment","multiline","maxRows","propertyName","oldValue","textButton","valueChangedCallback","handleClick","openConfirmDialog","allOptions","multiple","split","input","OutlinedInput","renderValue","selectedIds","indexOf","ListItemText","primary","createModel","selectedDefaultModel","isSelected","modelDesc","Add","Multiselect","resultOptions","onChangeCallback","remove","optionPrice","optionReqirements","optionIncompatibilities","arrayFromMultiSelect","paddingLeft","newRequirements","newIncomps","CheckboxInput","callback","resultGroups","allGroups","createOption","replace","deleteGroup","border","flexWrap","optionDescription","TooltipAsTab","createSection","deleteSection","extractGroupsFromBuilderSection","createGroup","getOptionGroupsInSection","renderSectionHeader","groupDescription","groupIsRequired","groupIsMultiselect","handleAddGroup","handleRemoveSection","borderBottom","borderColor","wrapped","a11yProps","handleAddSection","minHeight","mb","BuilderOptionGroup","saveBuilderToStorage","finish","inputLanguage","saveBuilderInterval","setInterval","clearInterval","justifySelf","newLang","Done","CreateModel","secondary","ListItem","selectModel","disabled","extractModelDescriptionFromModel","hover","setHover","handleHover","isHovering","ButtonBase","height","onMouseLeave","onMouseOver","List","dense","maxHeight","subheader","ListSubheader","isDesktop","useMediaQuery","theme","breakpoints","up","overflowX","clickedOption","selectableError","isSelectable","disabledReason","problematicOptions","selectable","placement","TransitionComponent","Zoom","arrow","enterTouchDelay","style","GroupInvalidError","ErrorOutline","groupError","isValid","OptionTabs","useSelector","resetConfig","configurationName","configurationDescription","configurationImages","isLoading","handleSaveClicked","requestSaveConfiguration","handleResetClicked","handleFinishClicked","postOrderConfiguredProduct","promptOrderConfiguration","SaveAs","RestartAlt","easing","backgroundImage","backgroundSize","backgroundPosition","renderConfiguration","responsiveFontSizes","createTheme","palette","typography","require","default","JSON","stringify","parse","getItem","App","ThemeProvider","Container","exact","element","store","configureStore","reducer","productReducer","configurationReducer","languageReducer","confirmationReducer","userReducer","inputDialogReducer","alertReducer","builderReducer","authToken","jwtToken","localStorageLang","ReactDOM","StrictMode","document","getElementById"],"mappings":"sIAAA,OAAe,cAA0B,sC,imQCAzC,IAAIA,EAAM,CACT,kBAAmB,IACnB,eAAgB,IAChB,iBAAkB,IAClB,yBAA0B,KAI3B,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOP,EAAIE,GAEZD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,IAEpBC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,K,iCCzBpB,OAAe,cAA0B,uC,iCCAzC,OAAe,cAA0B,oC,iCCAzC,OAAe,cAA0B,8C,mTCI5BY,EAAgB,CACzBC,GAAI,KACJC,GAAI,KACJC,GAAI,MAEKC,EAAcJ,EAAcC,GAEnCI,EAAY,CACd,GAAMC,EACN,GAAMC,EACN,GAAMC,GAGGC,EAAY,SAACC,GAAiC,IAA5BC,EAA2B,uDAAhBP,EAClCQ,EAAWP,EAAUM,GAEzB,GAAKC,EAAL,CAKA,IAAMC,EAAcD,EAASF,GAE7B,OAAKG,IAIGR,EAAUD,GAAaM,GAChBL,EAAUD,GAAaM,GAI3BA,GAfPI,QAAQC,IAAR,8BAAmCL,EAAnC,+CAA6EC,EAA7E,OCrBKK,EAAiB,SAAAC,GAAK,OAASA,EAAMN,SAASA,U,yBCI9CO,EAAO,yBAKpBC,IAAMC,SAASC,QAAU,IAElB,IAAMC,EAAwB,SAACC,GAC9BA,EACAJ,IAAMC,SAASI,QAAQC,OAAvB,+BAA2DF,UAEpDJ,IAAMC,SAASI,QAAQC,OAAvB,eCVTC,EAAe,CACjBf,SAAUP,GAKDuB,EAAgBC,YAAY,CACrCC,KAAM,WACNH,eACAI,SAAU,CACNC,gBAAiB,SAACd,EAAOe,GACrBlB,QAAQC,IAAI,wBAA0BiB,EAAOC,SAC7ChB,EAAMN,SAAWqB,EAAOC,YAKvBC,EAAc,SAACC,GAAD,OAAU,SAACC,GAE7BxC,OAAOyC,OAAOrC,GAAesC,SAASH,KACvCrB,QAAQC,IAAR,oBAAyBoB,EAAzB,sBACAA,EAAO/B,GAGXmC,aAAaC,QAAQ,WAAYL,GDVJ,SAACA,GAC1BA,EACAhB,IAAMC,SAASI,QAAQC,OAAO,mBAAqBU,SAE5ChB,IAAMC,SAASI,QAAQC,OAAO,mBCOzCgB,CAAkBN,GAClBC,EAASL,EAAgBI,MAIdJ,EAAoBJ,EAAce,QAAlCX,gBAEAJ,IAAf,Q,OCHA,IAGMgB,EAAqB,CACvBT,eAEWU,eANS,SAAC3B,GAAD,MAAY,CAChCN,SAAUK,EAAeC,MAOzB0B,EAFWC,EAhCf,YAAoD,IAA1BjC,EAAyB,EAAzBA,SAAUuB,EAAe,EAAfA,YAMhC,OACI,cAACW,EAAA,EAAD,CAAKC,GAAI,CAAEC,SAAU,KAArB,SACI,eAACC,EAAA,EAAD,CAAaC,QAAQ,WAAWC,WAAS,EAAzC,UACI,cAACC,EAAA,EAAD,CAAY/D,GAAG,oBAAf,sBACA,eAACgE,EAAA,EAAD,CACIC,QAAQ,oBACRC,MAAO3C,EACP4C,WAAS,EACTC,MAAM,OACNC,SAbhB,SAAsBC,GAClBxB,EAAYwB,EAAMC,OAAOL,QAOjB,UAOI,cAACM,EAAA,EAAD,CAAUN,MAAOtD,EAAcC,GAA/B,qBACA,cAAC2D,EAAA,EAAD,CAAUN,MAAOtD,EAAcE,GAA/B,qBACA,cAAC0D,EAAA,EAAD,CAAUN,MAAOtD,EAAcG,GAA/B,oCC3BP0D,EAAwB,SAAA5C,GAAK,OAAUA,EAAM6C,KAAKC,iBAClDC,EAAgB,SAAA/C,GAAK,OAAkBA,EAAM6C,KAAKA,KAAKG,QAAS,GAChEC,EAAiB,SAAAjD,GAAK,OAAiBkD,GAAkBlD,GAAOmD,UAAY,IAC5EC,GAAkB,SAAApD,GAAK,OAAgBkD,GAAkBlD,GAAOqD,WAAa,IAE7EC,GAA4B,SAAAtD,GAAK,OAAUA,EAAM6C,KAAKU,qBACtDC,GAA8B,SAAAxD,GAAK,OAAQA,EAAM6C,KAAKY,uBACtDC,GAAiC,SAAA1D,GAAK,OAAKA,EAAM6C,KAAKc,0BAE7DT,GAAoB,SAAAlD,GAAK,OAAWA,EAAM6C,KAAKA,M,kDC6DxCe,GAAe,SAACC,EAAUC,GACnC,OAiBJ,SAAmBD,EAAUC,GACzB,OAAO,IAAIC,SAAQ,SAACnF,EAASoF,GACR,UAAbH,GAAqC,SAAbA,GACxBG,EAAO,uBAGXC,YAAW,WAEP,IAAI3D,EAAQ,+MAGK,UAAbuD,IACAvD,EAAQ,wNAGZ,IAAMuC,EAAOqB,KAAIC,OAAO7D,GAExB1B,EAAQ,CAAC0B,QAAOuC,WACjB,QAnCAuB,CAAUP,ICrEd,IAAMQ,GACD,SADCA,GAEH,OAGGC,GACF,QADEA,GAIA,UAKP7D,GAAe,CACjB8D,OAAQF,GACRG,OAAQ,IAKCC,GAAa9D,YAAY,CAClCC,KAAM,QACNH,gBACAI,SAAU,CACN6D,SAAU,SAAC1E,EAAOe,GACdf,EAAMuE,OAASF,GACfrE,EAAMwE,OAAOG,KAAK5D,EAAOC,UAE7B4D,WAAY,SAAC5E,GACTA,EAAMwE,OAAOK,QAGe,IAAxB7E,EAAMwE,OAAOM,SACb9E,EAAMuE,OAASF,QAMlBU,GAAY,SAACC,EAASC,GAAV,gDAAmB,WAAO9D,GAAP,UAAA+D,EAAA,sDACxC/D,EAASuD,GAAS,CAAEM,UAASC,UADW,2CAAnB,uDAKlB,GAAiCR,GAAWhD,QAApCiD,GAAR,GAAQA,SAAUE,GAAlB,GAAkBA,WAEVH,MAAf,QCpCaU,GAAYxE,YAAY,CACjCC,KAAM,OACNH,aAViB,CACjBqC,iBAAiB,EACjBD,KAAM,GACNU,oBAAqB,GACrBE,sBAAuB,GACvBE,yBAA0B,IAM1B9C,SAAU,CACNuE,eAAgB,SAACpF,EAAOe,GACpBlB,QAAQC,IAAI,gBAAiBiB,EAAOC,SACpChB,EAAM6C,KAAO9B,EAAOC,QAChBrC,OAAOD,KAAKqC,EAAOC,SAAS8D,OAAS,EAErC9E,EAAM8C,iBAAkB,GAGxB9C,EAAM8C,iBAAkB,EACxB9C,EAAMuD,oBAAsB,GAC5BvD,EAAMyD,sBAAwB,GAC9BzD,EAAM2D,yBAA2B,KAGzC0B,uBAAwB,SAACrF,EAAOe,GAC5BlB,QAAQC,IAAI,gCAAiCiB,EAAOC,SACpDhB,EAAMuD,oBAAsBxC,EAAOC,SAEvCsE,yBAA0B,SAACtF,EAAOe,GAC9BlB,QAAQC,IAAI,kCAAmCiB,EAAOC,SACtDhB,EAAMyD,sBAAwB1C,EAAOC,SAEzCuE,4BAA6B,SAACvF,EAAOe,GAEjCf,EAAM2D,yBAA2B5C,EAAOC,YA6D7C,GAA0GmE,GAAU1D,QAA5G2D,GAAR,GAAQA,eAAgBC,GAAxB,GAAwBA,uBAAwBC,GAAhD,GAAgDA,yBAA0BC,GAA1E,GAA0EA,4BAElEJ,MAAf,QCxGaK,GAA0B,SAAAxF,GAAK,OAAgBA,EAAMyF,YAAYC,MACjEC,GAAwB,SAAA3F,GAAK,OAAkBA,EAAMyF,YAAYG,MACjEC,GAAiC,SAAA7F,GAAK,OAASA,EAAMyF,YAAYK,eCOjEC,GAAmBpF,YAAY,CACxCC,KAAM,cACNH,aARiB,CACjBiF,MAAM,EACNI,cAAe,GACfF,KAAM,IAMN/E,SAAU,CACNmF,KAAM,SAAChG,EAAOe,GACV,MAAgCA,EAAOC,QAA/B8E,EAAR,EAAQA,cAAeF,EAAvB,EAAuBA,KAGvB5F,EAAM8F,cAAgBA,EACtB9F,EAAM4F,KAAOA,EACb5F,EAAM0F,MAAO,GAEjBO,MAAO,SAACjG,EAAOe,GAEXf,EAAM0F,MAAO,EACb1F,EAAM8F,cAAgB,GACtB9F,EAAM4F,KAAO,IAEjBM,QAAS,SAAClG,EAAOe,GAEbf,EAAM4F,KAAO7E,EAAOC,YAM5BmF,GAAY,KAEHC,GAAkB,SAACN,EAAeF,EAAMS,GAAtB,OAA4C,SAAClF,EAAUmF,GACnEd,GAAwBc,KAEnCzG,QAAQC,IAAI,kCAIhBqG,GAAYE,EAEZlF,EAAS6E,GAAK,CAACF,gBAAeF,aA+B3B,GAAiCG,GAAiBtE,QAA1CuE,GAAR,GAAQA,KAAMC,GAAd,GAAcA,MAAOC,GAArB,GAAqBA,QAEbH,MAAf,QCvEaQ,GAAkB,kBAAM,SAACpF,GAKlCA,EAASiF,GAAgB,QAJZ,CACTvC,SAAU,CAACjD,KAAM,WAAYyB,MAAO,IACpCyB,SAAU,CAAClD,KAAM,WAAYyB,MAAO,GAAImE,YAAY,KAEhB,SAACZ,GHmExB,IAAC/B,EGlEd1C,GHkEc0C,EGlEC+B,EAAK/B,SAASxB,MAAOuD,EAAK/B,SAASC,SHkErC,yCAAwB,WAAO3C,GAAP,UAAA+D,EAAA,sDAEzCtB,GAAaC,GAAoB4C,MAAK,SAAAC,GAClC,IAAQpG,EAAgBoG,EAAhBpG,MAAOuC,EAAS6D,EAAT7D,KAEfvB,aAAaC,QAAQ,WAAYjB,GACjCD,EAAsBC,GACtBa,EAASiE,GAAevC,IACxB1B,EAAS4D,GAAU,aAAcT,QAEpCqC,OAAM,SAAAC,GACHzF,EAAS4D,GAAU6B,EAAKtC,QAXa,2CAAxB,8DGhDrB,IAGM5C,GAAqB,CACvBmF,UAAWN,IAEA5E,gBANS,SAAC3B,GAAD,MAAY,CAChCN,SAAUK,EAAeC,MAOzB0B,GAFWC,EApBf,YAA+D,IAAxCkF,EAAuC,EAAvCA,UAAWnH,EAA4B,EAA5BA,SAA4B,IAAlBoH,YAAkB,MAAX,QAAW,EAG1D,OACI,cAACC,EAAA,EAAD,CACID,KAAMA,EACN9E,QAAQ,YACRgF,QAASH,EAHb,SAKKrH,EAAU,QAASE,QCWhC,IAGMgC,GAAqB,CACvBuF,gBAAiBb,GACjBc,SJ4BoB,SAACrD,EAAUC,EAAUqD,GAArB,gDAA+B,WAAOhG,GAAP,UAAA+D,EAAA,sDFN5C,IAAInB,SAAQ,SAACnF,EAASoF,GACzBA,EAAO,sBEMgCyC,MAAK,SAAAC,GAC5CvF,EAAS4D,GAAU,cAAeT,QAErCqC,OAAM,SAAAC,GACHzF,EAAS4D,GAAU6B,EAAKtC,QALuB,2CAA/B,uDI3BpBS,UAAWA,IAEApD,gBARS,SAAC3B,GAAD,MAAY,CAChCN,SAAUK,EAAeC,MASzB0B,GAFWC,EArCf,YAA6F,IAAnEsF,EAAkE,EAAlEA,gBAAiBC,EAAiD,EAAjDA,SAAUnC,EAAuC,EAAvCA,UAAWrF,EAA4B,EAA5BA,SAA4B,IAAlBoH,YAAkB,MAAX,QAAW,EAkBxF,OACI,cAACC,EAAA,EAAD,CACID,KAAMA,EACN9E,QAAQ,YACRgF,QApBR,WAOIC,EAAgB,WANH,CACTpD,SAAU,CAACjD,KAAM,WAAYyB,MAAO,IACpC8E,MAAO,CAACvG,KAAM,QAASyB,MAAO,GAAI+E,SAAS,GAC3CtD,SAAU,CAAClD,KAAM,WAAYyB,MAAO,GAAImE,YAAY,GACpDa,gBAAiB,CAACzG,KAAM,mBAAoByB,MAAO,GAAImE,YAAY,KAErC,SAACZ,GAC3BA,EAAKyB,gBAAgBhF,QAAUuD,EAAK9B,SAASzB,MAIjD6E,EAAStB,EAAK/B,SAASxB,MAAOuD,EAAKuB,MAAM9E,MAAOuD,EAAK/B,SAASC,UAH1DiB,EAAU,GAAD,OAAIvF,EAAU,oBAAqBE,GAAnC,KAAiD4E,QAQlE,SAKK9E,EAAU,WAAYE,QCqPnC,IAMMgC,GAAqB,CACvBuF,gBAAiBb,GACjBkB,OL/LkB,kBAAM,SAACnG,GACzBG,aAAaiG,WAAW,YACxBlH,GAAsB,GACtBc,EAASiE,GAAe,QK8LbzD,gBAVS,SAAC3B,GAAD,MAAY,CAChCN,SAAUK,EAAeC,GACzBwH,WAAY5E,EAAsB5C,GAClCyH,QAAS1E,EAAc/C,GACvB6D,SAAUZ,EAAejD,MAQzB0B,GAFWC,EAjRf,YAAsE,IAApDjC,EAAmD,EAAnDA,SAAU8H,EAAyC,EAAzCA,WAAYC,EAA6B,EAA7BA,QAAS5D,EAAoB,EAApBA,SAAUyD,EAAU,EAAVA,OAEjDI,EAAWC,cAEjB,EAAoCC,oBAAS,GAA7C,mBAAOC,EAAP,KAAmBC,EAAnB,KAEA,EAAoCF,oBAAS,GAA7C,mBAAOG,EAAP,KAAmBC,EAAnB,KACAC,qBAAU,WACN,IAAMC,EAAoB,WACtB,OAAOC,OAAOC,WAAa,IACrBJ,GAAc,GACdA,GAAc,IAMxB,OAHAE,IACAC,OAAOE,iBAAiB,UAAU,kBAAMH,OAEjC,WACHC,OAAOG,oBAAoB,UAAU,kBAAMJ,UAEhD,IAEH,IAAMK,EACF,qCACI,cAACxB,EAAA,EAAD,CACID,KAAK,QACL9E,QAAQ,YACRwG,UAAW,cAACC,EAAA,EAAD,IACXzB,QAAS,kBAAMU,EAAS,aAJ5B,SAMI,cAACgB,EAAA,EAAD,CAAY1G,QAAQ,QAAQH,GAAI,CAAC8G,SAAU,QAASC,SAAU,SAAUC,aAAc,YAAtF,SACKhF,MAGT,cAACiF,EAAA,EAAD,CAASC,MAAOvJ,EAAU,SAAUE,GAApC,SACI,cAACsJ,EAAA,EAAD,CACIlC,KAAK,QACL9E,QAAQ,YACRgF,QAAS,kBAAMM,KAHnB,SAKI,cAAC2B,EAAA,EAAD,WAMVC,EACF,mCACI,cAACnC,EAAA,EAAD,CACID,KAAK,QACL9E,QAAQ,YACRgF,QAsBZ,WACIU,EAAS,YA1BL,SAKKlI,EAAU,sBAAuBE,OAKxCyJ,EACF,qCACI,cAAC,GAAD,CAAarC,KAAK,UAClB,cAAC,GAAD,CAAgBA,KAAK,aAIvBsC,EACF,mCACI,cAACJ,EAAA,EAAD,CAAYhC,QAAS,kBAAMU,EAAS,MAApC,SACI,cAAC2B,EAAA,EAAD,CAAMxH,GAAI,CAACyH,MAAO,eAS9B,SAASC,IACL,OAEI,cADA,CACA,sBASK9B,EAAUyB,EAAe,GAEzB1B,EAAae,EAAcY,KAOxC,SAASK,EAAmBC,GACxB3B,EAAc2B,GAwJlB,OACI,iCACI,eAAC7H,EAAA,EAAD,CAAKC,GAAI,CAAE6H,SAAU,GAArB,UACI,cAAChB,EAAA,EAAD,CAAYiB,MAAM,SAASC,aAAc,EAAG5H,QAAQ,KAApD,SACKxC,EAAU,sBAAuBE,KAGrCqI,EA5GL,aA5CA,CA4CC8B,EAAA,EAAD,CAAQC,SAAS,SAAjB,SACI,eAACC,EAAA,EAAD,WAEI,eAACC,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAU,MAA1B,UAEI,cAAClB,EAAA,EAAD,CACIlC,KAAK,QACLqD,KAAK,QACLb,MAAM,UACN,aAAW,OACXzH,GAAI,CAAEuI,GAAI,GACVpD,QAAS,kBAAMwC,GAAmB,IANtC,SAQI,cAACa,EAAA,EAAD,CAAMC,SAAS,YAGlBlB,EAED,cAACxH,EAAA,EAAD,CAAKC,GAAI,CAAE6H,SAAU,KAErB,cAAC,EAAD,OAIJ,cAACa,EAAA,EAAD,CACIC,OAAO,MACP9E,KAAMmC,EACN4C,QAAS,kBAAMjB,GAAmB,IAHtC,SAKI,cAACQ,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAU,SAASQ,QAAS,EAAGC,IAAK,EAApD,SAEKpB,aAoDjB,cAACM,EAAA,EAAD,CAAQC,SAAS,SAAjB,SACI,cAACC,EAAA,EAAD,CAAS/H,QAAQ,UAAjB,SACI,eAACgI,EAAA,EAAD,CAAMY,eAAe,WAAWX,WAAS,EAACU,IAAK,EAA/C,UACKvB,EAED,cAAC,EAAD,IAEA,cAACxH,EAAA,EAAD,CAAKC,GAAI,CAAE6H,SAAU,KAGhBH,mB,kDClQhBsB,GAA4B,SAAA7K,GAAK,OAAUA,EAAM8K,aAAapF,MAC9DqF,GAA6B,SAAA/K,GAAK,OAASA,EAAM8K,aAAa9F,SAC9DgG,GAA0B,SAAAhL,GAAK,OAAYA,EAAM8K,aAAalF,MCO9DqF,GAAoBtK,YAAY,CACzCC,KAAM,eACNH,aARiB,CACjBiF,MAAM,EACNV,QAAS,GACTY,KAAM,IAMN/E,SAAU,CACNmF,KAAM,SAAChG,EAAOe,GACV,MAA0BA,EAAOC,QAAzBgE,EAAR,EAAQA,QAASY,EAAjB,EAAiBA,KAGjB5F,EAAM0F,MAAO,EACb1F,EAAMgF,QAAUA,EAChBhF,EAAM4F,KAAOA,GAEjBK,MAAO,SAACjG,EAAOe,GAEXf,EAAM0F,MAAO,EACb1F,EAAMgF,QAAU,GAChBhF,EAAM4F,KAAO,OAMrBO,GAAY,KACZ+E,GAAc,KAELC,GAAoB,SAACnG,EAASY,EAAMwF,EAAM/E,GAAtB,OAA4C,SAAClF,EAAUmF,GACrEuE,GAA0BvE,KAErCzG,QAAQC,IAAI,yCAIhBqG,GAAYE,EACZ6E,GAAcE,EAEdjK,EAAS6E,GAAK,CAAChB,UAASY,aA8FrB,GAA6CqF,GAAkBxJ,QAAvDuE,GAAR,GAAQA,KAAMC,GAAd,GAAcA,MAENgF,MAAf,Q,oCC1IaI,GACG,uBAGHC,GACW,2BADXA,GAEa,6BAIpBC,GAAgB,SAACvL,EAAOwL,GAAR,OAAkCA,GAClDC,GAAiB,SAACzL,EAAO0L,GAAR,OAAiCA,GAIlDC,GAAmC,SAAA3L,GAAK,OAAUA,EAAM4L,cAAcA,cAAcC,MAAMC,mBAC1FC,GAA8B,SAAA/L,GAAK,OAAeA,EAAM4L,cAAcA,cAAcC,MAAMG,cAKnFC,GAA4B,SAAAjM,GAAK,OAAUA,EAAM4L,cAAcrH,QAE/D2H,GAAwB,SAAClM,GAAD,OAAmBA,EAAM4L,cAAcA,cAAcO,UAE7EC,GAAkB,SAAApM,GAAK,aAAoB,UAAAA,EAAM4L,cAAcA,cAAcC,aAAlC,eAAyCQ,YAAa,GACjGC,GAAkB,SAAAtM,GAAK,aAAoB,UAAAA,EAAM4L,cAAcA,cAAcC,aAAlC,eAAyCU,YAAa,IAEjGC,GAAqB,SAAAxM,GAAK,aAAiB,UAAAA,EAAM4L,cAAcA,cAAcC,aAAlC,eAAyCY,eAAgB,IACpGC,GAAsB,SAAA1M,GAAK,OAAgBA,EAAM4L,cAAce,eAC/DC,GAAe,SAAA5M,GAAK,aAAuB,UAAAA,EAAM4L,cAAcA,cAAcC,aAAlC,eAAyCgB,SAAU,IAE9FC,GAA0B,SAAA9M,GAAK,OAAYA,EAAM4L,cAAcA,cAAchL,MAC7EmM,GAAiC,SAAA/M,GAAK,OAAKA,EAAM4L,cAAcA,cAAcoB,aAC7EC,GAA4B,SAAAjN,GAAK,OAAUA,EAAM4L,cAAcA,cAAcsB,QAE7EC,GAAgB,SAAAnN,GAAK,OAAsBA,EAAM4L,cAAcA,cAAcwB,SAC7EC,GAAqB,SAAArN,GAAK,OAAiBA,EAAM4L,cAAcA,cAAc0B,cAC7EC,GAAuB,SAAAvN,GAAK,OAAeA,EAAM4L,cAAcA,cAAc4B,gBAC7EC,GAAwB,SAAAzN,GAAK,OAAcA,EAAM4L,cAAc8B,iBAAmB,IAGlFC,GAA4B,SAAAC,GAAK,OAAcA,EAAMhN,MAAQ,IAE7DiN,GAA+B,SAAAD,GAAK,OAAWA,EAAMR,SAAW,IAOhEU,GAAkBC,aAAe,CAACnB,GAvCvB,SAAC5M,EAAOgO,GAAR,OAAgCA,KAuCuB,SAACnB,EAAQmB,GACpF,IAAMJ,EAAQf,EAAOoB,MAAK,SAAAC,GAAC,OAAIA,EAAEtN,OAASoN,KAI1C,OAHAnO,QAAQC,IAAI,UAAW8N,GACvB/N,QAAQC,IAAI,kBAAmB8N,EAAMR,SAE9BQ,EAAQA,EAAMR,QAAU,MAGtBe,GAAsBJ,aAAe,CA9C1B,SAAC/N,EAAOoO,GAAR,OAAgCA,GA8CYf,GAAoBE,KAAuB,SAACa,EAAWC,EAAQC,GAG/H,IAAMC,EAAUD,EAASL,MAAK,SAAAO,GAAC,OAAIA,EAAErQ,KAAOiQ,KAGtCK,EAAkBJ,EAAOK,QAAO,SAAAC,GAAC,OAAIJ,EAAQK,eAAevN,SAASsN,EAAExQ,OAGzEiP,EAAU,GAKd,OAJAqB,EAAgBI,SAAQ,SAAAF,GACpBvB,EAAQzI,KAAR,MAAAyI,EAAO,aAASuB,EAAEG,eAGf1B,KAGE2B,GAAYhB,aAAe,CAACZ,GAAe1B,KAAiB,SAAC2B,EAASjP,GAG/E,OAAOiP,EAAQa,MAAK,SAAA3P,GAAC,OAAIA,EAAEH,KAAOA,QAEzB6Q,GAAgBjB,aAAe,CAACgB,GAAWtD,KAAiB,SAACwD,EAAQ9Q,GAC9E,OAAO8Q,EAAOrO,QAILsO,GAAsBnB,aAAe,CAACN,GAAuBhC,KAAiB,SAACiC,EAAiBvP,GAEzG,OAAOuP,EAAgBrM,SAASlD,MAIvBgR,GAA4BpB,aAAe,CA3ExB,SAAA/N,GAAK,OAAmBA,EAAM4L,cAAcA,cAAcC,MAAMuD,mBA2Ed3D,KAAiB,SAAC2D,EAAmBjR,GAGnH,cAAsBQ,OAAOD,KAAK0Q,GAAlC,eAAsD,CAAjD,IACKC,EAAmBD,EADX,MAEd,GAAIC,EAAiBhO,SAASlD,GAC1B,OAAOkR,EAIf,OAAO,QAILC,GAA6BvB,aAAe,CAACpC,GAAkCF,KAAiB,SAACK,EAAmBJ,GAEtH,OAAOI,EAAkBJ,MAEvB6D,GAAwBxB,aAAe,CAACN,GAAuB6B,KAA6B,SAAC5B,EAAiB5B,GAKhH,IAAKA,EAAmB,MAAO,EAAC,EAAM,MAEtC,IAAI0D,GAAa,EACbC,EAAsB,GAQ1B,OAPA3D,EAAkB+C,SAAQ,SAAAa,GAElBhC,EAAgBrM,SAASqO,KACzBF,GAAa,EACbC,EAAoB9K,KAAK+K,OAG1B,CAACF,EAAYC,MAElBE,GAAwB5B,aAAe,CAAChC,GAA6BN,KAAiB,SAACO,EAAcN,GAEvG,OAAOM,EAAaN,MAElBkE,GAA6B7B,aAAe,CAACN,GAAuBkC,KAAwB,SAACjC,EAAiB1B,GAOhH,IAAKA,EAAc,MAAO,EAAC,EAAM,MAEjC,IAAI6D,GAAS,EACTC,EAAkB,GAQtB,OAPA9D,EAAa6C,SAAQ,SAAAkB,GAEZrC,EAAgBrM,SAAS0O,KAC1BF,GAAS,EACTC,EAAgBnL,KAAKoL,OAGtB,CAACF,EAAQC,MAGPE,GAAwBjC,aAAe,CAAC6B,GAA4BL,KAAwB,SAACU,EAAmBC,GAGzH,OAAKD,EAAkB,GAClBC,EAAa,GAEX,KAFgC,CAAC5E,GAAoC4E,EAAa,IADlD,CAAC5E,GAAkC2E,EAAkB,OAQ1FE,GAAuBpC,aAAe,CAjJT,SAAA/N,GAAK,OAAgBA,EAAM4L,cAAcA,cAAcC,MAAMuE,mBAiJvB7E,KAAgB,SAAC8E,EAAiB7E,GACvG,IAAM4E,EAAoBC,EAAgB7E,GAC1C,OAAK4E,GAA0B,MAG7BE,GAAWvC,aAAe,CAACV,GAAoB9B,KAAgB,SAAC8C,EAAQ7C,GAC1E,IAAM+E,EAAgBlC,EAAOJ,MAAK,SAAAU,GAAC,OAAIA,EAAExQ,KAAOqN,KAChD,OAAK+E,IACD1Q,QAAQC,IAAI,oEACL,SAKF0Q,GAAkBzC,aAAe,CAACuC,GAAUH,GAAsB9C,GAAoBI,KAAwB,SAAC8C,EAAevE,EAAcqC,EAAQX,GAG7J,IAAK6C,EAAcE,SAAU,OAAO,KAGpC,IAAMC,EAAiBrC,EAAOK,QAAO,SAAAC,GAAC,OAAI3C,EAAa3K,SAASsN,EAAExQ,OAC9DwS,GAAkB,EAYtB,GAXAD,EAAe7B,SAAQ,SAAAkB,GACnB,IAAIa,GAAgB,EACpBb,EAAYjB,UAAUD,SAAQ,SAAAI,GACtBvB,EAAgBrM,SAAS4N,KACzB2B,GAAgB,MAInBA,IAAeD,GAAkB,OAGrCA,EAAiB,OAAO,KAG7B,IAAIE,GAA2B,EAM/B,OALAN,EAAczB,UAAUD,SAAQ,SAAAI,GACxBvB,EAAgBrM,SAAS4N,KACzB4B,GAA2B,MAG9BA,EAIE,KAHIxF,MAOFyF,GAAiB/C,aAAe,CAACzB,GAAiBb,KAAiB,SAACc,EAAWpO,GAExF,OAAOoO,EAAUpO,MAIR4S,GAAkBhD,aAAe,CAACN,GAAuBrB,GAAiBE,KAAkB,SAACoB,EAAiBrB,EAAWE,GAWlI,OARcmB,EAAgBsD,QAAO,SAACC,EAAOvF,GACzC,OAAIa,EAAUb,GACHuF,EAAQ1E,EAAUb,GAElBuF,IAEZ5E,MAMM6E,GAA8BnD,aACvC,CAACN,GAAuBhC,GAAgBM,KACxC,SAAC2B,EAAiByD,EAAkBnF,GAEpC,IAAIoF,EAAeC,GAAgCF,EAAkBnF,GAKrE,OAFAoF,EAAeA,EAAa1C,QAAO,SAAA4C,GAAC,OAAI5D,EAAgBrM,SAASiQ,SAKxDC,GAA4BxD,aACrC,CAACN,GAAuBhC,GAAgBE,KACxC,SAAC+B,EAAiByD,EAAkBrF,GAEpC,IAAIsF,EAAeC,GAAgCF,EAAkBrF,GAKrE,OAFAsF,EAAeA,EAAa1C,QAAO,SAAA4C,GAAC,OAAI5D,EAAgBrM,SAASiQ,SAIrE,SAASD,GAAgCG,GAAqC,IAC1E,IAAIJ,EAAe,GADuD,mBAAjBK,EAAiB,iCAAjBA,EAAiB,kBAI1E,cAA6BA,EAA7B,eAA8C,CAAzC,IAAMC,EAAc,KAGrB,IAAK,IAAMC,KAAcD,EAEjBA,EAAeC,GAAYtQ,SAASmQ,IAEpCJ,EAAazM,KAAKgN,GAM9B,OAAOP,EClQX,IASezP,gBATS,SAAC3B,EAAO4R,GAC5B,IAAM3C,EAASF,GAAU/O,EAAO4R,EAASlG,UACzC,MAAO,CACH9K,KAAMqO,EAAOrO,KACboM,YAAaiC,EAAOjC,YACpB6E,MAAO5C,EAAO4C,SAGK,GACZlQ,EArBf,YAA2E,EAAjD+J,SAAkD,IAAxCoG,EAAuC,EAAvCA,UAAWlR,EAA4B,EAA5BA,KACvCmR,GADmE,EAAtB/E,YAAsB,EAAT6E,MAClD,QAIZ,MAHkB,QAAdC,IAAwBC,EAAQC,KAAM,MACxB,WAAdF,IAAwBC,EAAQE,KAAI,MAGpC,cAACrQ,EAAA,EAAD,CAAK8I,QAAS,EAAGwH,OAAQ,EAAGrQ,GAAI,CAACsQ,gBAAiBJ,GAAlD,SACI,cAACrJ,EAAA,EAAD,CAAY1G,QAAQ,QAApB,SAA6BpB,SCwGzC,IAqBMc,GAAqB,CACvB0Q,OH5E+B,kBAAM,SAACjR,GACtCA,EAAS8E,MACTE,GAAY,KACZ+E,GAAc,OG0EdmH,QH9FgC,kBAAM,SAAClR,EAAUmF,GAClCuE,GAA0BvE,MAMzCnF,EAAS8E,MACLE,GACAA,KAEAtG,QAAQC,IAAI,4BAEhBqG,GAAY,KACZ+E,GAAc,MAXVrL,QAAQC,IAAI,uDGmGL6B,gBA/BS,SAAC3B,GACrB,IAAMN,EAAWK,EAAeC,GAChC,MAAO,CACHsS,QHnDkCpH,GGoDlClG,QAAS+F,GAA2B/K,GACpCuS,OAAQ1H,GAA0B7K,GAClCwS,eAAgBxH,GAAwBhL,GAAOyS,SAC/CC,iBAAkB1H,GAAwBhL,GAAO2S,WACjDC,gBAAiB5H,GAAwBhL,GAAO4S,gBAChDC,gBAAiB7H,GAAwBhL,GAAO6S,gBAChDC,KAAM,CACFV,OAAQ5S,EAAU,SAAUE,GAC5B2S,QAAS7S,EAAU,UAAWE,GAC9BqT,mBAAoBvT,EAAU,qBAAsBE,GACpDsT,gBAAiBxT,EAAU,kBAAmBE,GAC9CuT,gBAAiBzT,EAAU,kBAAmBE,GAC9CwT,0BAA2B1T,EAAU,4BAA6BE,GAClEyT,oBAAqB3T,EAAU,sBAAuBE,OAgB9DgC,GAFWC,EArIf,YAA4J,IAAxH4Q,EAAuH,EAAvHA,OAAQvN,EAA+G,EAA/GA,QAASsN,EAAsG,EAAtGA,QAASM,EAA6F,EAA7FA,gBAAiBC,EAA4E,EAA5EA,gBAAiBL,EAA2D,EAA3DA,eAAgBE,EAA2C,EAA3CA,iBAAkBN,EAAyB,EAAzBA,OAAQC,EAAiB,EAAjBA,QAASS,EAAQ,EAARA,KAK/I,SAASM,IACLhB,IA6CJ,SAASiB,EAA2BjG,GAA2B,IAAlBqF,IAAiB,yDAC1D,OAAIrF,EAAQtI,OAAS,EAEb,eAAClD,EAAA,EAAD,WACI,cAAC8G,EAAA,EAAD,CAAY1G,QAAQ,QAApB,SACa,UAARyQ,EACMK,EAAKK,oBAELL,EAAKI,0BAHH,QAMb,cAAClJ,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAU,MAAMU,eAAe,SAAS0I,WAAW,SAAnE,SACKlG,EAAQpP,KAAI,SAAA0N,GAAQ,OACjB,cAAC,GAAD,CAA+BA,SAAUA,EAAUoG,UAAWW,EAAW,MAAQ,UAA5D/G,WAMlC,GAIX,OAxEKkH,IAAiBA,EAAkB,IACnCC,IAAiBA,EAAkB,IAwEpC,eAACU,GAAA,EAAD,CACI7N,KAAM6M,EACN9H,QAAS2I,EACTI,OAAO,QACP,kBAAgB,0BAChBvR,WAAS,EALb,UAOI,cAACwR,GAAA,EAAD,CAAatV,GAAG,0BAAhB,SACK2U,EAAKC,qBAGV,cAACW,GAAA,EAAD,CAAeC,UAAU,EAAzB,SAxEAf,EAAgB9N,OAAS,GAAK+N,EAAgB/N,OAAS,EAEnD,gCACI,cAAClD,EAAA,EAAD,CAAKgI,aAAc,EAAnB,SAmBR,qCACI,cAAClB,EAAA,EAAD,CAAY1G,QAAQ,QAApB,SACmB,UAAdwQ,EACMM,EAAKE,gBAELF,EAAKG,gBAHG,QAOnB,cAACjJ,EAAA,EAAD,CAAMC,WAAS,EAACW,eAAe,SAA/B,SACI,cAAC,GAAD,CAAgBc,SAAU8G,GAAkBE,EAAkBZ,UAAU,eA1BvEuB,EAA2BT,GAC3BS,EAA2BR,GAAiB,MAKrD,qCACI,cAACe,GAAA,EAAD,UACK5O,IAEJsN,OA4DL,eAACuB,GAAA,EAAD,WACI,cAAC9M,EAAA,EAAD,CAAQ+M,WAAS,EAAC9M,QAASoM,EAA3B,SACKN,EAAKV,SAEV,cAACrL,EAAA,EAAD,CAAQ+M,WAAS,EAAC9M,QArF9B,WACIqL,KAoFQ,SACKS,EAAKT,mB,+CCS1B,IAYM3Q,GAAqB,CACvB0Q,OTnE6B,kBAAM,SAACjR,GACpCA,EAAS8E,MACTE,GAAY,OSkEZkM,QTrF8B,kBAAM,SAAClR,EAAUmF,GAE/C,GADed,GAAwBc,KACvC,CAKA,GAAIH,GAAW,CACX,IAAMP,EAAOD,GAAsBW,KACnCH,GAAUP,QAEV/F,QAAQC,IAAI,4BAEhBqB,EAAS8E,MACTE,GAAY,UAXRtG,QAAQC,IAAI,+CSmFhBiU,aThE8B,SAACnO,GAAD,OAAU,SAACzE,GACzCA,EAAS+E,GAAQN,OSiENjE,gBAjBS,SAAC3B,EAAO4R,GAC5B,IAAMlS,EAAWK,EAAeC,GAChC,MAAO,CACHgU,UAAWrO,GAAsB3F,GACjCuS,OAAQ/M,GAAwBxF,GAChCiU,YAAapO,GAA+B7F,GAC5C8S,KAAM,CACFV,OAAQ5S,EAAU,SAAUE,GAC5BwU,OAAQ1U,EAAU,SAAUE,OAWpCgC,GAFWC,EAjIf,YAA+F,IAAxE4Q,EAAuE,EAAvEA,OAAQ0B,EAA+D,EAA/DA,YAAaD,EAAkD,EAAlDA,UAAW5B,EAAuC,EAAvCA,OAAQC,EAA+B,EAA/BA,QAAS0B,EAAsB,EAAtBA,aAAcjB,EAAQ,EAARA,KAElF,EAAkClL,mBAAS,gBAAIoM,IAA/C,mBAAOG,EAAP,KAAkBC,EAAlB,KAKA,SAASC,EAAc5U,EAAK4C,GACxB+R,GAAa,SAAAE,GAAQ,oCACdA,GADc,mBAEhB7U,EAFgB,6BAGV6U,EAAS7U,IAHC,IAIb4C,eAKZ,SAAS+Q,IACLhB,IAiEJ,OAhFAnK,qBAAU,WACNmM,EAAa,gBAAIJ,MAClB,CAACA,IA+EA,8BACI,eAACT,GAAA,EAAD,CACI7N,KAAM6M,EACN9H,QAAS2I,EACTI,OAAO,QACP,kBAAgB,0BAJpB,UAMI,cAACC,GAAA,EAAD,CAAatV,GAAG,0BAAhB,SACK8V,IAGL,cAACP,GAAA,EAAD,CAAeC,UAAU,EAAzB,SAvB8B,IAAlChV,OAAOD,KAAKyV,GAAWrP,OAAsB,6BAG7C,+BACKnG,OAAOD,KAAKsV,GAAWhW,KAAI,SAACyB,EAAK8U,GAC9B,OA5ChB,SAA0BC,EAAW/U,EAAK8U,GACtC,IAAM3O,EAAO4O,EAAU/U,GAEvB,OAAImG,EAAK6O,WAED,cAACC,GAAA,EAAD,CAEInS,MAAOqD,EAAKhF,KACZ+T,eAAe,QACfC,QACI,cAACC,GAAA,EAAD,CACIC,QAASX,EAAU1U,GAAK4C,MACxBG,SAAU,SAACC,GACP4R,EAAc5U,GAAM0U,EAAU1U,GAAK4C,WAP1CkS,GAeb,cAACQ,GAAA,EAAD,CAEIjB,WAAS,EACTkB,aAAchB,EAAUvU,GAAK+G,WAAa,mBAAqB,OAC/D0L,OAAO,QACP3P,MAAOyR,EAAUvU,GAAKmB,KACtBqE,KAAM+O,EAAUvU,GAAK2H,QAAU,QAAU4M,EAAUvU,GAAK+G,WAAa,WAAa,OAClFvE,WAAS,EACTD,QAAQ,WACRK,MAAO8R,EAAU1U,GAAK4C,MACtB4S,OAAQd,EAAU1U,GAAK4C,MACvBG,SAAU,SAACC,GAAD,OAAW4R,EAAc5U,EAAKgD,EAAMC,OAAOL,SAVhDkS,GAsBMW,CAAiBlB,EAAWvU,EAAK8U,UAsB5C,eAACV,GAAA,EAAD,WACI,cAAC9M,EAAA,EAAD,CAAQ+M,WAAS,EAAC9M,QAASoM,EAA3B,SACKN,EAAKV,SAEV,cAACrL,EAAA,EAAD,CAAQ+M,WAAS,EAAC9M,QAlFlC,WAEI,IAAImO,GAAQ,EACZ,IAAK,IAAM1V,KAAO0U,EACTA,EAAU1U,GAAK4C,OAAU8R,EAAU1U,GAAKgV,aAAYU,GAAQ,GAEhEA,IAELpB,EAAaI,GACb9B,MAyEY,SACKS,EAAKoB,oBC9GjBkB,GAAoB,SAACpV,GAAD,OAAmBA,EAAMqV,MAAM9Q,SAAWF,IAC9DiR,GAAqB,SAACtV,GAAD,OAAkBA,EAAMqV,MAAM7Q,OAAO,I,qBCuCvE,IAIM9C,GAAqB,CACvBuE,MAAOrB,IAEIjD,gBAPS,SAAC3B,GAAD,MAAY,CAChCuS,OAAQ6C,GAAkBpV,GAC1BqV,MAAOC,GAAmBtV,MAO1B0B,GAFWC,EA3Cf,YAAiD,IAAzB4Q,EAAwB,EAAxBA,OAAQ8C,EAAgB,EAAhBA,MAAOpP,EAAS,EAATA,MAG7BsP,EAAQC,KAAKC,MAAM,CACrBC,OAAO,EACP5L,SAAU,UACV6L,mBAAmB,EACnBC,MAAO,IACPC,kBAAkB,EAClBC,QAAS,SAACJ,GACNA,EAAMrN,iBAAiB,aAAcmN,KAAKO,WAC1CL,EAAMrN,iBAAiB,aAAcmN,KAAKQ,cAE9CC,SAAU,WACNhQ,OAgBR,OACI,mCAXKsM,GACA8C,IACDE,EAAMW,aAEVX,EAAMY,KAAK,CACPC,KAAMf,EAAMpQ,KACZ8D,MAAOsM,EAAMrQ,iB,oBChCZqR,GAAiB,SAAArW,GAAK,OAAyBA,EAAMsW,QAAQC,UAC7DC,GAAqB,SAAAxW,GAAK,OAAqBA,EAAMsW,QAAQrB,OAC7DwB,GAAsB,SAAAzW,GAAK,OAAoBA,EAAMsW,QAAQ/R,QCI3D,SAASmS,GAAT,GAA+B,IAAZJ,EAAW,EAAXA,QACxB5O,EAAWC,cAEXwE,EDL0B,SAAAmK,GAAO,OAAiBA,EAAQnK,SCK/CwK,CAAqBL,GAChC1V,EDL4B,SAAA0V,GAAO,OAAeA,EAAQ1V,KCKnDgW,CAAuBN,GAC9BtJ,EDLmC,SAAAsJ,GAAO,OAAQA,EAAQtJ,YCK5C6J,CAA8BP,GAC5CpJ,EDL8B,SAAAoJ,GAAO,OAAaA,EAAQpJ,OCKjD4J,CAAyBR,GAIlCS,EAAcC,GAFN9J,EAAO,IASrB,OACI,eAAC+J,GAAA,EAAD,CAAiCpV,GAAI,CAACqV,MAAO,OAAQ,SAAU,CAACC,OAAQ,YAAanQ,QANzF,WACInH,QAAQC,IAAR,sBAA2Bc,EAA3B,gBAAuCuL,EAAvC,MACAzE,EAAS,kBAAD,OAAmByE,KAI3B,UACI,qBACI+K,MAAM,OACNE,IAAG,UAAKL,EAAL,+BACHM,OAAM,UAAKN,EAAL,wCACNO,IAAK1W,EACL2W,QAAQ,SAEZ,cAACC,GAAA,EAAD,CACIzO,MAAOnI,EACP6W,SAAUzK,MAVE+J,GCrBrB,IAAMW,GAAW,WAKpB,OAAO,IAAI3T,SAAQ,SAACnF,EAASoF,GACzB9D,IAAMyX,IAAN,UAAa1X,EAAb,cACCwG,MAAK,SAAAC,GACGA,EAAId,OACL/F,QAAQC,IAAI,oBACZlB,EAAQ,KAEZiB,QAAQC,IAAI4G,EAAId,MAChBhH,EAAQ8H,EAAId,SAEfe,OAAM,SAAAC,GACH/G,QAAQC,IAAI8G,EAAIgR,YAChB5T,EAAO4C,EAAIgR,mBA0CvB,ICpDaC,GAAelX,YAAY,CACpCC,KAAM,UACNH,aARiB,CACjB8V,SAAU,GACVhS,OAAQ,OACR0Q,MAAO,MAMPpU,SAAU,CACNiX,eAAgB,SAAC9X,GACbH,QAAQC,IAAI,wBACZE,EAAMuE,OAAS,WAEnBwT,iBAAkB,SAAC/X,EAAOe,GACtBlB,QAAQC,IAAI,mBAAoBiB,EAAOC,SACvChB,EAAMuE,OAAS,YACfvE,EAAMuW,SAAWxV,EAAOC,SAE5BgX,cAAe,SAAChY,EAAOe,GACnBlB,QAAQC,IAAI,2BAA4BiB,EAAOC,SAC/ChB,EAAMuE,OAAS,SACfvE,EAAMiV,MAAQlU,EAAOC,YAmB1B,GAA4D6W,GAAapW,QAAjEqW,GAAR,GAAQA,eAAgBC,GAAxB,GAAwBA,iBAAkBC,GAA1C,GAA0CA,cAElCH,MAAf,QC5Ce,SAASI,KACpB,OACI,8BACI,cAACvP,EAAA,EAAD,CAAY1G,QAAQ,KAApB,0BCiEZ,IAMMN,GAAqB,CACvBwW,cF/CyB,2DAAM,WAAO/W,GAAP,UAAA+D,EAAA,sDAC/B/D,EAAS2W,MAETJ,KACCjR,MAAK,SAAAC,GACFvF,EAAS4W,GAAiBrR,OAE7BC,OAAM,SAAAC,GACHzF,EAAS4D,GAAU6B,EAAKtC,KACxBnD,EAAS6W,GAAcpR,OATI,2CAAN,wDEiDdjF,gBATS,SAAC3B,GAAD,MAAY,CAChCuW,SAAUF,GAAerW,GACzBuE,OAAQkS,GAAoBzW,GAC5BiV,MAAOuB,GAAmBxW,GAC1BN,SAAUK,EAAeC,MAOzB0B,GAFWC,EAtEf,YAAiF,IAAD,IAAzD4U,gBAAyD,MAA9C,GAA8C,EAA1ChS,EAA0C,EAA1CA,OAAQ0Q,EAAkC,EAAlCA,MAAOiD,EAA2B,EAA3BA,cAAexY,EAAY,EAAZA,SAE1DyY,EAA8B,IAApB5B,EAASzR,OAsBzB,SAASsT,IACL,OACI,cAACH,GAAD,IA8BR,OApDAhQ,qBAAU,WACFkQ,IACAtY,QAAQC,IAAI,gCACZoY,OAEL,CAACA,EAAeC,IAEnB,WACI,OAAQ5T,GACJ,IAAK,UAML,QACI,OAAO6T,IALX,IAAK,YACD,OAAQD,EAgBZ,cAACzP,EAAA,EAAD,CAAY1G,QAAQ,KAApB,SAA0BxC,EAAU,kBAAmBE,KAKvD,cAACsK,EAAA,EAAD,CAAMC,WAAS,EAACoO,QAAS,GAAIC,QAAS,EAAGzW,GAAI,CAAC0W,WAAY,EAAGC,YAAa,GAA1E,SACKjC,EAASvY,KAAI,SAACsY,EAAS/B,GAAV,OACV,cAACvK,EAAA,EAAD,CAAMyO,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAG3B,MAAM,OAA9C,SACI,cAACR,GAAD,CAASJ,QAASA,KADoC/B,QAtBlE,IAAK,SACD,OA6BauE,EA7BU7D,EA+B3B,gCACI,cAACvM,EAAA,EAAD,CAAY1G,QAAQ,KAApB,SAA0BxC,EAAU,uBAAwBE,KAC5D,cAACgJ,EAAA,EAAD,CAAY1G,QAAQ,QAApB,SAA6BxC,EAAUsZ,EAAcpZ,QAJjE,IAAyBoZ,EAUrBC,M,+EChEKC,GAAU,SAACC,GAKpB,OAAO,IAAIlV,SAAQ,SAACnF,EAASoF,GACzB9D,IAAMyX,IAAN,UAAa1X,EAAb,0BAAsCgZ,IAGrCxS,MAAK,SAAAC,GACF9H,EAAQ8H,EAAId,SAEfe,OAAM,SAAAC,GACH5C,EAAO4C,EAAIgR,mBAKVsB,GAAoB,SAACC,GAC9B,OAAO,IAAIpV,SAAQ,SAACnF,EAASoF,GAMzB,IAAM4B,EAAI,gBACHuT,GAEPtZ,QAAQC,IAAI8F,GACZ1F,IAAMkZ,KAAN,UAAcnZ,EAAd,kBAAuC2F,GACtCa,MAAK,SAAAC,GACF9H,EAAQ8H,EAAId,SAEfe,OAAM,SAAAC,GACH/G,QAAQC,IAAI8G,GACZ5C,EAAO,0BA2BnB,IChDaqV,GAAqB1Y,YAAY,CAC1CC,KAAM,gBACNH,aAViB,CACjBmL,cAAe,GACf8B,gBAAiB,GACjBf,cAAe,GACfpI,OAAQ,OACR0Q,MAAO,MAMPpU,SAAU,CACNyY,aAAc,SAACtZ,EAAOe,GACbf,EAAM0N,gBAAgBrM,SAASN,EAAOC,UAEvChB,EAAM0N,gBAAgB/I,KAAK5D,EAAOC,UAG1CuY,eAAgB,SAACvZ,EAAOe,GAEpBf,EAAM0N,gBAAkB1N,EAAM0N,gBAAgBgB,QAAO,SAAAhD,GAAQ,OAAIA,IAAa3K,EAAOC,YAEzFwY,mBAAoB,SAACxZ,EAAOe,GACxBlB,QAAQC,IAAI,4BACZE,EAAM0N,gBAAkB3M,EAAOC,SAEnCyY,iBAAkB,SAACzZ,EAAOe,GAEtBf,EAAM2M,cAAgB5L,EAAOC,SAEjC0Y,MAAO,SAAC1Z,EAAOe,GACXlB,QAAQC,IAAI,8BACZE,EAAM0N,gBAAkB3M,EAAOC,SAEnC8W,eAAgB,SAAC9X,GACbH,QAAQC,IAAI,6BACZE,EAAMuE,OAAS,WAEnBwT,iBAAkB,SAAC/X,EAAOe,GACtBlB,QAAQC,IAAI,wBAAyBiB,EAAOC,SAC5ChB,EAAMuE,OAAS,YACfvE,EAAM4L,cAAgB7K,EAAOC,QAC7BhB,EAAM0N,gBAAkBiM,GAA+B3Z,EAAM4L,cAAcO,WAAa,IAE5F6L,cAAe,SAAChY,EAAOe,GACnBlB,QAAQC,IAAI,gCAAiCiB,EAAOC,SACpDhB,EAAMuE,OAAS,SACfvE,EAAMiV,MAAQlU,EAAOC,QAAQ4W,WAC7B5X,EAAM4L,cAAgB,GACtB5L,EAAM0N,gBAAkB,KAGhCkM,cAAe,SAACC,OAOPC,GAAqB,SAAC3b,GAAD,gDAAQ,WAAOgD,EAAUmF,GAAjB,UAAApB,EAAA,sDACtC/D,EAAS2W,MAETkB,GAAQ7a,GACPsI,MAAK,SAAAC,GACFvF,EAAS4Y,GAASvN,GAAmBlG,OACrCnF,EAAS4W,GAAiBrR,IAC1BvF,EAAS6Y,SAEZrT,OAAM,SAAAsO,GACH9T,EAAS4D,GAAUkQ,EAAO3Q,KAC1BnD,EAAS6W,GAAc/C,OAXW,2CAAR,yDAe5BgF,GAAc,SAACC,EAAMC,GAAP,OAAgBA,EAAKC,OAAM,SAAAC,GAAQ,OAAIH,EAAK7Y,SAASgZ,OAEnEL,GAAa,kBAAM,SAAC7Y,EAAUmF,GAChC,IAAMoH,EAAkBD,GAAsBnH,KACxCuG,EAASD,GAAatG,KAE5B,GAA+B,IAA3BoH,EAAgB5I,OAApB,CAJ6C,MAD5BoV,EAAMC,EACsB,eAWzBtN,GAXyB,IAW7C,2BAA4B,CAAC,IAAlBe,EAAiB,QACxB,GAbasM,EAaGrM,GAA6BD,GAbjBqM,GAAYC,EAArBC,EAakCzM,IAbEuM,GAAYE,EAAMD,GAerE,YADA/Y,EAAS4Y,GAASpM,GAA0BC,MAbP,8BAmB7CzM,EAAS4Y,GAAS,UAbd5Y,EAAS4Y,GAAS,OAgBbA,GAAW,eAAC/L,EAAD,uDAAa,GAAb,OAAoB,SAAC7M,EAAUmF,GACnD,GAAI0H,EAAW,CACX,IAAMsM,EAAexM,GAAgBxH,IAAY0H,GACjD7M,EAASqY,GAAmBc,IAGhCnZ,EAASsY,GAAiBzL,MAUjBuM,GAA6B,SAACpc,EAAIiP,GAC3C,IAAIoN,EAAiBC,KAEjBtB,EAAmBqB,EAAevM,MAAK,SAAAyM,GAAC,OAAIA,EAAEvc,KAAOA,KACrDgb,EAEAA,EAAiB/L,QAAUA,GAG3B+L,EAAmB,CAAChb,KAAIiP,WACxBoN,EAAe7V,KAAKwU,IAIxBwB,GAAoBH,EAAgB,mBAIlCb,GAAiC,SAACxb,GACpC0B,QAAQC,IAAI,sBAAuB2a,MACnC5a,QAAQC,IAAI3B,GACZ,IAAMyN,EAAgB6O,KAAgCxM,MAAK,SAAAyM,GAAC,OAAIA,EAAEvc,KAAOA,KAIzE,OAFA0B,QAAQC,IAAI,yBAA0B8L,GAEjCA,GAEAA,EAAcwB,QAEZxB,EAAcwB,QAJM,MAMzBqN,GAAgC,WAClC,IAAID,EAAiBI,GAAqB,kBAE1C,OAAKJ,GAAuB,IAmD1BK,GAAyB,SAAC1c,GAAD,OAAQ,SAACgD,EAAUmF,GAG9C,IAAIwU,EAAoC,GAClCzL,EAAmBF,GAA0B7I,IAAYnI,GAC/D,GAAIkR,EAAkB,CAAC,IAAD,iBACKA,GADL,IAClB,2BAAyC,CAAC,IAA/B3D,EAA8B,QAEjCA,IAAavN,IAGZ+Q,GAAoB5I,IAAYoF,IAErCoP,EAAkCnW,KAAK+G,KARzB,+BAetB,IAAMqP,EAAgCxJ,GAA0BjL,IAAYnI,GAItE6c,EAAiB,UAAOF,EAAP,aAA6CC,IAEhEE,EAA0B,GAC9BD,EAAkBnM,SAAQ,SAAAI,GACtB,IAAMmC,EAAe8J,GAAwB5U,IAAY2I,GACrDmC,IAEA6J,EAAuB,uBAAOA,GAAP,aAAmC7J,QAGlE6J,EAAuB,uBAAOF,GAAP,aAAyCE,IAIhE,IAAME,EAAoB,UAAOL,EAAP,aAA6CG,IAEvE,GAAKE,GAAwD,IAAhCA,EAAqBrW,OAOlD,GAAuC,IAAnCmW,EAAwBnW,OAA5B,CAOA,IAAMsW,EAA0BH,EAAwBjd,KAAI,SAAAqd,GAAW,OAAIrM,GAAc1I,IAAY+U,MAC/FC,EAAqBtM,GAAc1I,IAAYnI,GAE/Cod,EAAc,uBAAmBD,EAAnB,8BAA2DF,EAAwBI,KAAK,OAC5Gra,EAASgK,GAAkBoQ,EAAgB,CAAC9I,SAAUtU,EAAIwU,WAAY,KAAMC,gBAAiB,GAAIC,gBAAiBoI,GAA0B,MAAM,WAG9I9Z,EAASsa,GAAyB,CAACtd,GAAKgd,aAZxCha,EAASsa,GAAyB,CAACtd,GAAKgd,SAPxCha,EAASsa,GAAyB,CAACtd,GAAK,SAuB1Cud,GAA2B,SAACvd,GAAD,OAAQ,SAACgD,EAAUmF,GAGhD,IAAMqV,EAAmBT,GAAwB5U,IAAYnI,GAG7D,GAAKwd,GAAgD,IAA5BA,EAAiB7W,OAA1C,CASA,IAAM8W,EAAuBD,EAAiB3d,KAAI,SAAAqd,GAAW,OAAIrM,GAAc1I,IAAY+U,MACrFQ,EAAuB7M,GAAc1I,IAAYnI,GAEjDod,EAAc,yBAAqBM,EAArB,mCAAoED,EAAqBJ,KAAK,OAClHra,EAASgK,GAAkBoQ,EAAgB,CAAC9I,SAAU,KAAME,WAAYxU,EAAIyU,gBAAiB,GAAIC,gBAAiB8I,GAAmB,MAAM,WAGvIxa,EAASsa,GAAyB,KAAM,CAACtd,GAAI2d,OAAOH,cAfpDxa,EAASsa,GAAyB,KAAM,CAACtd,OAsBpCsd,GAA2B,SAAC7I,EAAiBoI,GAAlB,OAAwC,SAAC7Z,GAEzEyR,GAAmBA,EAAgB9N,QAAU,GAC7C8N,EAAgB/D,SAAQ,SAAAI,GACpB9N,EAASmY,GAAarK,OAI1B+L,GAAqBA,EAAkBlW,QAAU,GACjDkW,EAAkBnM,SAAQ,SAAAI,GACtB9N,EAASoY,GAAetK,OAKhC9N,GAxMyC,SAACA,EAAUmF,GACpD,IAAMnI,EAAK+N,GAAsB5F,KAC3B8G,EAAUK,GAAsBnH,KACtCiU,GAA2Bpc,EAAIiP,MAwM/BjM,EAAS6Y,QAIPkB,GAA0B,SAA1BA,EAA2Blb,EAAO7B,GAEpC,IAAMwd,EAAmBzK,GAA4BlR,EAAO7B,GAE5D,GAAgC,IAA5Bwd,EAAiB7W,OAAc,OAAO,KAE1C,IAAIiX,EAAsB,GAS1B,OAPAJ,EAAiB9M,SAAQ,SAAAnD,GAErB,IAAMsQ,EAAId,EAAwBlb,EAAO0L,GAChC,MAALsQ,IACAD,EAAmB,uBAAOA,GAAP,aAA+BC,QAGpD,GAAN,oBAAWL,GAAX,aAAgCI,KAI7B,GAAuI1C,GAAmB5X,QAAlJ6X,GAAR,GAAQA,aAAcC,GAAtB,GAAsBA,eAAgBC,GAAtC,GAAsCA,mBAAoBC,GAA1D,GAA0DA,iBAAyB3B,IAAnF,GAA4E4B,MAA5E,GAAmF5B,gBAAgBC,GAAnG,GAAmGA,iBAAkBC,GAArH,GAAqHA,cAE7GqB,MAAf,Q,kDCjUA,IAoBe1X,gBApBS,SAAC3B,EAAO4R,GAC5B,OAAO,6BACAA,GADP,IAEI5R,YAcmB,GAGZ2B,EAtCf,YAAwD,IAAhC3B,EAA+B,EAA/BA,MAAO0L,EAAwB,EAAxBA,SAAU9K,EAAc,EAAdA,KAAMqb,EAAQ,EAARA,MAU3C,OALIvQ,IACA9K,EAAOmO,GAAU/O,EAAO0L,GAAU9K,KAClCqb,EAAQnL,GAAe9Q,EAAO0L,IAI9B,eAAChD,EAAA,EAAD,CAAY1G,QAAQ,QAApB,UACKpB,EAAMqb,EAAK,YAAQA,EAAR,UAAmB,S,UCiH3C,IAYMva,GAAqB,CACvBoY,mBAAoBA,GACpBN,mBAAoBA,IAET7X,gBAhBS,SAAC3B,GACrB,MAAO,CACHsO,SAAUf,GAAqBvN,GAC/BqO,OAAQhB,GAAmBrN,GAC3BuE,OAAQ0H,GAA0BjM,GAClCkc,sBAAuBhQ,GAAsBlM,GAC7CoN,QAASD,GAAcnN,GACvBqM,UAAWD,GAAgBpM,GAC3Bmc,aAAcpL,GAAgB/Q,GAC9BN,SAAUK,EAAeC,MAS7B0B,GAFWC,EAxIf,YAAoL,IAAjKya,EAAgK,EAAhKA,gBAAiB1O,EAA+I,EAA/IA,gBAAiBnJ,EAA8H,EAA9HA,OAAQ2X,EAAsH,EAAtHA,sBAAuB5N,EAA+F,EAA/FA,SAAUD,EAAqF,EAArFA,OAAQhC,EAA6E,EAA7EA,UAAW8P,EAAkE,EAAlEA,aAAcrC,EAAoD,EAApDA,mBAAoBN,EAAgC,EAAhCA,mBAAoB9Z,EAAY,EAAZA,SAiBnK,SAAS2c,EAAqB9N,GAC1B,IAAM+N,EAAgBjO,EAAOK,QAAO,SAAAC,GAAC,OAAIJ,EAAQK,eAAevN,SAASsN,EAAExQ,OACrEoe,EAAe,SAACC,GAAD,OAAW9O,EAAgBgB,QAAO,SAAApQ,GAAC,OAAIke,EAAM1N,UAAUzN,SAAS/C,OAErF,OACIge,EAActe,KAAI,SAACwe,EAAOjI,GAAR,OACd,cAAC3S,EAAA,EAAD,UACK2a,EAAaC,GAAO1X,OAAS,EAC1B,qCACI,cAAC4D,EAAA,EAAD,CAAY+T,QAAQ,QAApB,SAA6BD,EAAM5b,OAElC2b,EAAaC,GAAOxe,KAAI,SAACiR,EAAQsF,GAAT,OACrB,cAAC,GAAD,CAEA7I,SAAUuD,GADLsF,MAMT,cAACmI,GAAA,EAAD,CAAS7a,GAAI,CAAC8a,UAAW,EAAG/S,aAAc,QAExC,IAfJ2K,MA4FtB,OAjHAtM,qBAAU,WAENpI,QAAQC,IAAI,qCACZ0Z,EAAmB9L,KACpB,CAACwO,EAAuBxO,EAAiB8L,IAE5CvR,qBAAU,WACFmU,IAAoBF,IAEpBrc,QAAQC,IAAI,mCACZga,EAAmBsC,MAExB,CAACA,EAAiBF,EAAuBpC,IAgCzB,cAAXvV,EACQ,6BAIR,eAAC3C,EAAA,EAAD,WACI,eAAC8G,EAAA,EAAD,CAAY1G,QAAQ,KAApB,UACKxC,EAAU,QAASE,GADxB,KACqCyc,EADrC,YAIA,eAACS,GAAA,EAAD,CAAOtE,QAAS,EAAhB,UACI,cAAC,GAAD,CACI1X,KAAMpB,EAAU,YAAaE,GAC7Buc,MAAO5P,IAIViC,EAAStQ,KAAI,SAACuQ,EAASgG,GAAV,OACV,eAACsI,GAAA,EAAD,WACI,cAACC,GAAA,EAAD,CACIC,WAAY,cAACC,GAAA,EAAD,IACZ,gBAAc,kBACd7e,GAAG,iBAHP,SAKI,cAACuK,EAAA,EAAD,CAAY1G,QAAQ,KAApB,SAA0BuM,EAAQ3N,SAEtC,cAACqc,GAAA,EAAD,UACKZ,EAAqB9N,OATdgG,eCUxC,IAGM7S,GAAqB,CACvBwb,YAAa/R,GACbpG,UAAWA,IAEApD,gBAPS,SAAC3B,GAAD,MAAY,CAChCN,SAAUK,EAAeC,MAQzB0B,GAFWC,EA9Ef,YAA0H,IAA7F6Y,EAA4F,EAA5FA,eAAgB0C,EAA4E,EAA5EA,YAA4E,IAA/DC,iBAA+D,aAA5CC,mBAA4C,SAAvBrY,EAAuB,EAAvBA,UAAWrF,EAAY,EAAZA,SAEnGgI,EAAWC,cAOjB,SAAS0V,EAAoBlf,EAAIyC,I1BFU,SAACwb,EAAiBxb,GAC7D,OAAO,IAAImD,SAAQ,SAACnF,EAASoF,GAGzB,IAAM4B,EAAO,CACT0X,UAAW1c,GAEfV,IAAMqd,OAAN,UAAgBtd,EAAhB,mCAAkDmc,GAAmBxW,GACpEa,MAAK,SAAAC,GACF9H,EAAQ8H,EAAId,SAEfe,OAAM,SAAAC,GACH5C,EAAO,8C0BTXwZ,CAAgCrf,EAAIyC,GACnC6F,MAAK,SAAAC,GACF3B,EAAU,GAAD,OAAIvF,EAAU,sBAAuBE,GAArC,YAAkDkB,EAAlD,KAA2D0D,IAEpEoD,EAAS,qBAEZf,OAAM,SAAAC,GACH7B,EAAU,UAAD,OAAW6B,GAAOtC,OAUnC,OACI,cAAC,KAAD,UACI,cAAC0F,EAAA,EAAD,CAAMC,WAAS,EAACW,eAAe,SAA/B,SACK4P,EAAexc,KAAI,SAACyf,EAAQlJ,GACzB,IAAMpW,EAAgCsf,E3B9B4BtR,S2B+B5DiB,E3B9BqB,SAACxB,GAAD,OAAyBA,EAAcwB,Q2B8BlDsQ,CAAgCD,GAC1C7c,E3BjCkB,SAACgL,GAAD,OAA4BA,EAAc0R,U2BiCrDK,CAA6BF,GACpCG,E3B/BkB,SAAChS,GAAD,OAA4BA,EAAcgS,K2B+BrDC,CAA6BJ,GACpC5Z,E3BtCsB,SAAC+H,GAAD,aAAwB,UAAAA,EAAc/I,YAAd,eAAoBM,WAAY,G2BsCnE2a,CAAiCL,GAElD,OACI,eAAC,KAAD,CAAiBvL,OAAQ,EAAzB,UACI,eAAC,KAAD,CAAK6L,QAAQ,OAAOzK,WAAW,SAA/B,UACI,cAAC5K,EAAA,EAAD,CAAY1G,QAAQ,QAApB,SAA6BpB,IAC7B,cAACoI,EAAA,EAAD,CAAYhC,QAAS,kBArCjD,SAAyB7I,EAAIiP,GACzB1F,EAAS,kBAAD,OAAmBvJ,IAC3Boc,GAA2Bpc,EAAIiP,GAmCoB4Q,CAAgB7f,EAAIiP,IAA/C,SACI,cAAC6Q,GAAA,EAAD,MAEFd,EAIA,GAHF,cAACnU,EAAA,EAAD,CAAYhC,QAAS,kBAAMqW,EAAoBlf,EAAIyC,IAAnD,SACI,cAACsd,GAAA,EAAD,MAGHf,EACD,cAACnU,EAAA,EAAD,CAAYhC,QAAS,kBA7BjD,SAAkC7I,EAAIiP,GAClC8P,EAAY,GAAI,GAAI,cAAC,GAAD,CAASd,gBAAiBje,EAAIuP,gBAAiBN,KAAqB,eA4BrC+Q,CAAyBhgB,EAAIiP,IAAxD,SACI,cAACgR,GAAA,EAAD,MAEF,MAGN,cAAC1V,EAAA,EAAD,CAAY1G,QAAQ,QAApB,SAA6BpB,IAE7B,cAAC8H,EAAA,EAAD,CAAY1G,QAAQ,QAApB,SAA6B,IAAIqc,KAAKT,GAAMU,uBAE3ClB,EACD,eAAC1U,EAAA,EAAD,CAAY1G,QAAQ,QAApB,mBAAmC6B,KACjC,KAxBI0Q,a,gCC3ClC,SAASgK,GAASC,GACd,IAAQC,EAAqCD,EAArCC,SAAUpc,EAA2Bmc,EAA3Bnc,MAAOkS,EAAoBiK,EAApBjK,MAAUmK,EAAnC,aAA6CF,EAA7C,IAEA,OACI,+CACIG,KAAK,WACLC,OAAQvc,IAAUkS,EAClBpW,GAAE,0BAAqBoW,GACvB,uCAA+BA,IAC3BmK,GALR,aAOKrc,IAAUkS,GACP,cAAC,KAAD,CAAK1S,GAAI,CAAEgd,EAAG,GAAd,SACKJ,OAOrB,IAAMK,GAAW,CACb,CAACle,KAAM,QAASyB,MAAO,GACvB,CAACzB,KAAM,UAAWyB,MAAO,GACzB,CAACzB,KAAM,aAAcyB,MAAO,EAAG0c,UAAU,IAwE7C,IAUepd,gBAVS,SAAC3B,GAAD,MAAY,CAChCyH,QAAS1E,EAAc/C,GACvBuD,oBAAqBD,GAA0BtD,GAC/CyD,sBAAuBD,GAA4BxD,GACnD2D,yBAA0BD,GAA+B1D,GACzDN,SAAUK,EAAeC,MAEF,GAGZ2B,EA/Ef,YAAyH,IAA5F8F,EAA2F,EAA3FA,QAASlE,EAAkF,EAAlFA,oBAAqBE,EAA6D,EAA7DA,sBAAuBE,EAAsC,EAAtCA,yBAA0BjE,EAAY,EAAZA,SAElGgI,EAAWC,cACTqX,EAAQC,cAARD,IAEFE,EAAWJ,GAAS7Q,MAAK,SAAAkR,GAAC,OAAIA,EAAEve,OAASoe,KAC3CI,EAAUF,EAEVA,GAAYE,EAAQL,WAAatX,IAEjC2X,EAAU,MAGdnX,qBAAU,WAEDmX,GACD1X,EAAS,YAAD,OAAaoX,GAAS,GAAGle,SAEtC,CAACwe,EAAS1X,IAEb,IAAM2X,EAAWD,EAAUA,EAAQ/c,MAAQ,EAE3C,EAA0BuF,mBAASyX,GAAnC,mBAAOhd,EAAP,KAAcid,EAAd,KAUA,SAASC,EAAShL,GACd,MAAO,CACHpW,GAAG,cAAD,OAAgBoW,GAClB,gBAAgB,mBAAhB,OAAoCA,IAI5C,OACI,eAAC,KAAD,CAAK2C,MAAM,OAAX,UACI,eAACsI,GAAA,EAAD,CACIC,cAAc,OACdzd,QAAQ,aACR0d,0BAAwB,EACxBrd,MAAOA,EACPG,SAtBS,SAACC,EAAOkd,GACzB,IAAMP,EAAUN,GAAS7Q,MAAK,SAAAkR,GAAC,OAAIA,EAAE9c,QAAUsd,KAC3CP,IACAE,EAASF,EAAQ/c,OACjBqF,EAAS,YAAD,OAAa0X,EAAQxe,SAmBzB,aAAW,qBANf,UAQI,cAACgf,GAAA,EAAD,cAAKrd,MAAO/C,EAAU,sBAAuBE,IAAe6f,EAAS,KACrE,cAACK,GAAA,EAAD,cAAKrd,MAAO/C,EAAU,wBAAyBE,IAAe6f,EAAS,KACtE9X,EAAU,cAACmY,GAAA,EAAD,cAAKrd,MAAO/C,EAAU,2BAA4BE,IAAe6f,EAAS,KAAS,MAElG,cAAChB,GAAD,CAAUlc,MAAOA,EAAOwd,KAAMf,GAAS,GAAGle,KAAM2T,MAAO,EAAvD,SACI,cAAC,GAAD,CAAmBiG,eAAgBjX,MAEvC,cAACgb,GAAD,CAAUlc,MAAOA,EAAOwd,KAAMf,GAAS,GAAGle,KAAM2T,MAAO,EAAvD,SACI,cAAC,GAAD,CAAmBiG,eAAgB/W,EAAuB0Z,WAAW,MAExE1V,EACG,cAAC8W,GAAD,CAAUlc,MAAOA,EAAOwd,KAAMf,GAAS,GAAGle,KAAM2T,MAAO,EAAvD,SACI,cAAC,GAAD,CAAmBiG,eAAgB7W,EAA0BwZ,WAAW,EAAMC,aAAa,MAE7F,SCxBlB,IAMM1b,GAAqB,CACvBoe,uB1BnCkC,2DAAM,WAAO3e,GAAP,UAAA+D,EAAA,sDFNjC,IAAInB,SAAQ,SAACnF,EAASoF,GACzB9D,IAAMyX,IAAN,UAAa1X,EAAb,6BACCwG,MAAK,SAAAC,GACF9H,EAAQ8H,EAAId,SAEfe,OAAM,SAAAC,GACH5C,EAAO,6CEEdyC,MAAK,SAAA+T,GACF,IAAIuF,EAAQvF,EAAe9L,QAAO,SAAA+O,GAAM,MAAsB,UAAlBA,EAAOlZ,UAC/Cyb,EAAUxF,EAAe9L,QAAO,SAAA+O,GAAM,MAAsB,YAAlBA,EAAOlZ,UAEjDwb,EAAMjb,OAAS,GAAG3D,EAASkE,GAAuB0a,IAClDC,EAAQlb,OAAS,GAAG3D,EAASmE,GAAyB0a,OAE7DrZ,OAAM,SAAAC,GACH/G,QAAQC,IAAI8G,GACZzF,EAAS4D,GAAU6B,EAAKtC,QAXY,2CAAN,uD0BoClC2b,4B1BtBsC,2DAAM,WAAO9e,GAAP,UAAA+D,EAAA,sDFPrC,IAAInB,SAAQ,SAACnF,EAASoF,GACzB9D,IAAMyX,IAAN,UAAa1X,EAAb,uCACCwG,MAAK,SAAAC,GACF9H,EAAQ8H,EAAId,SAEfe,OAAM,SAAAC,GACH5C,EAAO,mDEGdyC,MAAK,SAAA+T,GACFrZ,EAASoE,GAA4BiV,OAExC7T,OAAM,SAAAC,GACH/G,QAAQC,IAAI8G,GACZzF,EAAS4D,GAAU6B,EAAKtC,QAPgB,2CAAN,wD0BwB3B3C,gBAVS,SAAC3B,GAAD,MAAY,CAChCwH,WAAY5E,EAAsB5C,GAClCyH,QAAS1E,EAAc/C,GACvB6D,SAAUZ,EAAejD,GACzBmH,MAAO/D,GAAgBpD,MAQvB0B,GAFWC,EA3Ef,YAAqH,IAA9FkC,EAA6F,EAA7FA,SAAUsD,EAAmF,EAAnFA,MAAOK,EAA4E,EAA5EA,WAAYC,EAAgE,EAAhEA,QAASqY,EAAuD,EAAvDA,uBAAwBG,EAA+B,EAA/BA,4BAE3EC,EACF,6BAGEC,EACF,6BAmDJ,OA/CAlY,qBAAU,WACFT,GACAsY,IAGArY,GACAwY,MAEL,CAACzY,EAAYC,EAASqY,EAAwBG,IAwC7C,cAACre,EAAA,EAAD,CAAKwe,UAAU,cAAcrC,QAAQ,OAAOsC,cAAc,SAAS/M,WAAW,SAA9E,SACK9L,EAlBD,qCATA,eAAC5F,EAAA,EAAD,CAAKwe,UAAU,cAAc7H,WAAY,EAAG+H,cAAe,EAAGvC,QAAQ,OAAOsC,cAAc,SAAS/M,WAAW,SAA/G,UACI,cAAC5K,EAAA,EAAD,CAAY1G,QAAQ,KAApB,SAA0B6B,IAC1B,cAAC6E,EAAA,EAAD,CAAY1G,QAAQ,QAApB,SAA6BmF,OAXjC,eAACvF,EAAA,EAAD,WACKue,EACA1Y,EAAUyY,EAAe,MAmB1B,cAAC,GAAD,OAOJ,cAACte,EAAA,EAAD,UACI,cAAC8G,EAAA,EAAD,CAAY1G,QAAQ,KAApB,gD,8BC3DVue,GAA+B,SAACvgB,GAAD,OAA2BA,EAAM6Z,QAAQ2G,iBAEjEC,GAA6B,SAACzgB,GAAD,OAAsBA,EAAM6Z,QAAQjO,eACjE8U,GAAsB,SAAC1gB,GAAD,OAA6BA,EAAM6Z,QAAQtV,QACjEoc,GAAqB,SAAC3gB,GAAD,OAA8BA,EAAM6Z,QAAQ5E,OACjE2L,GAA6B,SAAC5gB,GAAD,OAAsBA,EAAM6Z,QAAQ2G,iBAEjEK,GAAwB,SAAC7gB,GAAD,OAA2BA,EAAM6Z,QAAQjO,cAAc4B,gBAC/EsT,GAAsB,SAAC9gB,GAAD,OAA6BA,EAAM6Z,QAAQjO,cAAc0B,cAE/EyT,GAAsB,SAAC/gB,GAAD,OAA6BA,EAAM6Z,QAAQjO,cAAcC,MAAMgB,QACrFmU,GAA4B,SAAChhB,GAAD,OAAuBA,EAAM6Z,QAAQjO,cAAcC,MAAMY,cACrFwU,GAAyB,SAACjhB,GAAD,OAA0BA,EAAM6Z,QAAQjO,cAAcC,MAAMQ,WAErF6U,GAAkC,SAAClhB,GAAD,OAAiBA,EAAM6Z,QAAQjO,cAAcC,MAAMG,cACrFmV,GAAuC,SAACnhB,GAAD,OAAYA,EAAM6Z,QAAQjO,cAAcC,MAAMC,mBACrFsV,GAAiC,SAACphB,GAAD,OAAkBA,EAAM6Z,QAAQjO,cAAcC,MAAMuE,mBAAqB,IAI1GiR,GAA0C,SAACrhB,GAAD,OAAiBA,EAAM6Z,QAAQjO,cAAcxM,UAAUY,EAAM6Z,QAAQ2G,iBAAiBpT,SAAW,IAC3IkU,GAAyC,SAACthB,GAAD,OAAkBA,EAAM6Z,QAAQjO,cAAcxM,UAAUY,EAAM6Z,QAAQ2G,iBAAiBlT,cAAgB,IAChJiU,GAA2C,SAACvhB,GAAD,OAAgBA,EAAM6Z,QAAQjO,cAAcxM,UAAUY,EAAM6Z,QAAQ2G,iBAAiBhT,gBAAkB,IAEzJgU,GAAa,SAACxhB,EAAOY,GAAR,OAA6CA,GAGnD6gB,GAAiB1T,aAAe,CATnB,SAAC/N,GAAD,OAA8CA,EAAM6Z,QAAQjO,cAAcxM,UAAUY,EAAM6Z,QAAQ2G,iBAAiB5f,MAAQ,IASpF2f,KAA+B,SAACmB,EAAaxgB,GAC1G,OAAOwgB,GAA4B,MAG1BC,GAAwB5T,aAAe,CAZnB,SAAC/N,GAAD,OAAuCA,EAAM6Z,QAAQjO,cAAcxM,UAAUY,EAAM6Z,QAAQ2G,iBAAiBxT,aAAe,IAY7EuT,KAA+B,SAACqB,EAAoB1gB,GAC/H,OAAO0gB,GAA0C,MAGxCC,GAAuB9T,aAAe,CAACyT,GAAYH,KAA0C,SAAC3V,EAAU0B,GACjH,IAAM6B,EAAS7B,EAAQa,MAAK,SAAA3P,GAAC,OAAIA,EAAEH,KAAOuN,KAC1C,OAAOuD,GAAkB,QAEhB6S,GAAwB/T,aAAe,CAACyT,GA1Bf,SAACxhB,GAAD,OAA0BA,EAAM6Z,QAAQjO,cAAcC,MAAMU,aA0BR,SAACb,EAAUa,GACjG,IAAM0P,EAAQ1P,EAAUb,GACxB,OAAOuQ,GAAgB,KAEd8F,GAAyChU,aAAe,CAACyT,GAAYN,KAAkC,SAACxV,EAAUM,GAC3H,IAAMgW,EAAYhW,EAAaN,GAC/B,OAAOsW,GAAwB,MAEtBC,GAA8ClU,aAAe,CAACyT,GAAYL,KAAuC,SAACzV,EAAUI,GACrI,IAAMoW,EAAepW,EAAkBJ,GACvC,OAAOwW,GAA8B,MAG5BC,GAAwBpU,aAAe,CAACyT,GAAYX,KAAwB,SAACzS,EAAWE,GACjG,IAAMC,EAAUD,EAASL,MAAK,SAAAO,GAAC,OAAIA,EAAErQ,KAAOiQ,KAC5C,OAAOG,GAAoB,QAElB6T,GAA4BrU,aAAe,CAACyT,GAAYX,KAAwB,SAACzS,EAAWE,GACrG,IAAMC,EAAUD,EAASL,MAAK,SAAAO,GAAC,OAAIA,EAAErQ,KAAOiQ,KAC5C,OAAOG,EAAUA,EAAQK,eAAiB,MAGjCyT,GAAsBtU,aAAe,CAACyT,GAAYV,KAAsB,SAACtV,EAAS6C,GAC3F,IAAMmO,EAAQnO,EAAOJ,MAAK,SAAAU,GAAC,OAAIA,EAAExQ,KAAOqN,KACxC,OAAOgR,GAAgB,QAEd8F,GAAgCvU,aAAe,CAACyT,GAAYV,GAAqBQ,KAAyC,SAAC5V,EAAU2C,EAAQkU,GACtJ,IAAM/F,EAAQnO,EAAOJ,MAAK,SAAAU,GAAC,OAAIA,EAAEG,UAAUzN,SAASqK,MACpD,OAAO8Q,EAAQ+F,EAAatU,MAAK,SAAAU,GAAC,OAAIA,EAAExQ,KAAOqe,EAAMre,MAAIyC,KAAO,MAEvD4hB,GAAuCzU,aAAe,CAACyT,GAAYJ,KAAiC,SAAC5V,EAASQ,GACvH,IAAMyW,EAAWzW,EAAaR,GAC9B,OAAOiX,GAAsB,MAG3BC,GAA2B3U,aAAe,CA3EjB,SAAC/N,GAAD,OAAiCA,EAAM6Z,QAAQjO,cAAcxM,WA2EnBmhB,KAA+B,SAACnhB,EAAWM,GAChH,OAAON,EAAUM,MAIRijB,GAAsB5U,aAAe,CAAC8S,GAAuBW,KAAa,SAAClT,EAAUsU,GAC9F,QAAOtU,EAASL,MAAK,SAAAO,GAAC,OAAIA,EAAErQ,GAAG0kB,gBAAkBD,EAAYC,oBAEpDC,GAAqB/U,aAAe,CAAC+S,GAAqBU,KAAa,SAACnT,EAAQ0U,GACzF,QAAO1U,EAAOJ,MAAK,SAAAU,GAAC,OAAIA,EAAExQ,GAAG0kB,gBAAkBE,EAAUF,oBAEhDG,GAAqBjV,aAAe,CA5Eb,SAAC/N,GAAD,OAA4BA,EAAM6Z,QAAQjO,cAAcwB,SA4EpBoU,KAAa,SAACpU,EAAS6V,GAC3F,QAAO7V,EAAQa,MAAK,SAAA3P,GAAC,OAAIA,EAAEH,GAAG0kB,gBAAkBI,EAAWJ,oBAGzDK,GAAqCnV,aAAe,CAAC2U,GAA0BlB,KAAa,SAAC2B,EAAS3X,GAExG,OADc2X,EAAQ7V,aAAaW,MAAK,SAAAU,GAAC,OAAIA,EAAExQ,KAAOqN,MACtC,QAEP4X,GAA+BrV,aAAe,CAACmV,KAAqC,SAAC1G,GAAD,OAAWA,EAAQA,EAAM5b,KAAO,MACpHyiB,GAAsCtV,aAAe,CAACmV,KAAqC,SAAC1G,GAAD,OAAWA,EAAQA,EAAMxP,YAAc,MAEzIsW,GAAqCvV,aAAe,CAAC2U,GAA0BlB,KAAa,SAAC2B,EAASI,GAExG,OADcJ,EAAQtW,OAAOoB,MAAK,SAAAC,GAAC,OAAIA,EAAE/P,KAAOolB,EAASplB,OACzC,QAEPqlB,GAA+BzV,aAAe,CAACuV,KAAqC,SAAC1V,GAAD,OAAWA,EAAQA,EAAMhN,KAAO,OACpH6iB,GAAsC1V,aAAe,CAACuV,KAAqC,SAAC1V,GAAD,OAAWA,EAAQA,EAAMZ,YAAc,OCiNzIvM,GAAe,CACjBmL,cAnTyB,CACzBO,SAAU,GACVe,OAAQ,GACRE,QAAS,GACTI,eAAgB,GAChBF,aAAc,GACdzB,MAAO,CACHQ,UAAW,EACXI,aAAc,GACdI,OAAQ,GACRuD,kBAAmB,GAGnBpE,aAAc,GAGdF,kBAAmB,GAGnBS,UAAW,IAIfnN,UAAW,CACPC,GAAI,CACAuB,KAAM,GACNoM,YAAa,GACbI,QAAS,GACTI,eAAgB,GAChBF,aAAc,GACdT,OAAQ,IAEZvN,GAAI,CACAsB,KAAM,GACNoM,YAAa,GACbI,QAAS,GACTI,eAAgB,GAChBF,aAAc,GACdT,OAAQ,IAEZtN,GAAI,CACAqB,KAAM,GACNoM,YAAa,GACbI,QAAS,GACTI,eAAgB,GAChBF,aAAc,GACdT,OAAQ,MAsQhB2T,gBAAiBrhB,EACjBoF,OAAQ,OACR0Q,MAAO,MAGEyO,GAAe/iB,YAAY,CACpCC,KAAM,UACNH,aAAa,6BACNA,IADK,IAERmL,cAAegP,GAAqB,YAAcna,GAAamL,gBAEnE/K,SAAU,CACN8iB,WAAY,SAAC3jB,EAAOe,GAChB,IAAMH,EAAOG,EAAOC,QAGpBhB,EAAM4L,cAAc4B,eAAe7I,KAAK,CACpCxG,GAAIyC,EAEJgO,eAAgB,KAIpB,IAAMgV,EAAa,CAAEzlB,GAAIyC,EAAMA,QAC/B,IAAK,IAAMM,KAAQlB,EAAM4L,cAAcxM,UAAW,CAC9BY,EAAM4L,cAAcxM,UAAU8B,GACrBsM,eAChB7I,KAAKif,KAatBC,wBAAyB,SAAC7jB,EAAOe,GAC7B,MAA+BA,EAAOC,QAA9BoN,EAAR,EAAQA,UAAW0V,EAAnB,EAAmBA,QAEbvV,EAAUvO,EAAM4L,cAAcxM,UAAUY,EAAMwgB,iBAAiBhT,eAAeS,MAAK,SAAAO,GAAC,OAAIA,EAAErQ,KAAOiQ,KACnGG,IACAA,EAAQ3N,KAAOkjB,GAAWvV,EAAQ3N,OAG1CmjB,cAAe,SAAC/jB,EAAOe,GACnB,IAAMqN,EAAYrN,EAAOC,QAMzB,IAAK,IAAME,KAHXlB,EAAM4L,cAAc4B,eAAiBxN,EAAM4L,cAAc4B,eAAekB,QAAO,SAAAF,GAAC,OAAIA,EAAErQ,KAAOiQ,KAG1EpO,EAAM4L,cAAcxM,UAAW,CAC9C,IAAM+jB,EAAUnjB,EAAM4L,cAAcxM,UAAU8B,GAC9CiiB,EAAQ3V,eAAiB2V,EAAQ3V,eAAekB,QAAO,SAAAF,GAAC,OAAIA,EAAErQ,KAAOiQ,OAG7E4V,eAAgB,SAAChkB,EAAOe,GACpB,MAAkFA,EAAOC,QAAjFoN,EAAR,EAAQA,UAAW5C,EAAnB,EAAmBA,QAAS5K,EAA5B,EAA4BA,KAAMoM,EAAlC,EAAkCA,YAAaiX,EAA/C,EAA+CA,WAAYC,EAA3D,EAA2DA,mBAE3DlkB,EAAM4L,cAAc0B,aAAa3I,KAAK,CAClCxG,GAAIqN,EAGJiF,SAAUwT,EACVE,YAAaD,EACbpV,UAAW,KAIf,IAAMsV,EAAW,CACbjmB,GAAIqN,EACJ5K,OACAoM,eAEJ,IAAK,IAAM9L,KAAQlB,EAAM4L,cAAcxM,UAAW,CAC9BY,EAAM4L,cAAcxM,UAAU8B,GACvBoM,aAChB3I,KAAKyf,GAehB,IAAM7V,EAAUvO,EAAM4L,cAAc4B,eAAeS,MAAK,SAAAO,GAAC,OAAIA,EAAErQ,KAAOiQ,KAClEG,GAASA,EAAQK,eAAejK,KAAK6G,IAE7C6Y,sBAAuB,SAACrkB,EAAOe,GAC3B,MAA6CA,EAAOC,QAA5CwK,EAAR,EAAQA,QAASsY,EAAjB,EAAiBA,QAASQ,EAA1B,EAA0BA,eAEpB9H,EAAQxc,EAAM4L,cAAcxM,UAAUY,EAAMwgB,iBAAiBlT,aAAaW,MAAK,SAAAU,GAAC,OAAIA,EAAExQ,KAAOqN,KAC/FgR,IACAA,EAAM5b,KAAOkjB,GAAWtH,EAAM5b,KAC9B4b,EAAMxP,YAAcsX,GAAkB9H,EAAMxP,cAGpDuX,qBAAsB,SAACvkB,EAAOe,GAC1B,MAAkCA,EAAOC,QAAjCwK,EAAR,EAAQA,QAASQ,EAAjB,EAAiBA,aAKjB,IAAK,IAAMwY,KAHXxkB,EAAM4L,cAAcC,MAAMuE,kBAAkB5E,GAAWQ,EAGrChM,EAAM4L,cAAcC,MAAMuE,kBACwB,IAA5DpQ,EAAM4L,cAAcC,MAAMuE,kBAAkBoU,GAAK1f,eAC1C9E,EAAM4L,cAAcC,MAAMuE,kBAAkBoU,IAI/DC,mBAAoB,SAACzkB,EAAOe,GACxB,MAA8BA,EAAOC,QAA7BwK,EAAR,EAAQA,QAASiF,EAAjB,EAAiBA,SAEX+L,EAAQxc,EAAM4L,cAAc0B,aAAaW,MAAK,SAAAU,GAAC,OAAIA,EAAExQ,KAAOqN,KAC9DgR,IAAOA,EAAM/L,SAAWA,IAEhCiU,sBAAuB,SAAC1kB,EAAOe,GAC3B,MAAiCA,EAAOC,QAAhCwK,EAAR,EAAQA,QAAS2Y,EAAjB,EAAiBA,YAEX3H,EAAQxc,EAAM4L,cAAc0B,aAAaW,MAAK,SAAAU,GAAC,OAAIA,EAAExQ,KAAOqN,KAC9DgR,IAAOA,EAAM2H,YAAcA,IAEnCQ,kBAAmB,SAAC3kB,EAAOe,GACvB,MAA+BA,EAAOC,QAA9BwK,EAAR,EAAQA,QAAS4C,EAAjB,EAAiBA,UASjB,IAAK,IAAMlN,KANPlB,EAAM4L,cAAcC,MAAMuE,kBAAkB5E,WAAiBxL,EAAM4L,cAAcC,MAAMuE,kBAAkB5E,GAG7GxL,EAAM4L,cAAc0B,aAAetN,EAAM4L,cAAc0B,aAAaoB,QAAO,SAAAC,GAAC,OAAIA,EAAExQ,KAAOqN,KAGtExL,EAAM4L,cAAcxM,UAAW,CAC9C,IAAM+jB,EAAUnjB,EAAM4L,cAAcxM,UAAU8B,GAC9CiiB,EAAQ7V,aAAe6V,EAAQ7V,aAAaoB,QAAO,SAAAC,GAAC,OAAIA,EAAExQ,KAAOqN,KAIrE,IAAM+C,EAAUvO,EAAM4L,cAAc4B,eAAeS,MAAK,SAAAO,GAAC,OAAIA,EAAErQ,KAAOiQ,KAClEG,IAASA,EAAQK,eAAiBL,EAAQK,eAAeF,QAAO,SAAAC,GAAC,OAAIA,IAAMnD,OAEnFoZ,UAAW,SAAC5kB,EAAOe,GACf,MAAwDA,EAAOC,QAAvDwK,EAAR,EAAQA,QAASE,EAAjB,EAAiBA,SAAU9K,EAA3B,EAA2BA,KAAMoM,EAAjC,EAAiCA,YAAaiP,EAA9C,EAA8CA,MAG9Cjc,EAAM4L,cAAcwB,QAAQzI,KAAK,CAC7BxG,GAAIuN,EAGJF,QAASA,IAIb,IAAMqZ,EAAY,CACd1mB,GAAIuN,EACJ9K,OACAoM,eAEJ,IAAK,IAAM9L,KAAQlB,EAAM4L,cAAcxM,UAAW,CAC9BY,EAAM4L,cAAcxM,UAAU8B,GACtBkM,QAChBzI,KAAKkgB,GAejB,IAAMrI,EAAQxc,EAAM4L,cAAc0B,aAAaW,MAAK,SAAAU,GAAC,OAAIA,EAAExQ,KAAOqN,KAC9DgR,GAAOA,EAAM1N,UAAUnK,KAAK+G,GAG5BuQ,IAAOjc,EAAM4L,cAAcC,MAAMU,UAAUb,GAAYuQ,IAE/D6I,uBAAwB,SAAC9kB,EAAOe,GAC5B,MAA8CA,EAAOC,QAA7C0K,EAAR,EAAQA,SAAUoY,EAAlB,EAAkBA,QAASQ,EAA3B,EAA2BA,eAErBrV,EAASjP,EAAM4L,cAAcxM,UAAUY,EAAMwgB,iBAAiBpT,QAAQa,MAAK,SAAA3P,GAAC,OAAIA,EAAEH,KAAOuN,KAC3FuD,IACAA,EAAOrO,KAAOkjB,GAAW7U,EAAOrO,KAChCqO,EAAOjC,YAAcsX,GAAkBrV,EAAOjC,cAGtD+X,eAAgB,SAAC/kB,EAAOe,GACpB,MAA4BA,EAAOC,QAA3B0K,EAAR,EAAQA,SAAUuQ,EAAlB,EAAkBA,MAElBjc,EAAM4L,cAAcC,MAAMU,UAAUb,GAAYuQ,GAEpD+I,sBAAuB,SAAChlB,EAAOe,GAC3B,MAAmCA,EAAOC,QAAlC0K,EAAR,EAAQA,SAAUM,EAAlB,EAAkBA,aAKlB,IAAK,IAAMiZ,KAHXjlB,EAAM4L,cAAcC,MAAMG,aAAaN,GAAYM,EAGjChM,EAAM4L,cAAcC,MAAMG,aACmB,IAAvDhM,EAAM4L,cAAcC,MAAMG,aAAaiZ,GAAKngB,eACrC9E,EAAM4L,cAAcC,MAAMG,aAAaiZ,IAI1DC,2BAA4B,SAACllB,EAAOe,GAChC,MAAwCA,EAAOC,QAAvC0K,EAAR,EAAQA,SAAUI,EAAlB,EAAkBA,kBAKlB,IAAK,IAAMmZ,KAHXjlB,EAAM4L,cAAcC,MAAMC,kBAAkBJ,GAAYI,EAGtC9L,EAAM4L,cAAcC,MAAMC,kBACwB,IAA5D9L,EAAM4L,cAAcC,MAAMC,kBAAkBmZ,GAAKngB,eAC1C9E,EAAM4L,cAAcC,MAAMC,kBAAkBmZ,IAI/DE,aAAc,SAACnlB,EAAOe,GAClB,MAA8BA,EAAOC,QAA7BwK,EAAR,EAAQA,QAASE,EAAjB,EAAiBA,SAGjB1L,EAAM4L,cAAcwB,QAAUpN,EAAM4L,cAAcwB,QAAQsB,QAAO,SAAApQ,GAAC,OAAIA,EAAEH,KAAOuN,KAG/E,IAAM8Q,EAAQxc,EAAM4L,cAAc0B,aAAaW,MAAK,SAAAU,GAAC,OAAIA,EAAExQ,KAAOqN,KAIlE,IAAK,IAAMtK,KAHPsb,IAAOA,EAAM1N,UAAY0N,EAAM1N,UAAUJ,QAAO,SAAApQ,GAAC,OAAIA,IAAMoN,MAG5C1L,EAAM4L,cAAcxM,UAAW,CAC9C,IAAM+jB,EAAUnjB,EAAM4L,cAAcxM,UAAU8B,GAC9CiiB,EAAQ/V,QAAU+V,EAAQ/V,QAAQsB,QAAO,SAAApQ,GAAC,OAAIA,EAAEH,KAAOuN,KAIvD1L,EAAM4L,cAAcC,MAAMG,aAAaN,WAAkB1L,EAAM4L,cAAcC,MAAMG,aAAaN,GAGhG1L,EAAM4L,cAAcC,MAAMC,kBAAkBJ,WAAkB1L,EAAM4L,cAAcC,MAAMC,kBAAkBJ,GAG1G1L,EAAM4L,cAAcC,MAAMU,UAAUb,WAAkB1L,EAAM4L,cAAcC,MAAMU,UAAUb,IAElG0Z,SAAU,SAACplB,EAAOe,GACd,MAA4CA,EAAOC,QAA3CgN,EAAR,EAAQA,UAAWZ,EAAnB,EAAmBA,QAASJ,EAA5B,EAA4BA,YAE5BhN,EAAM4L,cAAcC,MAAMgB,OAAOlI,KAAK,CAClCxG,GAAI6P,EACJZ,YAIJ,IAAMiY,EAAW,CACblnB,GAAI6P,EACJpN,KAAMoN,EACNhB,eAEJ,IAAK,IAAM9L,KAAQlB,EAAM4L,cAAcxM,UAAW,CAC9BY,EAAM4L,cAAcxM,UAAU8B,GACvB2L,OAChBlI,KAAK0gB,KAcpBC,sBAAuB,SAACtlB,EAAOe,GAC3B,MAA6CA,EAAOC,QAA5CukB,EAAR,EAAQA,QAASzB,EAAjB,EAAiBA,QAASQ,EAA1B,EAA0BA,eAEpB1W,EAAQ5N,EAAM4L,cAAcxM,UAAUY,EAAMwgB,iBAAiB3T,OAAOoB,MAAK,SAAAC,GAAC,OAAIA,EAAE/P,KAAOonB,KACzF3X,IACAA,EAAMhN,KAAOkjB,GAAWlW,EAAMhN,KAC9BgN,EAAMZ,YAAcsX,GAAkB1W,EAAMZ,cAGpDwY,gBAAiB,SAACxlB,EAAOe,GACrBf,EAAM4L,cAAcC,MAAMY,aAAe1L,EAAOC,SAEpDykB,gBAAiB,SAACzlB,EAAOe,GACrB,MAA6BA,EAAOC,QAA5BukB,EAAR,EAAQA,QAASnY,EAAjB,EAAiBA,QAEXQ,EAAQ5N,EAAM4L,cAAcC,MAAMgB,OAAOoB,MAAK,SAAAC,GAAC,OAAIA,EAAE/P,KAAOonB,KAC9D3X,IAAOA,EAAMR,QAAUA,IAE/BsY,YAAa,SAAC1lB,EAAOe,GACjB,IAAMwkB,EAAWxkB,EAAOC,QAMxB,IAAK,IAAME,KAHXlB,EAAM4L,cAAcC,MAAMgB,OAAS7M,EAAM4L,cAAcC,MAAMgB,OAAO6B,QAAO,SAAAR,GAAC,OAAIA,EAAE/P,KAAOonB,KAGtEvlB,EAAM4L,cAAcxM,UAAW,CAC9C,IAAM+jB,EAAUnjB,EAAM4L,cAAcxM,UAAU8B,GAC9CiiB,EAAQtW,OAASsW,EAAQtW,OAAO6B,QAAO,SAAAR,GAAC,OAAIA,EAAE/P,KAAOonB,OAG7DI,aAAc,SAAC3lB,EAAOe,GAClBf,EAAM4L,cAAcC,MAAMQ,UAAYtL,EAAOC,SAEjD4kB,eAAgB,SAAC5lB,EAAOe,GACpB,IAAMiM,EAAcjM,EAAOC,QAE3BhB,EAAM4L,cAAcxM,UAAUY,EAAMwgB,iBAAiBxT,YAAcA,GAEvE6Y,QAAS,SAAC7lB,EAAOe,GACb,IAAMH,EAAOG,EAAOC,QAEpBhB,EAAM4L,cAAcxM,UAAUY,EAAMwgB,iBAAiB5f,KAAOA,EACvDZ,EAAM4L,cAAcxM,UAAUD,GAAayB,OAE5CZ,EAAM4L,cAAcxM,UAAUD,GAAayB,KAAOA,IAG1DklB,oBAAqB,SAAC9lB,EAAOe,GACzB,IAAMglB,EAAchlB,EAAOC,QAE3BhB,EAAMwgB,gBAAkBuF,GAE5BC,WAAY,SAAChmB,EAAOe,GAChBf,EAAM4L,cAAgBnL,IAE1BqX,eAAgB,SAAC9X,GACbA,EAAMuE,OAAS,WAEnBwT,iBAAkB,SAAC/X,EAAOe,GACtBf,EAAMuE,OAAS,aAEnByT,cAAe,SAAChY,EAAOe,GACnBf,EAAMuE,OAAS,SACfvE,EAAMiV,MAAQlU,EAAOC,SAEzBilB,eAAgB,SAACjmB,EAAOe,GACpBf,EAAMuE,OAAS,OACfvE,EAAMiV,MAAQ,SAuDbiR,GAAoB,SAAC1a,EAAS4C,GAAV,OAAwB,SAACjN,EAAUmF,GAChE,IAAMkW,EAAQ6F,GAAoB/b,IAAYkF,GAE9C,GAAKgR,EAAL,CAMA,IAAMpP,ED/mBoC,SAACoP,GAAD,OAAsBA,EAAM1N,WAAa,GC+mBnEqX,CAA+B3J,GAC/CpP,EAAQyB,SAAQ,SAAAnD,GACZvK,EAASilB,GAAa5a,EAASE,OAInC,IAAM2C,EAAS+S,GAA+B9a,KAC9C,IAAK,IAAMke,KAAOnW,EAAQ,CACtB,IAAMrC,EAAeqC,EAAOmW,GAAK9V,QAAO,SAAAxQ,GAAG,OAAIA,IAAQsN,KACvDrK,EAASojB,GAAqB,CAAC/Y,QAASgZ,EAAKxY,kBAIjD7K,EAASwjB,GAAkB,CAACnZ,UAAS4C,oBAlBjCvO,QAAQC,IAAI,sDAAwD0L,KAiC/D4a,GAAe,SAAC5a,EAAS5K,GAAV,OAAmB,SAACO,EAAUmF,GAEvCya,GAAoBza,KAC5BuI,SAAQ,SAAAjB,GACX,IAAMyY,ED7oBqC,SAACzY,GAAD,OAAiBA,EAAMR,SAAW,GC6oB1DkZ,CAAoC1Y,GAAOc,QAAO,SAAAhD,GAAQ,OAAIA,IAAa9K,KAC9FO,EAASolB,GAAmB3Y,EAAMzP,GAAIkoB,OAI1C,IAAMhW,EAAkB6Q,GAAgC5a,KACxD,IAAK,IAAM2e,KAAO5U,EAAiB,CAC/B,IAAMrE,EAAeqE,EAAgB4U,GAAKvW,QAAO,SAAAxQ,GAAG,OAAIA,IAAQ0C,KAChEO,EAAS6jB,GAAsB,CAACtZ,SAAUuZ,EAAKjZ,kBAInD,IAAMwa,EAAuBrF,GAAqC7a,KAClE,IAAK,IAAM2e,KAAOuB,EAAsB,CACpC,IAAM1a,EAAoB0a,EAAqBvB,GAAKvW,QAAO,SAAAxQ,GAAG,OAAIA,IAAQ0C,KAC1EO,EAAS+jB,GAA2B,CAACxZ,SAAUuZ,EAAKnZ,uBAGxD3K,EAASgkB,GAAa,CAAC3Z,UAASE,SAAU9K,OAajC2lB,GAAqB,SAAChB,EAASnY,GAAV,OAAsB,SAACjM,GACrDA,EAASskB,GAAgB,CACrBF,UACAnY,eAuBD,GAQHsW,GAAajiB,QAPbkiB,GADG,GACHA,WAAYE,GADT,GACSA,wBAAyBE,GADlC,GACkCA,cACrCC,GAFG,GAEHA,eAAgBK,GAFb,GAEaA,sBAAuBE,GAFpC,GAEoCA,qBAAsBE,GAF1D,GAE0DA,mBAAoBC,GAF9E,GAE8EA,sBAAuBC,GAFrG,GAEqGA,kBACxGC,GAHG,GAGHA,UAAWE,GAHR,GAGQA,uBAAwBC,GAHhC,GAGgCA,eAAgBC,GAHhD,GAGgDA,sBAAuBE,GAHvE,GAGuEA,2BAA4BC,GAHnG,GAGmGA,aACtGC,GAJG,GAIHA,SAAUE,GAJP,GAIOA,sBAAuBE,GAJ9B,GAI8BA,gBAAiBC,GAJ/C,GAI+CA,gBAAiBC,GAJhE,GAIgEA,YACnEC,GALG,GAKHA,aAAcC,GALX,GAKWA,eAAgBC,GAL3B,GAK2BA,QAASC,GALpC,GAKoCA,oBACvCE,GANG,GAMHA,WACAlO,GAPG,GAOHA,eAAgBC,GAPb,GAOaA,iBAAkBC,GAP/B,GAO+BA,cAAeiO,GAP9C,GAO8CA,eAGtCvC,MAAf,Q,UC/tBA,IAMMhiB,GAAqB,CACvBmkB,QAASA,GACTD,eAAgBA,GAChBa,SAAUd,IAEChkB,gBAXS,SAAC3B,GAAD,MAAY,CAChCY,KAAM6gB,GAAezhB,GACrBgN,YAAa2U,GAAsB3hB,GACnCqM,UAAW4U,GAAuBjhB,GAClCN,SAAUK,EAAeC,MASzB0B,GAFWC,EAnGf,YAAiH,IAA9Ef,EAA6E,EAA7EA,KAAMoM,EAAuE,EAAvEA,YAAaX,EAA0D,EAA1DA,UAAWwZ,EAA+C,EAA/CA,QAASD,EAAsC,EAAtCA,eAAgBa,EAAsB,EAAtBA,SAAU/mB,EAAY,EAAZA,SAEhG,EAAoCkI,oBAAS,GAA7C,mBAAO8e,EAAP,KAAmBC,EAAnB,KACA,EAAkC/e,mBAAShH,GAA3C,mBAAOgmB,EAAP,KAAkBC,EAAlB,KACA,EAAgDjf,mBAASoF,GAAzD,mBAAO8Z,EAAP,KAAyBC,EAAzB,KA+BA,OA7BA9e,qBAAU,WAGN4e,EAAajmB,KACd,CAACA,EAAMimB,IAEV5e,qBAAU,WACN8e,EAAoB/Z,KACrB,CAACA,EAAa6Z,IAsBb,eAAC7c,EAAA,EAAD,CAAMyO,MAAI,EAACxO,WAAS,EAAC+c,OAAQ,EAA7B,UACI,cAAChd,EAAA,EAAD,CAAMyO,MAAI,EAAV,SACI,cAAC/P,EAAA,EAAD,CAAY1G,QAAQ,KAApB,SAA0BxC,EAAU,oBAAqBE,OAG7D,eAACsK,EAAA,EAAD,CAAMyO,MAAI,EAACxO,WAAS,EAACgd,WAAY,EAAGC,cAAe,EAAnD,UACI,cAACld,EAAA,EAAD,CAAMyO,MAAI,EAAC0O,GAAI,GAAIzO,GAAI,EAAGC,GAAI,EAA9B,SACI,cAAC5D,GAAA,EAAD,CACI9S,WAAS,EACTM,MAAO/C,EAAU,oBAAqBE,GACtCsC,QAAQ,WACRK,MAAOukB,EACPpkB,SAAU,SAACjE,GAAD,OAAOsoB,EAAatoB,EAAEmE,OAAOL,QACvC+kB,OAjCpB,SAA2B3kB,GACnBmkB,GAAWf,EAAQe,QAoCf,cAAC5c,EAAA,EAAD,CAAMyO,MAAI,EAAC0O,GAAI,GAAIzd,SAAU,EAAGgP,GAAI,EAAGC,GAAI,EAA3C,SACI,cAAC5D,GAAA,EAAD,CACI9S,WAAS,EACTM,MAAO/C,EAAU,YAAaE,GAC9BsC,QAAQ,WACRQ,SAlCpB,SAAgCC,GAC5B,IAAMwZ,EAAQoL,OAAO5kB,EAAMC,OAAOL,OAE9B4Z,GAAmB,IAAVA,GACT0K,GAAc,GACdF,EAASxK,IAET0K,GAAc,IA4BF1R,MAAOyR,EACPY,aAAcjb,EACdpH,KAAK,SACLsiB,WAAY,CACRC,WAAY,CACRC,IAAK,GAETC,eAAgB,cAACC,GAAA,EAAD,CAAgB7d,SAAS,QAAzB,yBAK5B,cAACE,EAAA,EAAD,CAAMyO,MAAI,EAAC/O,SAAU,EAArB,SACI,cAACqL,GAAA,EAAD,CACI9S,WAAS,EACTM,MAAO/C,EAAU,cAAeE,GAChCsC,QAAQ,WACRK,MAAOykB,EACPtkB,SAAU,SAACjE,GAAD,OAAOwoB,EAAoBxoB,EAAEmE,OAAOL,QAC9C+kB,OA1DpB,SAAkC3kB,GAC1BqkB,GAAkBlB,EAAekB,IA0DrBc,WAAS,EACTC,QAAS,e,UChDjC,IAGMnmB,GAAqB,CACvBuF,gBAAiBb,IAENzE,gBANS,SAAC3B,GAAD,MAAY,KAQhC0B,GAFWC,EAxCf,YAA6H,IAAvGoH,EAAsG,EAAtGA,MAAsG,IAA/F+e,oBAA+F,MAAhF,GAAgF,MAA5EC,gBAA4E,MAAjE,GAAiE,MAA7DC,kBAA6D,SAAzCC,EAAyC,EAAzCA,qBAAsBhhB,EAAmB,EAAnBA,gBAErG,SAASihB,IACL,IAAMtiB,EAAO,CACT6S,KAAM,CAAC7X,KAAMknB,GAAgB,YAAazlB,MAAO0lB,IAErD9gB,EAAgB,GAAD,OAAI8B,GAASnD,GAAM,SAACA,GAC/BqiB,EAAqBriB,EAAK6S,KAAKpW,UAoBvC,OACI,mCACK2lB,EAhBD,cAACjhB,EAAA,EAAD,CAAQC,QAASkhB,EAAjB,mBAAkCnf,KAMlC,cAACD,EAAA,EAAD,CAASC,MAAOA,EAAhB,SACI,cAACC,EAAA,EAAD,CAAYnH,GAAI,CAACkc,QAAS,UAAW/W,QAASkhB,EAA9C,SACI,cAACjK,GAAA,EAAD,aCuFpB,IAOMvc,GAAqB,CACvBgkB,eACAJ,yBACAG,gBAAiBc,GACjB4B,kBAAmBhd,IAERxJ,gBAbS,SAAC3B,EAAO4R,GAAR,MAAsB,CAC1ChR,KAAM4iB,GAA6BxjB,EAAO4R,EAAShE,OACnDZ,YAAayW,GAAoCzjB,EAAO4R,EAAShE,OACjEwa,WAAY/G,GAAwCrhB,GACpDsiB,8BAA+B,SAAC5W,GAAD,OAAc4W,GAA8BtiB,EAAO0L,IAClFhM,SAAUK,EAAeC,MAUzB0B,GAFWC,EApHf,YAA2K,IAA1JiM,EAAyJ,EAAzJA,MAAOhN,EAAkJ,EAAlJA,KAAMoM,EAA4I,EAA5IA,YAAaob,EAA+H,EAA/HA,WAAY9F,EAAmH,EAAnHA,8BAA+BoD,EAAoF,EAApFA,YAAaJ,EAAuE,EAAvEA,sBAAuBG,EAAgD,EAAhDA,gBAAiB0C,EAA+B,EAA/BA,kBAAmBzoB,EAAY,EAAZA,SAElJ0N,EAAYQ,EAAZR,QACFmY,EAAU3X,EAAMzP,GAmBtB,OACI,eAAC6L,EAAA,EAAD,CAAMC,WAAS,EAAf,UAEI,eAACD,EAAA,EAAD,CACIyO,MAAI,EAAC0O,GAAI,GAAIzO,GAAI,GAAIG,GAAI,EAD7B,UAGI,eAAC7O,EAAA,EAAD,CAAMyO,MAAI,EAACxO,WAAS,EAACqJ,WAAW,SAAhC,UACI,cAAC5K,EAAA,EAAD,CAAY1G,QAAQ,QAApB,SACKpB,IAGL,cAAC,GAAD,CACImI,MAAK,UAAKvJ,EAAU,gBAAiBE,IACjCooB,aAActoB,EAAU,YAAaE,GACrCqoB,SAAUnnB,EACdqnB,qBAAsB,SAACtI,GAAc2F,EAAsB,CAACC,UAASzB,QAASnE,UAItF,cAAC3V,EAAA,EAAD,CAAMyO,MAAI,EAACxO,WAAS,EAACqJ,WAAW,SAAhC,SACI,eAAC5K,EAAA,EAAD,CAAY1G,QAAQ,QAApB,UACKgL,EACD,cAAC,GAAD,CACIjE,MAAK,UAAKvJ,EAAU,uBAAwBE,IAC5CooB,aAActoB,EAAU,mBAAoBE,GAC5CqoB,SAAU/a,EACVib,qBAAsB,SAACtI,GAAc2F,EAAsB,CAACC,UAASjB,eAAgB3E,eASrG,cAAC3V,EAAA,EAAD,CACIyO,MAAI,EAACxO,WAAS,EAACkd,GAAI,GAAIzO,GAAI,EAAGG,GAAI,EAClCjO,eAAgB,CAACuc,GAAI,SAAUzO,GAAI,YAFvC,SAMI,cAAC5P,EAAA,EAAD,CAASC,MAAK,UAAKvJ,EAAU,SAAUE,GAAzB,aAAuCkB,EAAvC,KAAd,SACI,cAACoI,EAAA,EAAD,CAAYhC,QA3D5B,WACImhB,EAAkB,GAAD,OAAI3oB,EAAU,0BAA2BE,GAAzC,cAAwDkB,EAAxD,MAAkE,GAAI,MAAM,WACzF8kB,EAAYH,OAyDJ,SACI,cAACrH,GAAA,EAAD,UAMZ,cAAClU,EAAA,EAAD,CACIyO,MAAI,EAACxO,WAAS,EAACkd,GAAI,GAAItO,GAAI,EAC3BjO,eAAgB,CAACuc,GAAI,SAAUtO,GAAI,YAFvC,SAII,eAAC9W,EAAA,EAAD,CAAaF,GAAI,CAAEqM,EAAG,EAAGgJ,MAAO,KAAhC,UACI,cAAChV,EAAA,EAAD,CAAY/D,GAAE,wBAAmByC,GAAjC,SAA0CpB,EAAU,UAAWE,KAC/D,cAACyC,EAAA,EAAD,CACIC,QAAQ,gBACRimB,UAAQ,EACRhmB,MAAO+K,EACP5K,SAtEpB,SAA6BC,GACzB,IACcJ,EACVI,EADAC,OAAUL,MAIRgkB,EAA8B,kBAAVhkB,EAAqBA,EAAMimB,MAAM,KAAOjmB,EAElEojB,EAAgB7kB,EAAMylB,IA+DNkC,MAAO,cAACC,GAAA,EAAD,CAAejmB,MAAO/C,EAAU,UAAWE,KAClD+oB,YAAa,SAACC,GAEN,OADwBN,EAAW1Z,QAAO,SAAApQ,GAAC,OAAIoqB,EAAYrnB,SAAS/C,EAAEH,OAC/CH,KAAI,SAAAM,GAAC,OAAIA,EAAEsC,QAAM4a,KAAK,OARzD,SAYK4M,EAAWpqB,KAAI,SAACiR,GAAD,OACZ,eAACtM,EAAA,EAAD,CAA0BN,MAAO4M,EAAO9Q,GAAxC,UACI,cAAC0W,GAAA,EAAD,CAAUC,QAAS1H,EAAQub,QAAQ1Z,EAAO9Q,KAAO,IACjD,cAACyqB,GAAA,EAAD,CAAcC,QAAO,UAAK5Z,EAAOrO,KAAZ,aAAqB0hB,EAA8BrT,EAAO9Q,IAA1D,SAFV8Q,EAAO9Q,oBCpBlD,IAKMuD,GAAqB,CACvBonB,YJ0rBuB,SAAC9a,EAAWhB,GAAZ,IAAyBI,EAAzB,uDAAmC,GAAnC,OAA0C,SAACjM,GAClEA,EAASikB,GAAS,CACdpX,YACAZ,UACAJ,mBI7rBJwY,gBJgsB8B,SAACxX,GAAD,OAAe,SAAC7M,GAC9CA,EAASqkB,GAAgBxX,MIhsBzB/G,gBAAiBb,IAENzE,gBAVS,SAAC3B,GAAD,MAAY,CAChC6M,OAAQkU,GAAoB/gB,GAC5B+oB,qBAAsB/H,GAA0BhhB,GAChDN,SAAUK,EAAeC,MASzB0B,GAFWC,EA/Ef,YAAmH,IAA1FkL,EAAyF,EAAzFA,OAAQkc,EAAiF,EAAjFA,qBAAsBvD,EAA2D,EAA3DA,gBAAiBsD,EAA0C,EAA1CA,YAAa7hB,EAA6B,EAA7BA,gBAAiBvH,EAAY,EAAZA,SAwBlG,OACI,eAACkC,EAAA,EAAD,CAAKsV,MAAM,OAAX,UACI,eAAClN,EAAA,EAAD,CAAMC,WAAS,EAACW,eAAe,gBAA/B,UAEI,cAAClC,EAAA,EAAD,CAAY1G,QAAQ,KAApB,SAA0BxC,EAAU,SAAUE,KAE9C,cAACkC,EAAA,EAAD,CAAKC,GAAI,CAAEC,SAAU,KAArB,SACI,eAACC,EAAA,EAAD,CAAaC,QAAQ,WACjBC,WAAS,EADb,UAGI,cAACC,EAAA,EAAD,CAAY/D,GAAG,6BAAf,SAA6CqB,EAAU,eAAgBE,KACvE,cAACyC,EAAA,EAAD,CACIC,QAAQ,6BACRC,MAAO0mB,EACPzmB,WAAS,EACTC,MAAM,gBACNC,SApBxB,SAA+BC,GAC3B+iB,EAAgB/iB,EAAMC,OAAOL,QAcb,SAOKwK,EAAO7O,KAAI,SAAC4P,EAAO2G,GAAR,OACR,cAAC5R,EAAA,EAAD,CAAsBN,MAAOuL,EAAMzP,GAAnC,SAAwCyP,EAAMzP,IAA/BoW,gBAOnC,eAACvK,EAAA,EAAD,CAAMC,WAAS,EAACU,IAAK,EAAGgS,UAAW,EAAGzS,UAAU,SAASU,eAAe,SAAS0I,WAAW,SAA5F,UAEKzG,EAAO7O,KAAI,SAAC4P,EAAO2G,GAAR,OACR,cAAC,GAAD,CAAmB3G,MAAOA,EAAOob,WAAYpb,EAAMzP,KAAO4qB,GAA9CxU,MAGhB,cAAC3S,EAAA,EAAD,UACI,cAACkH,EAAA,EAAD,CAASC,MAAM,YAAf,SACI,cAACC,EAAA,EAAD,CAAYhC,QAxDhC,WACI,IAAM+B,EAAQvJ,EAAU,WAAYE,GAE9BkG,EAAO,CACToI,UAAW,CAACpN,KAAMpB,EAAU,YAAaE,GAAW2C,MAAO,IAC3D4mB,UAAW,CAACroB,KAAMpB,EAAU,mBAAoBE,GAAW2C,MAAO,KAGtE4E,EAAgB8B,EAAOnD,GAAM,SAACA,GAE1B,IAAMhF,EAAOgF,EAAKoI,UAAU3L,MACtB2K,EAAcpH,EAAKqjB,UAAU5mB,MAEnCymB,EAAYloB,EAAMoM,OA2CN,SACI,cAACkc,GAAA,EAAD,mBCmD5B,IAAMC,GAAc,SAACpgB,EAAOqgB,EAAehB,EAAY9F,EAA+B+G,GAAlE,OAChB,qCACI,cAACnnB,EAAA,EAAD,CAAY/D,GAAE,wBAAmB4K,GAAjC,SAA2CA,IAC3C,cAAC5G,EAAA,EAAD,CACIC,QAAO,wBAAmB2G,GAC1Bsf,UAAQ,EACRhmB,MAAO+mB,EACP5mB,SAAU6mB,EACVd,MAAO,cAACC,GAAA,EAAD,CAAejmB,MAAOwG,IAC7B0f,YAAa,SAACC,GAEN,OADwBN,EAAW1Z,QAAO,SAAApQ,GAAC,OAAIoqB,EAAYrnB,SAAS/C,EAAEH,OAC/CH,KAAI,SAAAM,GAAC,OAAIA,EAAEsC,QAAM4a,KAAK,OARzD,SAYK4M,EAAWpqB,KAAI,SAACiR,GACb,OACI,eAACtM,EAAA,EAAD,CAA0BN,MAAO4M,EAAO9Q,GAAxC,UACI,cAAC0W,GAAA,EAAD,CAAUC,QAASsU,EAAcT,QAAQ1Z,EAAO9Q,KAAO,IACvD,cAACyqB,GAAA,EAAD,CAAcC,QAAO,UAAK5Z,EAAOrO,KAAZ,aAAqB0hB,EAA8BrT,EAAO9Q,IAA1D,SAFV8Q,EAAO9Q,aAmBpCuD,GAAqB,CACvB4nB,OAAQlD,GACRpB,yBACAE,8BACAH,kBACAD,0BACAqD,kBAAmBhd,IAERxJ,gBAjBS,SAAC3B,EAAO4R,GAAR,MAAsB,CAC1C3C,OAAQ4S,GAAqB7hB,EAAO4R,EAASlG,UAC7C6d,YAAazH,GAAsB9hB,EAAO4R,EAASlG,UACnD0c,WAAY/G,GAAwCrhB,GACpDwpB,kBAAmBzH,GAAuC/hB,EAAO4R,EAASlG,UAC1E+d,wBAAyBxH,GAA4CjiB,EAAO4R,EAASlG,UACrF4W,8BAA+B,SAAC5W,GAAD,OAAc4W,GAA8BtiB,EAAO0L,IAClFhM,SAAUK,EAAeC,MAYzB0B,GAFWC,EA1Jf,YAAyR,IAAhQ+J,EAA+P,EAA/PA,SAAU8Q,EAAqP,EAArPA,MAAOvN,EAA8O,EAA9OA,OAAQsa,EAAsO,EAAtOA,YAAanB,EAAyN,EAAzNA,WAAYoB,EAA6M,EAA7MA,kBAAmBC,EAA0L,EAA1LA,wBAAyBnH,EAAiK,EAAjKA,8BAA+B5iB,EAAkI,EAAlIA,SAAU4pB,EAAwH,EAAxHA,OAAQvE,EAAgH,EAAhHA,eAAgBC,EAAgG,EAAhGA,sBAAuBE,EAAyE,EAAzEA,2BAA4BJ,EAA6C,EAA7CA,uBAAwBqD,EAAqB,EAArBA,kBAEvPvnB,EAAsBqO,EAAtBrO,KAAMoM,EAAgBiC,EAAhBjC,YAEd,EAAoCpF,oBAAS,GAA7C,mBAAO8e,EAAP,KAAmBC,EAAnB,KAQM+C,EAAuB,SAACjnB,GAC1B,IACcJ,EACVI,EADAC,OAAUL,MAId,MAAwB,kBAAVA,EAAqBA,EAAMimB,MAAM,KAAOjmB,GA4B1D,OACI,eAAC2H,EAAA,EAAD,CAAMC,WAAS,EAACsO,WAAY,EAAGoR,YAAa,EAAGrJ,cAAe,EAA9D,UACI,cAACtW,EAAA,EAAD,CAAMyO,MAAI,EAACvB,MAAM,OAAjB,SACI,eAAC,KAAD,CAAK6G,QAAQ,OAAOnT,eAAe,gBAAnC,UAEI,eAAC,KAAD,WACI,eAAClC,EAAA,EAAD,CAAY1G,QAAQ,QAApB,UACKpB,EACD,cAAC,GAAD,CACImI,MAAK,UAAKvJ,EAAU,iBAAkBE,IACtCooB,aAActoB,EAAU,aAAcE,GACtCqoB,SAAUnnB,EACVqnB,qBAAsB,SAACtI,GAAcmF,EAAuB,CAACpZ,WAAUoY,QAASnE,UAGxF,eAACjX,EAAA,EAAD,CAAY1G,QAAQ,QAApB,UACKgL,EACD,cAAC,GAAD,CACIjE,MAAK,UAAKvJ,EAAU,wBAAyBE,IAC7CooB,aAActoB,EAAU,oBAAqBE,GAC7CqoB,SAAU/a,EACVib,qBAAsB,SAACtI,GAAcmF,EAAuB,CAACpZ,WAAU4Y,eAAgB3E,aAMnG,cAAC7W,EAAA,EAAD,CAASC,MAAK,UAAKvJ,EAAU,SAAUE,GAAzB,aAAuCkB,EAAvC,KAAd,SACI,cAACoI,EAAA,EAAD,CAAYhC,QApEhC,WACImhB,EAAkB,GAAD,OAAI3oB,EAAU,4BAA6BE,GAA3C,cAA0DkB,EAA1D,MAAoE,GAAI,MAAM,WAC3F0oB,EAAO9M,EAAMre,GAAIuN,OAkEL,SACI,cAACwS,GAAA,EAAD,aAMhB,eAAClU,EAAA,EAAD,CAAMyO,MAAI,EAACxO,WAAS,EAACW,eAAe,SAApC,UACI,cAAC7I,EAAA,EAAD,CAAaF,GAAI,CAAEqM,EAAG,EAAGgJ,MAAO,KAAhC,SACI,cAACnC,GAAA,EAAD,CACI9S,WAAS,EACTM,MAAO/C,EAAU,cAAeE,GAChCsC,QAAQ,WACRQ,SAlEpB,SAA4BC,GACxB,IAAMwZ,EAAQoL,OAAO5kB,EAAMC,OAAOL,OAG9B4Z,EAAQ,EACR0K,GAAc,IAIlBA,GAAc,GACd5B,EAAe,CAACrZ,WAAUuQ,YAyDVhH,MAAOyR,EACPY,aAAciC,EACdtkB,KAAK,SACLsiB,WAAY,CACRC,WAAY,CACRC,IAAK,GAETC,eAAgB,cAACC,GAAA,EAAD,CAAgB7d,SAAS,QAAzB,yBAI5B,cAAC/H,EAAA,EAAD,CAAaF,GAAI,CAAEqM,EAAG,EAAGgJ,MAAO,KAAhC,SACKiS,GAAY3pB,EAAU,eAAgBE,GAAW8pB,EAAmBpB,EAAW1Z,QAAO,SAAApQ,GAAC,OAAIA,EAAEH,KAAOuN,KAAW4W,GAlEhI,SAA+B7f,GAC3B,IAAMmnB,EAAkBF,EAAqBjnB,GAE7CuiB,EAAsB,CAACtZ,WAAUM,aAAc4d,SAiEvC,cAAC7nB,EAAA,EAAD,CAAaF,GAAI,CAAEqM,EAAG,EAAGgJ,MAAO,KAAhC,SACKiS,GAAY3pB,EAAU,oBAAqBE,GAAW+pB,EAAyBrB,EAAW1Z,QAAO,SAAApQ,GAAC,OAAIA,EAAEH,KAAOuN,KAAW4W,GA/D3I,SAAoC7f,GAChC,IAAMonB,EAAaH,EAAqBjnB,GAExCyiB,EAA2B,CAACxZ,WAAUI,kBAAmB+d,kBCwEjE,IAAMC,GAAgB,SAAC/gB,EAAO+L,EAASiV,GACnC,OACI,cAAChoB,EAAA,EAAD,CAAaF,GAAI,CAAEqM,EAAG,EAAGgJ,MAAO,KAAhC,SACI,cAACxC,GAAA,EAAD,CACInS,MAAOwG,EACP4L,eAAe,MACfC,QACI,cAACC,GAAA,EAAD,CACIC,QAASA,EACTtS,SAAU,SAACC,GACPsnB,EAAStnB,WAS/B0mB,GAAc,SAACpgB,EAAOga,EAAWiH,EAAcC,EAAWZ,GAA5C,OAChB,eAACtnB,EAAA,EAAD,CAAaF,GAAI,CAAEqM,EAAG,EAAGgJ,MAAO,KAAhC,UACI,cAAChV,EAAA,EAAD,CAAY/D,GAAE,UAAK4K,EAAL,YAAcga,GAA5B,SAA0Cha,IAC1C,cAAC5G,EAAA,EAAD,CACIC,QAAO,UAAK2G,EAAL,YAAcga,GACrBsF,UAAQ,EACRhmB,MAAO2nB,EACPxnB,SAAU6mB,EACVd,MAAO,cAACC,GAAA,EAAD,CAAejmB,MAAOwG,IAC7B0f,YAAa,SAACC,GAEN,OADuBuB,EAAUvb,QAAO,SAAAC,GAAC,OAAI+Z,EAAYrnB,SAASsN,EAAExQ,OAC9CH,KAAI,SAAA2Q,GAAC,OAAIA,EAAE/N,QAAM4a,KAAK,OARxD,SAYKyO,EAAUjsB,KAAI,SAACwe,GAAD,OACX,eAAC7Z,EAAA,EAAD,CAAyBN,MAAOma,EAAMre,GAAtC,UACI,cAAC0W,GAAA,EAAD,CAAUC,QAASkV,EAAarB,QAAQnM,EAAMre,KAAO,IACrD,cAACyqB,GAAA,EAAD,CAAcC,QAASrM,EAAM5b,SAFlB4b,EAAMre,aAiB/BuD,GAAqB,CACvBwoB,aNwjBwB,SAAC1e,EAAS5K,EAAMoM,GAAhB,IAA6BiP,EAA7B,uDAAqC,EAArC,OAA2C,SAAC9a,EAAUmF,GAC9E,IAAMoF,EAAW,UAAG9K,EAAH,YAAW4K,GAAU2e,QAAQ,IAAK,KAInD,OADqBnH,GAAmB1c,IAAYoF,KAKpDvK,EAASyjB,GAAU,CAACpZ,UAASE,WAAU9K,OAAMoM,cAAaiP,YACnD,KMjkBPsI,wBACAE,sBACAC,yBACAL,yBACA+F,YAAalE,GACbjf,gBAAiBb,GACjB+hB,kBAAmBhd,GACnBpG,cAEWpD,gBAlBS,SAAC3B,EAAO4R,GAAR,MAAsB,CAC1ChR,KAAMwiB,GAA6BpjB,EAAO4R,EAAS4K,MAAMre,IACzD6O,YAAaqW,GAAoCrjB,EAAO4R,EAAS4K,MAAMre,IACvE8rB,UAAW3I,GAAuCthB,GAClDoQ,kBAAmBoS,GAAqCxiB,EAAO4R,EAAS4K,MAAMre,IAC9EuB,SAAUK,EAAeC,MAezB0B,GAFWC,EA/Kf,YAAuQ,IAAjP6a,EAAgP,EAAhPA,MAAO5b,EAAyO,EAAzOA,KAAMoM,EAAmO,EAAnOA,YAAaoB,EAAsN,EAAtNA,UAAW6b,EAA2M,EAA3MA,UAAW7Z,EAAgM,EAAhMA,kBAAmB8Z,EAA6K,EAA7KA,aAAc3F,EAA+J,EAA/JA,qBAAsBE,EAAyI,EAAzIA,mBAAoBC,EAAqH,EAArHA,sBAAuBL,EAA8F,EAA9FA,sBAAuB+F,EAAuE,EAAvEA,YAAanjB,EAA0D,EAA1DA,gBAAiBkhB,EAAyC,EAAzCA,kBAAmBpjB,EAAsB,EAAtBA,UAAWrF,EAAW,EAAXA,SAE/OvB,EAAyCqe,EAAzCre,GAAI2Q,EAAqC0N,EAArC1N,UAAW2B,EAA0B+L,EAA1B/L,SAAU0T,EAAgB3H,EAAhB2H,YAuCjC,OACI,eAACviB,EAAA,EAAD,CAAKgI,aAAc,EAAGc,QAAS,EAAG7I,GAAI,CAACwoB,OAAQ,mBAA/C,UACI,eAACzoB,EAAA,EAAD,CAAKmc,QAAS,OAAQuM,SAAS,OAAO1f,eAAgB,gBAAiB0I,WAAY,SAAnF,UACI,eAAC1R,EAAA,EAAD,WACI,eAAC8G,EAAA,EAAD,CAAY1G,QAAQ,KAApB,UACKpB,EACD,cAAC,GAAD,CACImI,MAAK,UAAKvJ,EAAU,gBAAiBE,IACrCooB,aAActoB,EAAU,YAAaE,GACrCqoB,SAAUnnB,EACVqnB,qBAAsB,SAACtI,GAAc0E,EAAsB,CAAC7Y,QAASrN,EAAI2lB,QAASnE,UAG1F,eAACjX,EAAA,EAAD,CAAY1G,QAAQ,YAApB,UACKgL,EACD,cAAC,GAAD,CACIjE,MAAK,UAAKvJ,EAAU,uBAAwBE,IAC5CooB,aAActoB,EAAU,mBAAoBE,GAC5CqoB,SAAU/a,EACVib,qBAAsB,SAACtI,GAAc0E,EAAsB,CAAC7Y,QAASrN,EAAImmB,eAAgB3E,aAKrG,eAAC/d,EAAA,EAAD,WACI,cAACkH,EAAA,EAAD,CAASC,MAAOvJ,EAAU,YAAaE,GAAvC,SACI,cAACsJ,EAAA,EAAD,CAAYhC,QA/DhC,WACI,IAAMpB,EAAO,CACTqd,WAAY,CAACriB,KAAMpB,EAAU,aAAcE,GAAW2C,MAAO,IAC7DkoB,kBAAmB,CAAC3pB,KAAMpB,EAAU,oBAAqBE,GAAW2C,MAAO,KAE/E4E,EAAgBzH,EAAU,YAAaE,GAAWkG,GAAM,SAACA,GACrCskB,EAAa/rB,EAAIyH,EAAKqd,WAAW5gB,MAAOuD,EAAK2kB,kBAAkBloB,QAE3E0C,EAAU,yBAA0BT,QAuD5B,SACI,cAAC4kB,GAAA,EAAD,QAGR,cAACpgB,EAAA,EAAD,CAASC,MAAK,UAAKvJ,EAAU,SAAUE,GAAzB,aAAuCkB,EAAvC,KAAd,SACI,cAACoI,EAAA,EAAD,CAAYhC,QAvDhC,WACImhB,EAAkB,GAAD,OAAI3oB,EAAU,0BAA2BE,GAAzC,aAAuDkB,EAAvD,KAAgE,GAAI,MAAM,WACvFwpB,EAAYjsB,EAAIiQ,OAqDJ,SACI,cAAC8P,GAAA,EAAD,cAMhB,eAAClU,EAAA,EAAD,CAAMyO,MAAI,EAACxO,WAAS,EAACW,eAAe,SAApC,UACI,cAACZ,EAAA,EAAD,CACIyO,MAAI,EAACxO,WAAS,EAACW,eAAe,SAC9Buc,GAAI,GAAItO,GAAI,EAFhB,SAIKsQ,GAAY3pB,EAAU,eAAgBE,GAAWkB,EAAMwP,EAAmB6Z,EAAUvb,QAAO,SAAAC,GAAC,OAAIA,EAAExQ,KAAOA,MA7D1H,SAAoCsE,GAChC,IACcJ,EACVI,EADAC,OAAUL,MAIR2J,EAAgC,kBAAV3J,EAAqBA,EAAMimB,MAAM,KAAOjmB,EACpEkiB,EAAqB,CAAC/Y,QAASrN,EAAI6N,aAAcA,SAwDzC,cAAChC,EAAA,EAAD,CACIyO,MAAI,EAACxO,WAAS,EAACW,eAAe,SAC9Buc,GAAI,GAAItO,GAAI,EAFhB,SAIKiR,GAActqB,EAAU,WAAYE,GAAW+Q,GAAU,SAAClS,GAxDvEkmB,EAAmB,CAACjZ,QAASrN,EAAIsS,UAAWA,SA0DpC,cAACzG,EAAA,EAAD,CACIyO,MAAI,EAACxO,WAAS,EAACW,eAAe,SAC9Buc,GAAI,GAAItO,GAAI,EAFhB,SAIKiR,GAActqB,EAAU,cAAeE,IAAYykB,GAAa,SAAC5lB,GA1D9EmmB,EAAsB,CAAClZ,QAASrN,EAAIgmB,aAAcA,YA8D9C,cAACviB,EAAA,EAAD,UACKkN,EAAU9Q,KAAI,SAAA0N,GAAQ,OACnB,gCACI,cAACgR,GAAA,EAAD,CAAS1a,QAAQ,WACjB,cAAC,GAAD,CAA8Bwa,MAAOA,EAAO9Q,SAAUA,GAAlCA,KAFdA,c,gCClG9B,SAAS6S,GAASC,GACd,IAAQC,EAAqCD,EAArCC,SAAUpc,EAA2Bmc,EAA3Bnc,MAAOkS,EAAoBiK,EAApBjK,MAAUmK,EAAnC,aAA6CF,EAA7C,IAEA,OACI,+CACIG,KAAK,WACLC,OAAQvc,IAAUkS,EAClBpW,GAAE,0BAAqBoW,GACvB,uCAA+BA,IAC3BmK,GALR,aAOKrc,IAAUkS,GACX,cAAC,KAAD,CAAK1S,GAAI,CAAEgd,EAAG,GAAd,SACKJ,OAoBjB,SAAS+L,GAAT,GAA4C,IAApB/L,EAAmB,EAAnBA,SAAU1V,EAAS,EAATA,MAC9B,OAAO,cAACD,EAAA,EAAD,CAASC,MAAOA,EAAO0V,SAAUA,IAkH5C,IAMM/c,GAAqB,CACvBuF,gBAAiBb,GACjB+hB,kBAAmBhd,GACnBsf,cP0fyB,SAAC7H,GAAD,OAAiB,SAACzhB,EAAUmF,GAGrD,OADsBqc,GAAoBrc,IAAYsc,KAKtDzhB,EAASwiB,GAAWf,KACb,KOjgBPiB,2BACA6G,cPkgByB,SAACtc,GAAD,OAAe,SAACjN,EAAUmF,GACnD,IAAMiI,EAAU4T,GAAsB7b,IAAY8H,GAElD,GAAKG,EAAL,CAMA,IAAMF,ED/kBqC,SAACE,GAAD,OAAqBA,EAAQK,gBAAkB,GC+kB3E+b,CAAgCpc,GAC/CF,EAAOQ,SAAQ,SAAArD,GACXrK,EAAS+kB,GAAkB1a,OAI/BrK,EAAS4iB,GAAc3V,SAXnBvO,QAAQC,IAAI,0DAA4DsO,KOrgB5Ewc,YPmhBuB,SAACxc,EAAWxN,EAAMoM,EAAaiX,EAAYC,GAA3C,OAAkE,SAAC/iB,EAAUmF,GAEpG,IAAMkF,EAAU5K,EAAKupB,QAAQ,IAAK,KAIlC,OADoBrH,GAAmBxc,IAAYkF,KAKnDrK,EAAS6iB,GAAe,CAAC5V,YAAW5C,UAAS5K,OAAMoM,cAAaiX,aAAYC,yBACrE,KO7hBPnf,cAEWpD,gBAfS,SAAC3B,GAAD,MAAY,CAChCsO,SAAUiT,GAAyCvhB,GACnD6qB,yBAA0B,SAACzc,GAAD,OAAegU,GAA0BpiB,EAAOoO,IAC1Ed,aAAcwT,GAAoB9gB,GAClCN,SAAUK,EAAeC,MAazB0B,GAFWC,EA9Hf,YAAyM,IAAlL2M,EAAiL,EAAjLA,SAAUuc,EAAuK,EAAvKA,yBAA0Bvd,EAA6I,EAA7IA,aAAcrG,EAA+H,EAA/HA,gBAAiBkhB,EAA8G,EAA9GA,kBAAmBsC,EAA2F,EAA3FA,cAAeG,EAA4E,EAA5EA,YAAa/G,EAA+D,EAA/DA,wBAAyB6G,EAAsC,EAAtCA,cAAe3lB,EAAuB,EAAvBA,UAAWrF,EAAY,EAAZA,SAExL,EAA0BkI,mBAAS,GAAnC,mBAAOvF,EAAP,KAAcid,EAAd,KAyCMwL,EAAsB,SAAC1c,EAAWwU,GACpC,OACI,eAAC,KAAD,WACI,cAAC7b,EAAA,EAAD,CAAQC,QAAS,kBAnBN,SAACoH,GACpB,IAAMxI,EAAO,CACTmd,UAAW,CAACniB,KAAMpB,EAAU,YAAaE,GAAW2C,MAAO,IAC3D0oB,iBAAkB,CAACnqB,KAAMpB,EAAU,mBAAoBE,GAAW2C,MAAO,IACzE2oB,gBAAiB,CAACpqB,KAAMpB,EAAU,WAAYE,GAAW2C,OAAO,EAAOoS,YAAY,GACnFwW,mBAAoB,CAACrqB,KAAMpB,EAAU,cAAeE,GAAW2C,OAAO,EAAMoS,YAAY,IAE5FxN,EAAgBzH,EAAU,WAAYE,GAAWkG,GAAM,SAACA,GACpD,IAAMse,GAAsBte,EAAKqlB,mBAAmB5oB,MACpCuoB,EAAYxc,EAAWxI,EAAKmd,UAAU1gB,MAAOuD,EAAKmlB,iBAAiB1oB,MAAOuD,EAAKolB,gBAAgB3oB,MAAO6hB,IAElHnf,EAAU,wBAAyBT,OAQZ4mB,CAAe9c,IAAtC,SAAmD5O,EAAU,iBAAkBE,KAC/E,cAAC,GAAD,CACIqJ,MAAK,UAAKvJ,EAAU,kBAAmBE,IACvCooB,aAActoB,EAAU,cAAeE,GACvCqoB,SAAUnF,EACVqF,qBAAsB,SAACtI,GAAckE,EAAwB,CAACzV,YAAW0V,QAASnE,KAClFqI,YAAY,IAEhB,cAACjhB,EAAA,EAAD,CAAQC,QAAS,kBAlCD,SAACoH,EAAWxN,GACpCunB,EAAkB,GAAD,OAAI3oB,EAAU,4BAA6BE,GAA3C,aAAyDkB,EAAzD,KAAkE,GAAI,MAAM,WACzF8pB,EAActc,GACdkR,EAAS,MA+BkB6L,CAAoB/c,EAAWwU,IAAtD,SAAqEpjB,EAAU,gBAAiBE,SAK5G,OACI,eAAC,KAAD,CAAKmC,GAAI,CAAEqV,MAAO,QAAlB,UACI,cAACxO,EAAA,EAAD,CAAY1G,QAAQ,KAApB,SAA0BxC,EAAU,UAAWE,KAE/C,cAAC,KAAD,CAAKmC,GAAI,CAAEupB,aAAc,EAAGC,YAAa,WAAzC,SACI,eAAC7L,GAAA,EAAD,CACInd,MAAOA,EACPod,cAAc,OACdC,0BAAwB,EACxB1d,QAAQ,aACRQ,SAjEK,SAACC,EAAOkd,GACzBL,EAASK,IAiEG,aAAW,cANf,UAQKrR,EAAStQ,KAAI,SAACuQ,EAASgG,GAAV,OACV,cAACqL,GAAA,EAAD,cAAsBrd,MAAOgM,EAAQ3N,KAAM0qB,SAAO,GArF1E,SAAmB/W,GACf,MAAO,CACHpW,GAAG,cAAD,OAAgBoW,GAClB,gBAAgB,mBAAhB,OAAoCA,IAkFmCgX,CAAUhX,IAAvDhG,EAAQpQ,OAGtB,cAACqsB,GAAD,CAAczhB,MAAOvJ,EAAU,aAAcE,GAA7C,SACI,cAACsJ,EAAA,EAAD,CAAYhC,QAAS,kBArEhB,WACrB,IAAMpB,EAAO,CACTgd,YAAa,CAAChiB,KAAMpB,EAAU,cAAeE,GAAW2C,MAAO,KAEnE4E,EAAgBzH,EAAU,aAAcE,GAAWkG,GAAM,SAACA,GACtC6kB,EAAc7kB,EAAKgd,YAAYvgB,QAE3C0C,EAAU,0BAA2BT,OA8DFknB,IAA3B,SACI,cAACtC,GAAA,EAAD,aAMf5a,EAAStQ,KAAI,SAACuQ,EAASgG,GAAV,OACV,cAAC,GAAD,CAA2BlS,MAAOA,EAAOkS,MAAOA,EAAhD,SACI,eAACqI,GAAA,EAAD,CAAO6O,UAAW,IAAKC,GAAI,GAA3B,UACKZ,EAAoBvc,EAAQpQ,GAAIoQ,EAAQ3N,MAExC0M,EACIoB,QAAO,SAAA8N,GAAK,OAAIqO,EAAyBtc,EAAQpQ,IAAIkD,SAASmb,EAAMre,OACpEH,KAAI,SAACwe,EAAOjI,GAAR,OACD,cAACoX,GAAD,CAAmCnP,MAAOA,EAAOpO,UAAWG,EAAQpQ,IAA3Cqe,EAAMre,WAPhCoQ,EAAQpQ,aCKvC,IAOMuD,GAAqB,CACvBqD,aACAojB,kBAAmBhd,GACnB2a,uBACA8F,qBRygBgC,kBAAM,SAACzqB,EAAUmF,GACjDqU,GAAoB8F,GAA2Bna,KAAa,aQzgB5DulB,ORooBoC,2DAAM,WAAO1qB,EAAUmF,GAAjB,gBAAApB,EAAA,sDAC1C/D,EAAS2W,MAELlM,EAAgB6U,GAA2Bna,KAE/CqU,GAAoBla,GAAc,WAElCyY,GAAkBtN,GACjBnF,MAAK,SAAAC,GACFvF,EAAS4W,GAAiBrR,OAE7BC,OAAM,SAAAsO,GACH9T,EAAS6W,GAAc/C,OAZe,2CAAN,yDQnoBpCyE,MAAOsM,GACPC,eAAgBA,IAGLtkB,gBAjBS,SAAC3B,GAAD,MAAY,CAChCyH,QAAS1E,EAAc/C,GACvBuE,OAAQmc,GAAoB1gB,GAC5BiV,MAAO0L,GAAmB3gB,GAC1B8rB,cAAelL,GAA2B5gB,GAC1CN,SAAUK,EAAeC,MAaR0B,GADNC,EAnJf,YAAgM,IAA5J8F,EAA2J,EAA3JA,QAASlD,EAAkJ,EAAlJA,OAAQ0Q,EAA0I,EAA1IA,MAAO6W,EAAmI,EAAnIA,cAAe/mB,EAAoH,EAApHA,UAAWojB,EAAyG,EAAzGA,kBAAmBrC,EAAsF,EAAtFA,oBAAqB8F,EAAiE,EAAjEA,qBAAsBC,EAA2C,EAA3CA,OAAQnS,EAAmC,EAAnCA,MAAOuM,EAA4B,EAA5BA,eAAgBvmB,EAAY,EAAZA,SAKzKgI,EAAWC,cAoEjB,OAjEAM,qBAAU,WACS,cAAX1D,IACA0hB,IACAlhB,EAAU,4CAA6CT,IACvDoD,EAAS,QAEd,CAACnD,EAAQmD,EAAUue,EAAgBlhB,IAGtCkD,qBAAU,WACFgN,IACAgR,IACApmB,QAAQC,IAAI,SAAUmV,GACtBlQ,EAAU,UAAD,OAAWkQ,GAAS3Q,OAElC,CAAC2Q,EAAOgR,EAAgBlhB,IAG3BkD,qBAAU,WACDR,GACDC,EAAS,OAEd,CAACD,EAASC,IAIbO,qBAAU,WAGN,IAAI8jB,EAAsBC,aAAY,WAClCnsB,QAAQC,IAAI,qBACZ8rB,MApCiB,KAwCrB,OAAO,WAAOK,cAAcF,MAC7B,CAACH,IA8BA,8BACI,eAAC5hB,EAAA,EAAD,CAAMC,WAAS,EAACW,eAAe,WAA/B,UAEI,cAACZ,EAAA,EAAD,CAAMyO,MAAI,EAAC5W,GAAI,CAAC6H,SAAU,GAA1B,SACI,cAAChB,EAAA,EAAD,CAAY1G,QAAQ,KAApB,SAA0BxC,EAAU,yBAA0BE,OAIlE,eAACsK,EAAA,EAAD,CAAMyO,MAAI,EAACsF,QAAQ,OAAOzK,WAAW,SAASzR,GAAI,CAAC0W,WAAY,EAAG2T,YAAa,YAA/E,UAEI,eAACnqB,EAAA,EAAD,CAAaF,GAAI,CAACqV,MAAO,KAAzB,UACI,cAAChV,EAAA,EAAD,CAAY/D,GAAG,0BAAf,4BACA,cAACgE,EAAA,EAAD,CACIC,QAAQ,0BACRC,MAAOypB,EACPxpB,WAAS,EACTE,SAhCU,SAACC,GAC/B,IAAM0pB,EAAU1pB,EAAMC,OAAOL,MAC7ByjB,EAAoBqG,IA+BA5D,MAAO,cAACC,GAAA,EAAD,CAAejmB,MAAM,mBALhC,SAOK5D,OAAOD,KAAKK,GAAef,KAAI,SAACkD,EAAMqT,GAAP,OAC5B,cAAC5R,EAAA,EAAD,CAAUd,GAAI,CAACqV,MAAO,KAAkB7U,MAAOtD,EAAcmC,GAA7D,SACI,cAAC0nB,GAAA,EAAD,CAAcC,QAAS3nB,KADMqT,WAO7C,cAACzL,EAAA,EAAD,CAASC,MAAOvJ,EAAU,cAAeE,GAAzC,SACI,cAACsJ,EAAA,EAAD,CACIhH,QAAQ,YACRgF,QA1DI,WACxBmhB,EAAkB3oB,EAAU,sBAAuBE,GAAW,GAAI,MAAM,WACpEmsB,QAsDY,SAII,cAACO,GAAA,EAAD,QAIR,cAACtjB,EAAA,EAAD,CAASC,MAAOvJ,EAAU,aAAcE,GAAxC,SACI,cAACsJ,EAAA,EAAD,CACIhH,QAAQ,YACRgF,QA7DG,WACvBmhB,EAAkB3oB,EAAU,yBAA0BE,GAAW,GAAI,MAAM,WACvEga,QAyDY,SAII,cAACwE,GAAA,EAAD,WAMZ,cAAClU,EAAA,EAAD,CAAMyO,MAAI,EAACxO,WAAS,IAxDxB,eAACD,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAU,SAASS,IAAK,EAAxC,UACI,cAAC,GAAD,IACA,cAAC0hB,GAAD,IACA,cAAC,GAAD,e,gFCrEhB,IAWe1qB,gBAXS,SAAC3B,EAAO4R,GAC5B,IAAM3C,EAASF,GAAU/O,EAAO4R,EAASlG,UAEzC,MAAO,CACH9K,KAAMqO,EAAOrO,KACboM,YAAaiC,EAAOjC,eAGD,GAGZrL,EArBf,YAAiD,IAAtBf,EAAqB,EAArBA,KAAMoM,EAAe,EAAfA,YAE7B,OACI,cAAC4b,GAAA,EAAD,CACIC,QAASjoB,EACT0rB,UAAWtf,OCgBvB,IAOerL,gBAPS,SAAC3B,EAAO4R,GAAR,MAAsB,CAC1CwW,WAAYja,GAAoBnO,EAAO4R,EAASxD,cAEzB,GAIZzM,EA3Bf,YAA6D,IAAhCymB,EAA+B,EAA/BA,WAAY1a,EAAmB,EAAnBA,gBAErC,OAAKA,GAAoB0a,EAQrB,mCACKA,EAAW1Z,QAAO,SAAApQ,GAAC,OAAIoP,EAAgBrM,SAAS/C,MAAIN,KAAI,SAAA0N,GAAQ,OAC7D,cAAC6gB,GAAA,EAAD,CAAU1qB,GAAI,CAACye,cAAe,EAAG/H,WAAY,GAA7C,SACI,cAAC,GAAD,CAAiB7M,SAAUA,KADuBA,SAT9D7L,QAAQC,IAAI4N,GAER,iCCgEZ,IAIMhM,GAAqB,CACvB8qB,YAAazS,IAEFpY,gBAPS,SAAC3B,GAAD,MAAY,CAChC0N,gBAAiBD,GAAsBzN,GACvCsO,SAAUf,GAAqBvN,MAO/B0B,GAFWC,EA3Ef,YAAoH,IAA7FiM,EAA4F,EAA5FA,MAA4F,IAArFob,kBAAqF,aAAjEyD,gBAAiE,SAA/C/e,EAA+C,EAA/CA,gBAAiB8e,EAA8B,EAA9BA,YAA8B,IAAjBle,gBAAiB,MAAN,GAAM,EAG1GV,GAAUob,IAAY1a,EAAW,IAEtC,IAAM1N,EAAOgN,EAAQD,GAA0BC,GAAS,SAClDZ,EAAcY,E/BgCwB,SAAAA,GAAK,OAAOA,EAAMZ,aAAe,G+BhCjD0f,CAAiC9e,GAAS,GAChER,EAAUQ,EAAQC,GAA6BD,GAAUob,EAAatb,EAAkB,GAE9F,EAA0B9F,oBAAS,GAAnC,mBAAO+kB,EAAP,KAAcC,EAAd,KAEMvC,EAASrB,EAAa,iBAAmB2D,EAAQ,iBAAmB,kBAS1E,SAASE,EAAYC,GACjBF,EAASE,GAIb,OACI,cAACC,GAAA,EAAD,CACIlrB,GAAI,CAACqV,MAAO,OAAQ8V,OAAQ,QAC5BC,aAAc,kBAAMJ,GAAY,IAChCK,YAAa,kBAAML,GAAY,IAC/B7lB,QAhBR,WACSylB,GACDD,EAAY5rB,IAUhB,SAMI,eAAC,KAAD,CAAK8J,QAAS,EAAG7I,GAAI,CAAEqV,MAAO,OAAQmT,OAAQA,GAA9C,UAEI,eAAC,KAAD,CAAK2C,OAAO,OAAZ,UACI,cAACtkB,EAAA,EAAD,CAAY1G,QAAQ,KAApB,SACKpB,IAEL,cAAC8H,EAAA,EAAD,CAAY1G,QAAQ,QAApB,SACKgL,OAIT,cAACmgB,GAAA,EAAD,CACIC,OAAO,EACPvrB,GAAI,CACAiI,SAAU,WACVlB,SAAU,OACVykB,UAAW,IACX,OAAQ,CAAE3iB,QAAS,IAEvB4iB,UAAW,uBARf,SAUKhf,EAAStQ,KAAI,SAAAuQ,GAAO,OACjB,6BACI,+BACI,cAACgf,GAAA,EAAD,UAAgBhf,EAAQ3N,OACxB,cAAC,GAAD,CAAmBwN,UAAWG,EAAQpQ,GAAIuP,gBAAiBN,QAH1DmB,EAAQpQ,iBCKzC,IAOewD,gBAPS,SAAC3B,GAAD,MAAY,CAChC6M,OAAQD,GAAa5M,GACrB2M,cAAeD,GAAoB1M,MAEZ,GAGZ2B,EAlEf,YAAmD,IAA1BkL,EAAyB,EAAzBA,OAAQF,EAAiB,EAAjBA,cAEvB6gB,EAAYC,cAAc,SAACC,GAAD,OAAWA,EAAMC,YAAYC,GAAG,SA4ChE,OACI,eAAChsB,EAAA,EAAD,CAAKgI,aAAc,EAAnB,UACI,cAAClB,EAAA,EAAD,CAAY1G,QAAQ,KAApB,oBAECwrB,EA5CD,eAACxjB,EAAA,EAAD,CAAMC,WAAS,EAACqO,QAAS,EAAGhF,WAAW,aAAvC,UAEKzG,EAAO7O,KAAI,SAAC4P,EAAO2G,GAAR,OACR,cAACvK,EAAA,EAAD,CAAMyO,MAAI,EAAa0O,GAAI,GAAIzO,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAjD,SACI,cAAC,GAAD,CAAahL,MAAOA,EAAOob,WAAYpb,EAAMhN,OAAS+L,KAD1C4H,MAKpB,cAACvK,EAAA,EAAD,CAAMyO,MAAI,EAAC0O,GAAI,GAAIzO,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAArC,SACI,cAAC,GAAD,CAAahL,MAAO,KAAMob,YAAarc,EAAe8f,UAAU,SASxE,cAAC7qB,EAAA,EAAD,CAAKC,GAAI,CAACgsB,UAAW,UAArB,SACI,eAACjR,GAAA,EAAD,CACI1S,UAAW,CAACid,GAAI,MAAOxO,GAAI,UAC3B/N,eAAe,eACf0I,WAAW,SACX4D,MAAK,UAAyB,IAAnBrK,EAAO/H,OAAS,GAAtB,MAJT,UAMK+H,EAAO7O,KAAI,SAAC4P,EAAO2G,GAAR,OACR,cAAC3S,EAAA,EAAD,CAAiBsV,MAAM,OAAvB,SACI,cAAC,GAAD,CAAatJ,MAAOA,EAAOob,WAAYpb,EAAMhN,OAAS+L,KADhD4H,MAKd,cAAC3S,EAAA,EAAD,CAAKsV,MAAM,OAAX,SACI,cAAC,GAAD,CAAatJ,MAAO,KAAMob,YAAarc,EAAe8f,UAAU,iB,iBCDxF,IAsBM/qB,GAAqB,CACvBosB,cpB8GyB,SAAC3vB,GAAD,OAAQ,SAACgD,EAAUmF,GAqBxC4I,GAAoB5I,IAAYnI,GAEhCgD,EAASua,GAAyBvd,IAGlCgD,EAAS0Z,GAAuB1c,OoBtIzBwD,gBAzBS,SAAC3B,EAAO4R,GAC5B,IAAMmc,EAAkB/d,GAAsBhQ,EAAO4R,EAASlG,UAC1DsiB,GAAe,EACfC,EAAiB,GACjBC,EAAqB,GAQzB,OANIH,IACAC,GAAe,EACfC,EAAiBF,EAAgB,GACjCG,EAAqBH,EAAgB,GAAG/vB,KAAI,SAAA0N,GAAQ,OAAIsD,GAAchP,EAAO0L,OAG1E,CACHuD,OAAQF,GAAU/O,EAAO4R,EAASlG,UAClC+G,SAAUvD,GAAoBlP,EAAO4R,EAASlG,UAC9CuQ,MAAOnL,GAAe9Q,EAAO4R,EAASlG,UACtCyiB,WAAYH,EACZC,iBACAC,qBACAxuB,SAAUK,EAAeC,MAQ7B0B,GAFWC,EA5Df,YAAiI,IAA/G+J,EAA8G,EAA9GA,SAAUoiB,EAAoG,EAApGA,cAAe7e,EAAqF,EAArFA,OAAQwD,EAA6E,EAA7EA,SAAUwJ,EAAmE,EAAnEA,MAAOkS,EAA4D,EAA5DA,WAAYF,EAAgD,EAAhDA,eAAgBC,EAAgC,EAAhCA,mBAAoBxuB,EAAY,EAAZA,SAE1G+sB,GAAY0B,EAMlB,OACI,cAACrlB,EAAA,EAAD,CACIC,MAAO0jB,EAAQ,UAAMjtB,EAAUyuB,EAAgBvuB,GAAhC,aAA8CwuB,EAAmB1S,KAAK,OAAU,GAC/F4S,UAAU,MACVC,oBAAqBC,KACrBC,OAAK,EACLC,gBAAiB,IALrB,SAOI,cAAC,KAAD,UAEA,cAACznB,EAAA,EAAD,CAAQ0nB,MAAO,CAACvX,MAAO,OAAQ8V,OAAQ,QAAShrB,QAASyQ,EAAW,YAAc,WAAYga,SAAUA,EAAUzlB,QAd1H,WACI8mB,EAAcpiB,IAaV,SACI,eAAC,KAAD,CAAK0U,UAAU,SAAf,UACI,cAAC1X,EAAA,EAAD,CAAY1G,QAAQ,KAApB,SAA0BiN,EAAOrO,OACjC,cAAC8H,EAAA,EAAD,CAAY1G,QAAQ,QAApB,SAA6BiN,EAAOjC,cACnCiP,EACG,eAACvT,EAAA,EAAD,CAAY1G,QAAQ,QAApB,UAA6BxC,EAAU,QAASE,GAAhD,KAA6Duc,EAA7D,YAEA,yC,UC9BT,SAASyS,GAAT,GAA4C,IAAhB5V,EAAe,EAAfA,aACvC,OACI,cAAChQ,EAAA,EAAD,CACIC,MAAO+P,EACPsV,UAAU,MACVG,OAAK,EACLC,gBAAiB,IAJrB,SAMI,cAACG,GAAA,EAAD,M,OCgCZ,IAWehtB,gBAXS,SAAC3B,EAAO4R,GAC5B,IAAMgd,EAAape,GAAgBxQ,EAAO4R,EAAS4K,MAAMre,IAGzD,MAAO,CACH0wB,QAH2B,OAAfD,EAIZA,aACAlvB,SAAUK,EAAeC,MAGN,GACZ2B,EA5Cf,YAA8D,IAAxC6a,EAAuC,EAAvCA,MAAOqS,EAAgC,EAAhCA,QAASD,EAAuB,EAAvBA,WAAYlvB,EAAW,EAAXA,SACtCkB,EAAiC4b,EAAjC5b,KAAMoM,EAA2BwP,EAA3BxP,YAAa8B,EAAc0N,EAAd1N,UAY3B,OACI,eAAClN,EAAA,EAAD,CAAKwe,UAAU,cAAcxW,aAAc,EAAGc,QAAS,EAAvD,UACI,eAAC9I,EAAA,EAAD,CAAKwe,UAAU,mBAAmBrC,QAAS,OAAQnT,eAAgB,gBAAiB0I,WAAY,SAAhG,UACI,cAAC5K,EAAA,EAAD,CAAY1G,QAAQ,KAApB,SACKpB,IAbRiuB,OAKD,EAHI,cAACH,GAAD,CAAmB5V,aAActZ,EAAUovB,EAAYlvB,QAe3D,cAACgJ,EAAA,EAAD,CAAY1G,QAAQ,YAApB,SAAiCgL,IACjC,cAACpL,EAAA,EAAD,CAAKwe,UAAU,kBAAf,SAEQtR,EAAU9Q,KAAI,SAAA0N,GAAQ,OAClB,cAAC,GAAD,CAAuBA,SAAUA,GAApBA,c,gCC3BrC,SAAS6S,GAASC,GACd,IAAQC,EAAqCD,EAArCC,SAAUpc,EAA2Bmc,EAA3Bnc,MAAOkS,EAAoBiK,EAApBjK,MAAUmK,EAAnC,aAA6CF,EAA7C,IAEA,OACI,+CACIG,KAAK,WACLC,OAAQvc,IAAUkS,EAClBpW,GAAE,0BAAqBoW,GACvB,uCAA+BA,IAC3BmK,GALR,aAOKrc,IAAUkS,GACX,cAAC,KAAD,CAAK1S,GAAI,CAAEgd,EAAG,GAAd,SACKJ,OAmBF,SAASqQ,KAEpB,IAAOljB,EAAiBmjB,aAAY,SAAA/uB,GAAK,OAAIA,EAAM4L,iBAA5CA,cAEP,EAA0BhE,mBAAS,GAAnC,mBAAOvF,EAAP,KAAcid,EAAd,KAMA,OACI,eAAC,KAAD,CAAKzd,GAAI,CAAEqV,MAAO,QAAlB,UACI,cAAC,KAAD,CAAKrV,GAAI,CAAEupB,aAAc,EAAGC,YAAa,WAAzC,SACI,cAAC7L,GAAA,EAAD,CACInd,MAAOA,EACPod,cAAc,OACdC,0BAAwB,EACxB1d,QAAQ,aACRQ,SAZK,SAACC,EAAOkd,GACzBL,EAASK,IAYG,aAAW,cANf,SAYK/T,EAAc4B,eAAexP,KAAI,SAACuQ,EAASgG,GAAV,OAC9B,cAACqL,GAAA,EAAD,cAAsBrd,MAAOgM,EAAQ3N,KAAM0qB,SAAO,GAjC1E,SAAmB/W,GACf,MAAO,CACHpW,GAAG,cAAD,OAAgBoW,GAClB,gBAAgB,mBAAhB,OAAoCA,IA8BmCgX,CAAUhX,IAAvDhG,EAAQpQ,WAI7ByN,EAAc4B,eAAexP,KAAI,SAACuQ,EAASgG,GAAV,OAC9B,cAAC,GAAD,CAA2BlS,MAAOA,EAAOkS,MAAOA,EAAhD,SACK3I,EAAc0B,aACVoB,QAAO,SAAA8N,GAAK,OAAIjO,EAAQK,eAAevN,SAASmb,EAAMre,OACtDH,KAAI,SAACwe,EAAOjI,GAAR,OACD,cAAC,GAAD,CAA4BiI,MAAOA,GAAjBA,EAAMre,QAJrBoQ,EAAQpQ,U,OCgJvC,IAWMuD,GAAqB,CACvBstB,YxBjEoC,kBAAM,SAAC7tB,EAAUmF,GACrD,IAGI,IAAMmG,EAAeD,GAAmBlG,KACxCnF,EAAS4Y,GAAStN,IACpB,SACE5M,QAAQC,IAAI,8CwB2DhBod,YAAa/R,GACblE,gBAAiBb,GACjBG,gBAAiBA,GACjBxB,UAAWA,IAEApD,gBAlBS,SAAC3B,GAAD,MAAY,CAChCivB,kBAAmBniB,GAAwB9M,GAC3CkvB,yBAA0BniB,GAA+B/M,GACzDmvB,oBAAqBliB,GAA0BjN,GAC/Coc,gBAAiBlQ,GAAsBlM,GACvC0N,gBAAiBD,GAAsBzN,GACvCic,MAAOlL,GAAgB/Q,GACvB4N,MAAOlB,GAAoB1M,GAC3BN,SAAUK,EAAeC,GACzBwH,WAAY5E,EAAsB5C,MAWlC0B,GAFWC,EAhMf,YAAqP,IAA7N6F,EAA4N,EAA5NA,WAAYynB,EAAgN,EAAhNA,kBAAmBC,EAA6L,EAA7LA,yBAA0BC,EAAmK,EAAnKA,oBAAqB/S,EAA8I,EAA9IA,gBAAiB1O,EAA6H,EAA7HA,gBAAiBuO,EAA4G,EAA5GA,MAAOrO,EAAqG,EAArGA,MAAOwhB,EAA8F,EAA9FA,UAAWJ,EAAmF,EAAnFA,YAAa9R,EAAsE,EAAtEA,YAAajW,EAAyD,EAAzDA,gBAAiBV,EAAwC,EAAxCA,gBAAiBxB,EAAuB,EAAvBA,UAAWrF,EAAY,EAAZA,SAE9NgI,EAAWC,cAEjB,SAAS0nB,IACL,GAAK7nB,EAAL,CAKA,IAAM5B,EAAO,CACTqpB,kBAAmB,CAACruB,KAAMpB,EAAU,oBAAqBE,GAAW2C,MAAO,KAEzE0G,EAAQvJ,EAAU,oBAAqBE,GAE7CuH,EAAgB8B,EAAOnD,GAAM,SAACA,GAC1B,IAAMqpB,EAAoBrpB,EAAKqpB,kBAAkB5sB,O/CtDrB,SAAC+Z,EAAiBxb,EAAM8M,GAG5D,OAAO,IAAI3J,SAAQ,SAACnF,EAASoF,GACzB,IAAM4B,EAAO,CACT0X,UAAW1c,EACXwM,QAASM,GAEbxN,IAAMkZ,KAAN,UAAcnZ,EAAd,mCAAgDmc,GAAmBxW,GAClEa,MAAK,SAAAC,GACF9H,EAAQ8H,EAAId,SAEfe,OAAM,SAAAC,GACH5C,EAAO,wC+C2CPsrB,CAAyBlT,EAAiB6S,EAAmBvhB,GAC5DjH,MAAK,SAAAC,GACF3B,EAAU,GAAD,OAAIvF,EAAU,qBAAsBE,GAApC,aAAkDuvB,EAAlD,KAAwE3qB,IACjFzE,QAAQC,IAAI4G,MAEfC,OAAM,SAAAC,GACH7B,EAAU,UAAD,OAAW6B,GAAOtC,IAC3BzE,QAAQC,IAAI8G,cAnBhBL,IAwBR,SAASgpB,IACLrS,EAAY1d,EAAU,2BAA4BE,GAAW,GAAI,MAAM,WACnEsvB,OAIR,SAASQ,IACAhoB,EAML0V,EAAY,GAAI,GAAI,cAAC,GAAD,CAASd,gBAAiBA,EAAiB1O,gBAAiBA,KAA6B,YAKjH,WACI,IAAM9H,EAAO,CACTqpB,kBAAmB,CAACruB,KAAMpB,EAAU,oBAAqBE,GAAW2C,MAAO,KAEzE0G,EAAQvJ,EAAU,sBAAuBE,GAC/CuH,EAAgB8B,EAAOnD,GAAM,SAACA,GAC1B,IAAMqpB,EAAoBrpB,EAAKqpB,kBAAkB5sB,O7BvEnB,SAAC+Z,EAAiBxb,EAAM8M,EAAiBuO,GAAuB,IAAhBrO,EAAe,uDAAP,GAC9F,OAAO,IAAI7J,SAAQ,SAACnF,EAASoF,GAQzB,IAAM4B,EAAO,CACTqpB,kBAAmBruB,EACnBwM,QAASM,EACTuO,MAAOA,EACPrO,SAEJ/N,QAAQC,IAAI8F,GAEZ1F,IAAMkZ,KAAN,UAAcnZ,EAAd,qBAAkCmc,GAAmBxW,GACpDa,MAAK,SAAAC,GACF9H,EAAQ8H,EAAId,SAEfe,OAAM,SAAAC,GACH5C,EAAO,4B6BmDPyrB,CAA2BrT,EAAiB6S,EAAmBvhB,EAAiBuO,EAAOrO,GACtFnH,MAAK,SAAAC,GACF3B,EAAU,GAAD,OAAIvF,EAAU,8BAA+BE,GAA7C,KAA2D4E,IACpEzE,QAAQC,IAAI4G,GACZgB,EAAS,uBAEZf,OAAM,SAAAC,GACH7B,EAAU,UAAD,OAAW6B,GAAOtC,IAC3BzE,QAAQC,IAAI8G,SAnBhB8oB,MAPAnpB,IAiIR,OACI,8BAhGI6oB,EAEI,cAACnX,GAAD,IAKJ,gCAEI,eAACjO,EAAA,EAAD,CAAMC,WAAS,EAACW,eAAe,WAA/B,UACI,eAAC,KAAD,CAAK/I,GAAI,CAAC6H,SAAU,GAApB,UACI,eAAChB,EAAA,EAAD,CAAY1G,QAAQ,KAApB,UAA0BxC,EAAU,gBAAiBE,GAArD,IAAiEuvB,KACjE,cAACvmB,EAAA,EAAD,CAAY1G,QAAQ,YAApB,SAAiCktB,OAGrC,eAACllB,EAAA,EAAD,CAAMyO,MAAI,EAAC5W,GAAI,CAAC0W,WAAY,EAAG2T,YAAa,YAA5C,UACI,cAACpjB,EAAA,EAAD,CAASC,MAAOvJ,EAAU,oBAAqBE,GAA/C,SACI,cAACsJ,EAAA,EAAD,CACIhH,QAAQ,YACRgF,QAASqoB,EAFb,SAII,cAACM,GAAA,EAAD,QAIR,cAAC7mB,EAAA,EAAD,CAASC,MAAOvJ,EAAU,qBAAsBE,GAAhD,SACI,cAACsJ,EAAA,EAAD,CACIhH,QAAQ,YACRgF,QAASuoB,EAFb,SAII,cAACK,GAAA,EAAD,QAIR,cAAC9mB,EAAA,EAAD,CAASC,MAAOvJ,EAAU,sBAAuBE,GAAjD,SACI,cAACsJ,EAAA,EAAD,CACIhH,QAAQ,YACRgF,QAASwoB,EAFb,SAII,cAACpD,GAAA,EAAD,cAOhB,cAAC,KAAD,CAAKV,GAAI,EAAT,SACI,cAAC,SAAD,CAAOmE,OAAO,OAAd,SACKV,EAAoBnxB,KAAI,SAAC6T,EAAO0C,GAAR,OACrB,qBAAiB6L,UAAU,aAA3B,SACI,qBAAKqO,MAAO,CACRzB,OAAQ,OACRK,UAAW,QACXyC,gBAAgB,OAAD,OAAS9Y,GAAenF,GAAxB,KACfke,eAAgB,QAChBC,mBAAoB,aANlBzb,UA6BtB,cAAC,GAAD,IAEA,cAACvK,EAAA,EAAD,CAAMC,WAAS,EAAf,SACI,cAAC6kB,GAAD,cC5HpB,IAKMptB,GAAqB,CACvBoY,uBAGWnY,gBATS,SAAC3B,GAAD,MAAY,CAChCuE,OAAQvE,EAAM4L,cAAcrH,OAC5B0Q,MAAOjV,EAAM4L,cAAcqJ,MAC3BvV,SAAUK,EAAeC,MAQzB0B,GAFWC,EAtEf,YAA4F,IAA/DmY,EAA8D,EAA9DA,mBAAmCvV,EAA2B,EAA3BA,OAAQ0Q,EAAmB,EAAnBA,MAAOvV,EAAY,EAAZA,SAMnEvB,EAAO8gB,cAAP9gB,GA+BR,SAAS8xB,IAAwC,IAApBb,EAAmB,wDAC5C,OACI,8BACI,cAAC,GAAD,CAAcA,UAAWA,MAcrC,OArCAnnB,qBAAU,WACF9J,GACA2b,EAAmB3b,KAExB,CAAC2b,EAAoB3b,IAkCpB,8BA/BJ,WACI,OAAQoG,GACJ,IAAK,UAML,QACI,OAAO0rB,GAAoB,GAL/B,IAAK,YACD,OAAOA,IACX,IAAK,SACD,OAcanX,EAdU7D,EAgB3B,gCACI,cAACvM,EAAA,EAAD,CAAY1G,QAAQ,KAApB,SAA0BxC,EAAU,4BAA6BE,KACjE,cAACgJ,EAAA,EAAD,CAAY+T,QAAQ,QAApB,SAA6Bjd,EAAUsZ,EAAcpZ,QAJjE,IAAyBoZ,EAWhBC,Q,oBChEP2U,GAAQwC,aAAoBC,gBAElCzC,GAAM0C,QAAN,gBACO1C,GAAM0C,SAGb1C,GAAM2C,WAAN,gBACO3C,GAAM2C,YA+BE3C,UCoBR,SAAS1W,GAAenF,GAC3B,IAAIkF,EAAc,GAElB,IAEIA,EADYuZ,OAAQ,YAAgBze,EAAMsY,QAAQ,KAAM,MACtCoG,QACpB,MAAO3pB,GACL/G,QAAQC,IAAR,iBAAsB+R,EAAtB,gBAEAkF,EADYuZ,EAAQ,KACFC,QANtB,QAQI,OAAOxZ,GAIR,SAAS4D,GAAoB/U,EAAMnG,GACtC,IACImG,EAAO4qB,KAAKC,UAAU7qB,GACtBtE,aAAaC,QAAQ9B,EAAKmG,GAG5B,MAAMgB,GACJ/G,QAAQC,IAAI,sCACZD,QAAQC,IAAI8G,IAIb,SAASgU,GAAqBnb,GACjC,IAAImG,EAAO,KACX,IACIA,EAAO4qB,KAAKE,MAAMpvB,aAAaqvB,QAAQlxB,IACzC,MAAMmH,GACJ/G,QAAQC,IAAI,oCACZD,QAAQC,IAAI8G,GAGhB,OAAOhB,EAGIgrB,OAjFf,WACI,OACI,cAACC,EAAA,EAAD,CAAenD,MAAOA,GAAtB,SACI,cAACoD,EAAA,EAAD,CAAWjvB,GAAI,CAAC6I,QAAS,GAAI/B,SAAS,KAAKyX,UAAU,MAArD,SACI,eAAC,IAAD,WACI,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,IAEA,eAAC,IAAD,WAEI,cAAC,IAAD,CAAO2Q,OAAK,EAAClR,KAAK,IAAImR,QAClB,cAAC,GAAD,MAIJ,cAAC,IAAD,CAAOD,OAAK,EAAClR,KAAK,gBAAgBmR,QAAS,cAAC,GAAD,MAC3C,cAAC,IAAD,CAAOD,OAAK,EAAClR,KAAK,WAAWmR,QAAS,cAAC,GAAD,MAEtC,cAAC,IAAD,CAAOD,OAAK,EAAClR,KAAK,qBAAqBmR,QACnC,cAAC,GAAD,MAIJ,cAAC,IAAD,CAAOD,OAAK,EAAClR,KAAK,UAAUmR,QACxB,cAAC,GAAD,MAIJ,cAAC,IAAD,CAAOnR,KAAK,IAAImR,QACZ,cAACtoB,EAAA,EAAD,CAAY1G,QAAQ,KAApB,qCCrCfivB,GAAQC,YAAe,CAChCC,QAAS,CACL7a,QAAS8a,GACTxlB,cAAeylB,GACf3xB,SAAU4xB,EACVxmB,aAAcymB,GACd1uB,KAAM2uB,GACN/rB,YAAagsB,GACbpc,MAAOqc,GACP7X,QAAS8X,MAKXC,GAAYtwB,aAAauwB,SAC3BD,KACAvxB,EAAsBuxB,IACtBX,GAAM9vB,SAASiE,GAAelB,KAAIC,OAAOytB,OAI7C,IAAME,GAAmBxwB,aAAa5B,SAClCoyB,KACAjyB,QAAQC,IAAI,gBAAiBgyB,IAC7Bb,GAAM9vB,SAASF,EAAY6wB,MC9B/BC,IAAShZ,OACL,cAAC,IAAMiZ,WAAP,UACI,cAAC,IAAD,CAAUf,MAAOA,GAAjB,SACI,cAAC,GAAD,QAGRgB,SAASC,eAAe,W","file":"static/js/main.f89ac7aa.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/notfound.b2542792.jpg\";","var map = {\n\t\"./Computer0.jpg\": 444,\n\t\"./Watch0.jpg\": 445,\n\t\"./notfound.jpg\": 250,\n\t\"./vw-golf-r-2021--.jpg\": 446\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 443;","export default __webpack_public_path__ + \"static/media/Computer0.e2b016a9.jpg\";","export default __webpack_public_path__ + \"static/media/Watch0.e6eda55c.jpg\";","export default __webpack_public_path__ + \"static/media/vw-golf-r-2021--.b97934f0.jpg\";","import en from './en.json'\r\nimport de from './de.json'\r\nimport fr from './fr.json'\r\n\r\nexport const languageNames = {\r\n    EN: 'en',\r\n    DE: 'de',\r\n    FR: 'fr'\r\n}\r\nexport const defaultLang = languageNames.EN\r\n\r\nconst languages = {\r\n    'en': en,\r\n    'de': de,\r\n    'fr': fr\r\n}\r\n\r\nexport const translate = (key, language = defaultLang) => {\r\n    let langData = languages[language]\r\n\r\n    if (!langData) {\r\n        console.log(`Trying to translate ${key} to a language that doesn't exist: '${language}'`)\r\n        return\r\n    }\r\n\r\n    const translation = langData[key]\r\n\r\n    if (!translation) {\r\n        // console.log(`There is no translation for ${key} in language ${language}!`)\r\n\r\n        // if there is a translation in the default language, at least return that\r\n        if (languages[defaultLang][key]) {\r\n            return languages[defaultLang][key]\r\n        }\r\n\r\n        // there is no translation for this key (not even in the default language) -> just return the key\r\n        return key\r\n    }\r\n\r\n    return translation\r\n}","export const selectLanguage = state =>      state.language.language\r\n","import axios from 'axios'\r\n\r\n// export const baseURL = `https://sqrt3.ddns.net:7187`\r\n// export const baseURL = `http://sqrt3.ddns.net:5187`\r\nexport const baseURL = `https://localhost:7187`\r\n// export const baseURL = ``\r\n\r\nexport const LOCAL_DATA = false\r\n\r\naxios.defaults.timeout = 5000\r\n\r\nexport const setAuthorizationToken = (token) => {\r\n    if (token) {\r\n        axios.defaults.headers.common['Authorization'] = `Bearer ${token}`\r\n    } else {\r\n        delete axios.defaults.headers.common['Authorization']\r\n    }\r\n}\r\n\r\nexport const setAcceptLanguage = (lang) => {\r\n    if (lang) {\r\n        axios.defaults.headers.common['Accept-Language'] = lang\r\n    } else {\r\n        delete axios.defaults.headers.common['Accept-Language']\r\n    }\r\n}","import { createSlice } from '@reduxjs/toolkit'\r\nimport { setAcceptLanguage } from '../../api/general'\r\nimport { defaultLang, languageNames } from '../../lang'\r\n\r\n\r\nconst initialState = {\r\n    language: defaultLang\r\n    // status: 'idle', // | 'loading' | 'succeeded' | 'failed'\r\n    // error: null\r\n}\r\n\r\nexport const languageSlice = createSlice({\r\n    name: 'language',\r\n    initialState,\r\n    reducers: {\r\n        changedLanguage: (state, action) => {\r\n            console.log('Changed language to: ' + action.payload)\r\n            state.language = action.payload\r\n        }\r\n    }\r\n})\r\n\r\nexport const setLanguage = (lang) => (dispatch) => {\r\n    // check if the language exists\r\n    if (!Object.values(languageNames).includes(lang)) {\r\n        console.log(`language '${lang}' does not exist!`)\r\n        lang = defaultLang\r\n    }\r\n\r\n    localStorage.setItem('language', lang)\r\n    setAcceptLanguage(lang)\r\n    dispatch(changedLanguage(lang))\r\n}\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const { changedLanguage } = languageSlice.actions\r\n\r\nexport default languageSlice.reducer","import { FormControl, InputLabel, MenuItem, Select } from '@mui/material'\r\nimport { Box } from '@mui/system'\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { languageNames } from '../../lang'\r\nimport { selectLanguage } from '../../state/language/languageSelectors'\r\nimport { setLanguage } from '../../state/language/languageSlice'\r\n\r\nfunction LanguageSelect({ language, setLanguage }) {\r\n\r\n    function handleChange(event) {\r\n        setLanguage(event.target.value)\r\n    }\r\n\r\n    return (\r\n        <Box sx={{ minWidth: 120 }}>\r\n            <FormControl variant='standard' fullWidth>\r\n                <InputLabel id=\"select-lang-label\">Language</InputLabel>\r\n                <Select\r\n                    labelId='select-lang-label'\r\n                    value={language}\r\n                    autoWidth\r\n                    label=\"Lang\"\r\n                    onChange={handleChange}\r\n                    >\r\n                    <MenuItem value={languageNames.EN}>English</MenuItem>\r\n                    <MenuItem value={languageNames.DE}>Deutsch</MenuItem>\r\n                    <MenuItem value={languageNames.FR}>Franais</MenuItem>\r\n                </Select>\r\n            </FormControl>\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    language: selectLanguage(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    setLanguage\r\n}\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(LanguageSelect)\r\n","export const selectIsAuthenticated = state =>       state.user.isAuthenticated\r\nexport const selectIsAdmin = state =>               state.user.user.admin || false\r\nexport const selectUserName = state =>              selectCurrentUser(state).userName || ''\r\nexport const selectUserEmail = state =>             selectCurrentUser(state).userEmail || ''\r\n\r\nexport const selectSavedConfigurations = state =>       state.user.savedConfigurations\r\nexport const selectOrderedConfigurations = state =>     state.user.orderedConfigurations\r\nexport const selectAllOrderedConfigurations = state =>  state.user.allOrderedConfigurations\r\n\r\nconst selectCurrentUser = state =>        state.user.user\r\n\r\nexport const extractUsernameFromConfiguration = (configuration) =>      configuration.user?.userName || ''\r\nexport const extractEmailFromConfiguration = (configuration) =>         configuration.user?.userEmail || ''\r\n\r\nexport const extractNameFromConfiguration = (configuration) =>          configuration.savedName\r\nexport const extractIdFromConfiguration = (configuration) =>            configuration.configId\r\nexport const extractOptionsFromConfiguration = (configuration) =>       configuration.options\r\nexport const extractDateFromConfiguration = (configuration) =>          configuration.date","import axios from 'axios'\r\nimport { baseURL } from './general'\r\nimport jwt from 'jsonwebtoken'\r\n\r\nexport const requestSaveConfiguration = (configurationId, name, selectedOptions) => {\r\n    // return saveConfigTest(name, selectedOptions)\r\n\r\n    return new Promise((resolve, reject) => {\r\n        const data = {\r\n            savedName: name,\r\n            options: selectedOptions\r\n        }\r\n        axios.post(`${baseURL}/account/configurations/${configurationId}`, data)\r\n        .then(res => {\r\n            resolve(res.data)\r\n        })\r\n        .catch(err => {\r\n            reject('Could not save configuration!')\r\n        })\r\n    })\r\n}\r\nexport const requestDeleteSavedConfiguration = (configurationId, name) => {\r\n    return new Promise((resolve, reject) => {\r\n        // reject('Not implemented!')\r\n\r\n        const data = {\r\n            savedName: name\r\n        }\r\n        axios.delete(`${baseURL}/account/configurations/${configurationId}`, data)\r\n        .then(res => {\r\n            resolve(res.data)\r\n        })\r\n        .catch(err => {\r\n            reject('Could not get saved configurations!')\r\n        })\r\n    })\r\n}\r\nexport const fetchSavedConfigurations = () => {\r\n    // return fetchConfigsTest()\r\n\r\n    return new Promise((resolve, reject) => {\r\n        axios.get(`${baseURL}/account/configurations/`)\r\n        .then(res => {\r\n            resolve(res.data)\r\n        })\r\n        .catch(err => {\r\n            reject('Could not get saved configurations!')\r\n        })\r\n    })\r\n}\r\nexport const fetchAllOrderedConfigurations = () => {\r\n    // return fetchOrderedConfigsTest()\r\n\r\n    return new Promise((resolve, reject) => {\r\n        axios.get(`${baseURL}/account/allorderedconfigurations/`)\r\n        .then(res => {\r\n            resolve(res.data)\r\n        })\r\n        .catch(err => {\r\n            reject('Could not get all ordered configurations!')\r\n        })\r\n    })\r\n}\r\n\r\nexport const requestRegister = (username, email, password) => {\r\n    return new Promise((resolve, reject) => {\r\n        reject('Not implemented')\r\n    })\r\n}\r\n\r\nexport const requestLogin = (username, password) => {\r\n    return loginTest(username, password)\r\n\r\n    // return new Promise((resolve, reject) => {\r\n    //     axios.post('/api/auth', {username, password})\r\n    //     .then(res => {\r\n    //         const token = res.data.token\r\n    //         const user = jwt.decode(token)\r\n    //         resolve({token, user})\r\n    //     })\r\n    //     .catch(err => {\r\n    //         reject('Invalid Credentials')\r\n    //     })\r\n    // })\r\n}\r\n\r\n\r\n// A mock function to mimic making an async request for the login\r\nfunction loginTest(username, password) {\r\n    return new Promise((resolve, reject) => {\r\n        if (username !== 'admin' && username !== 'user') {\r\n            reject('INVALID CREDENTIALS')\r\n        }\r\n        \r\n        setTimeout(() => {\r\n            // user token\r\n            let token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyTmFtZSI6InRlc3R1c2VyIiwidXNlckVtYWlsIjoidGVzdHVzZXJAdGVzdC1mdWNocy5jb20iLCJhZG1pbiI6ZmFsc2UsImlhdCI6MTYxNzQ0OTAyMn0.mNE0pAsXlfADoB9xvvPbyOqo4cO_nPJa2aCrUIeXMRY'\r\n            \r\n            // admin token\r\n            if (username === 'admin') {\r\n                token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyTmFtZSI6ImFkbWluIiwidXNlckVtYWlsIjoiY29uZmlndXJhdG9yLWFkbWluQHRlc3QtZnVjaHMuY29tIiwiYWRtaW4iOnRydWUsImlhdCI6MTYxNzQ0OTAyMn0.c3_WbsSenWEZTfCnesqIOz1067u2xL1FoE_efepoaBI'\r\n            }\r\n            \r\n            const user = jwt.decode(token)\r\n\r\n            resolve({token, user})\r\n        }, 250)\r\n    })\r\n}\r\n\r\nfunction saveConfigTest(name, options) {\r\n    return new Promise((resolve, reject) => {\r\n        resolve('Successfully saved ' + name)\r\n    })\r\n}\r\nfunction fetchConfigsTest() {\r\n    return new Promise((resolve, reject) => {\r\n        const data = [\r\n            {\r\n                savedName: \"TestConfig\",\r\n                status: \"saved\", // or \"ordered\"\r\n                date: new Date().toISOString(),\r\n                id: 0,\r\n                name: \"Car\",\r\n                description: \"This is a car\",\r\n                options: ['YELLOW']\r\n            },\r\n            {\r\n                savedName: \"TestConfig2\",\r\n                status: \"saved\",\r\n                date: new Date().toISOString(),\r\n                id: 0,\r\n                name: \"Car\",\r\n                description: \"This is a car\",\r\n                options: ['BLUE', 'DIESEL', 'D150']\r\n            },\r\n            {\r\n                savedName: \"TestOrderedConfig\",\r\n                status: \"ordered\",\r\n                date: new Date().toISOString(),\r\n                id: 0,\r\n                name: \"Car\",\r\n                description: \"This is a car\",\r\n                options: ['YELLOW', 'DIESEL', 'D150', 'PANORAMAROOF', 'PANORAMASMALL']\r\n            },\r\n            {\r\n                savedName: \"TestOrderedConfig2\",\r\n                status: \"ordered\",\r\n                date: new Date().toISOString(),\r\n                id: 0,\r\n                name: \"Car\",\r\n                description: \"This is a car\",\r\n                options: ['BLUE', 'PETROL', 'P220', 'HEATED_SEATS']\r\n            }\r\n        ]\r\n        resolve(data)\r\n    })\r\n}\r\nfunction fetchOrderedConfigsTest() {\r\n    return new Promise((resolve, reject) => {\r\n        const data = [\r\n            {\r\n                savedName: \"TestOrderedConfig\",\r\n                userName: \"admin\",\r\n                userEmail: \"configurator-admin@test-fuchs.com\",\r\n                date: new Date().toISOString(),\r\n                id: 0,\r\n                name: \"Car\",\r\n                description: \"This is a car\",\r\n                options: ['YELLOW', 'DIESEL', 'D150', 'PANORAMAROOF', 'PANORAMASMALL']\r\n            },\r\n            {\r\n                savedName: \"TestOrderedConfig2\",\r\n                userName: \"admin\",\r\n                userEmail: \"configurator-admin@test-fuchs.com\",\r\n                status: \"ordered\",\r\n                date: new Date().toISOString(),\r\n                id: 0,\r\n                name: \"Car\",\r\n                description: \"This is a car\",\r\n                options: ['BLUE', 'PETROL', 'P220', 'HEATED_SEATS']\r\n            }\r\n        ]\r\n        resolve(data)\r\n    })\r\n}","import { createSlice } from '@reduxjs/toolkit'\r\n\r\nexport const alertStatus = {\r\n    CLOSED: 'closed',\r\n    OPEN: 'open'\r\n}\r\n\r\nexport const alertTypes = {\r\n    ERROR: 'error',\r\n    WARNING: 'warning',\r\n    INFO: 'info',\r\n    SUCCESS: 'success'\r\n}\r\n\r\n\r\n\r\nconst initialState = {\r\n    status: alertStatus.CLOSED,\r\n    alerts: [ // can be multiple -> when 1. closed, 2nd pops up\r\n        // {message: '', type: alertTypes.INFO}\r\n    ]\r\n}\r\n\r\nexport const alertSlice = createSlice({\r\n    name: 'alert',\r\n    initialState,\r\n    reducers: {\r\n        addAlert: (state, action) => {\r\n            state.status = alertStatus.OPEN\r\n            state.alerts.push(action.payload)\r\n        },\r\n        closeAlert: (state) => {\r\n            state.alerts.shift()\r\n\r\n            // set the status to closed, when all alerts are gone\r\n            if (state.alerts.length === 0) {\r\n                state.status = alertStatus.CLOSED\r\n            }\r\n        }\r\n    }\r\n})\r\n\r\nexport const openAlert = (message, type) => async (dispatch) => {\r\n    dispatch(addAlert({ message, type }))\r\n}\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const { addAlert, closeAlert } = alertSlice.actions\r\n\r\nexport default alertSlice.reducer","import { createSlice } from '@reduxjs/toolkit'\r\nimport { setAuthorizationToken } from '../../api/general'\r\nimport { fetchAllOrderedConfigurations, fetchSavedConfigurations, requestLogin, requestRegister } from '../../api/userAPI'\r\nimport { alertTypes, openAlert } from '../alert/alertSlice'\r\n\r\nconst initialState = {\r\n    isAuthenticated: false,\r\n    user: {},\r\n    savedConfigurations: [],\r\n    orderedConfigurations: [],\r\n    allOrderedConfigurations: []\r\n}\r\n\r\nexport const userSlice = createSlice({\r\n    name: 'user',\r\n    initialState,\r\n    reducers: {\r\n        setCurrentUser: (state, action) => {\r\n            console.log('getting user:', action.payload)\r\n            state.user = action.payload\r\n            if (Object.keys(action.payload).length > 0) {\r\n                // user is set\r\n                state.isAuthenticated = true\r\n            } else {\r\n                // user is removed\r\n                state.isAuthenticated = false\r\n                state.savedConfigurations = []\r\n                state.orderedConfigurations = []\r\n                state.allOrderedConfigurations = []\r\n            }\r\n        },\r\n        setSavedConfigurations: (state, action) => {\r\n            console.log('setting saved configurations:', action.payload)\r\n            state.savedConfigurations = action.payload\r\n        },\r\n        setOrderedConfigurations: (state, action) => {\r\n            console.log('setting ordered configurations:', action.payload)\r\n            state.orderedConfigurations = action.payload\r\n        },\r\n        setAllOrderedConfigurations: (state, action) => {\r\n            // console.log('setting all ordered configurations:', action.payload)\r\n            state.allOrderedConfigurations = action.payload\r\n        }\r\n    }\r\n})\r\n\r\nexport const getSavedConfigurations = () => async (dispatch) => {\r\n    fetchSavedConfigurations()\r\n    .then(configurations => {\r\n        let saved = configurations.filter(config => config.status === 'saved')\r\n        let ordered = configurations.filter(config => config.status === 'ordered')\r\n\r\n        if (saved.length > 0) dispatch(setSavedConfigurations(saved))\r\n        if (ordered.length > 0) dispatch(setOrderedConfigurations(ordered))\r\n    })\r\n    .catch(err => {\r\n        console.log(err)\r\n        dispatch(openAlert(err, alertTypes.ERROR))\r\n    })\r\n}\r\nexport const getAllOrderedConfigurations= () => async (dispatch) => {\r\n    fetchAllOrderedConfigurations()\r\n    .then(configurations => {\r\n        dispatch(setAllOrderedConfigurations(configurations))\r\n    })\r\n    .catch(err => {\r\n        console.log(err)\r\n        dispatch(openAlert(err, alertTypes.ERROR))\r\n    })\r\n}\r\n\r\nexport const register = (username, password, email) => async (dispatch) => {\r\n    requestRegister(username, password, email).then(res => {\r\n        dispatch(openAlert('Registered!', alertTypes.SUCCESS))\r\n    })\r\n    .catch(err => {\r\n        dispatch(openAlert(err, alertTypes.ERROR))\r\n    })\r\n}\r\n\r\nexport const login = (username, password) => async (dispatch) => {\r\n    \r\n    requestLogin(username, password).then(res => {\r\n        const { token, user } = res\r\n\r\n        localStorage.setItem('jwtToken', token)\r\n        setAuthorizationToken(token)\r\n        dispatch(setCurrentUser(user))\r\n        dispatch(openAlert('Logged In!', alertTypes.SUCCESS))\r\n    })\r\n    .catch(err => {\r\n        dispatch(openAlert(err, alertTypes.ERROR))\r\n    })\r\n}\r\n\r\nexport const logout = () => (dispatch) => {\r\n    localStorage.removeItem('jwtToken')\r\n    setAuthorizationToken(false)\r\n    dispatch(setCurrentUser({}))\r\n}\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const { setCurrentUser, setSavedConfigurations, setOrderedConfigurations, setAllOrderedConfigurations } = userSlice.actions\r\n\r\nexport default userSlice.reducer","export const selectIsInputDialogOpen = state =>             state.inputDialog.open\r\nexport const selectInputDialogData = state =>               state.inputDialog.data\r\nexport const selectInputDialogHeaderMessage = state =>      state.inputDialog.headerMessage","import { createSlice } from '@reduxjs/toolkit'\r\nimport { selectInputDialogData, selectIsInputDialogOpen } from './inputDialogSelectors'\r\n\r\nconst initialState = {\r\n    open: false,\r\n    headerMessage: '',\r\n    data: {}\r\n}\r\n\r\nexport const inputDialogSlice = createSlice({\r\n    name: 'inputDialog',\r\n    initialState,\r\n    reducers: {\r\n        show: (state, action) => {\r\n            const { headerMessage, data } = action.payload\r\n\r\n            // console.log('Opened input dialog:', data)\r\n            state.headerMessage = headerMessage\r\n            state.data = data\r\n            state.open = true\r\n        },\r\n        close: (state, action) => {\r\n            // console.log('Closed input dialog')\r\n            state.open = false\r\n            state.headerMessage = ''\r\n            state.data = {}\r\n        },\r\n        setData: (state, action) => {\r\n            // console.log('Set input dialog data:', action.payload)\r\n            state.data = action.payload\r\n        }\r\n    }\r\n})\r\n\r\n\r\nlet onConfirm = null\r\n\r\nexport const inputDialogOpen = (headerMessage, data, onConfirmCallback) => (dispatch, getState) => {\r\n    const isOpen = selectIsInputDialogOpen(getState())\r\n    if (isOpen) {\r\n        console.log('Input Dialog is already open!')\r\n        return\r\n    }\r\n\r\n    onConfirm = onConfirmCallback\r\n    \r\n    dispatch(show({headerMessage, data}))\r\n}\r\n\r\nexport const inputDialogConfirm = () => (dispatch, getState) => {\r\n    const isOpen = selectIsInputDialogOpen(getState())\r\n    if (!isOpen) {\r\n        console.log('Input Dialog is closed (can not confirm)!')\r\n        return\r\n    }\r\n\r\n    if (onConfirm) {\r\n        const data = selectInputDialogData(getState())\r\n        onConfirm(data)\r\n    } else {\r\n        console.log('no confirmation callback')\r\n    }\r\n    dispatch(close())\r\n    onConfirm = null\r\n}\r\n\r\nexport const inputDialogCancel = () => (dispatch) => {\r\n    dispatch(close())\r\n    onConfirm = null\r\n}\r\n\r\nexport const inputDialogSetData = (data) => (dispatch) => {\r\n    dispatch(setData(data))\r\n}\r\n\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const { show, close, setData } = inputDialogSlice.actions\r\n\r\nexport default inputDialogSlice.reducer","import React from 'react'\r\nimport { Button } from '@mui/material'\r\nimport { connect } from 'react-redux'\r\nimport { inputDialogOpen } from '../../state/inputDialog/inputDialogSlice'\r\nimport { login } from '../../state/user/userSlice'\r\nimport { translate } from '../../lang'\r\nimport { selectLanguage } from '../../state/language/languageSelectors'\r\n\r\nexport const openLogInDialog = () => (dispatch) => {\r\n    const data = {\r\n        username: {name: 'Username', value: ''},\r\n        password: {name: 'Password', value: '', isPassword: true}\r\n    }\r\n    dispatch(inputDialogOpen('Login', data, (data) => {\r\n        dispatch(login(data.username.value, data.username.password))\r\n    }))\r\n}\r\n\r\nfunction LoginButton({ openLogin, language, size = 'small' }) {\r\n\r\n\r\n    return (\r\n        <Button\r\n            size={size}\r\n            variant=\"contained\" \r\n            onClick={openLogin}\r\n            >\r\n            {translate('login', language)}\r\n        </Button>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    language: selectLanguage(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    openLogin: openLogInDialog\r\n}\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(LoginButton)","import React from 'react'\r\nimport { Button } from '@mui/material'\r\nimport { connect } from 'react-redux'\r\nimport { inputDialogOpen } from '../../state/inputDialog/inputDialogSlice'\r\nimport { register } from '../../state/user/userSlice'\r\nimport { alertTypes, openAlert } from '../../state/alert/alertSlice'\r\nimport { translate } from '../../lang'\r\nimport { selectLanguage } from '../../state/language/languageSelectors'\r\n\r\nfunction RegisterButton({ openInputDialog, register, openAlert, language, size = 'small' }) {\r\n\r\n    function openRegisterDialog() {\r\n        const data = {\r\n            username: {name: 'Username', value: ''},\r\n            email: {name: 'Email', value: '', isEmail: true},\r\n            password: {name: 'Password', value: '', isPassword: true},\r\n            confirmPassword: {name: 'Confirm Password', value: '', isPassword: true}\r\n        }\r\n        openInputDialog('Register', data, (data) => {\r\n            if (data.confirmPassword.value !== data.password.value) {\r\n                openAlert(`${translate('passwordDontMatch', language)}!`, alertTypes.ERROR)\r\n                return\r\n            }\r\n            register(data.username.value, data.email.value, data.username.password)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Button\r\n            size={size}\r\n            variant=\"contained\" \r\n            onClick={openRegisterDialog}\r\n            >\r\n            {translate('register', language)}\r\n        </Button>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    language: selectLanguage(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    openInputDialog: inputDialogOpen,\r\n    register: register,\r\n    openAlert: openAlert\r\n}\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(RegisterButton)","import React, { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { /*Accordion, AccordionDetails, AccordionSummary,*/ AppBar, Button, Drawer, Grid, /*Button, */IconButton, Toolbar, Tooltip, Typography } from '@mui/material'\r\nimport { AccountCircle, /*ArrowBackIosNew, ExpandMoreOutlined,*/ Home, Logout, Menu } from '@mui/icons-material'\r\nimport { Box } from '@mui/system'\r\nimport LanguageSelect from './LanguageSelect'\r\nimport { translate } from '../../lang'\r\nimport { selectLanguage } from '../../state/language/languageSelectors'\r\nimport { connect } from 'react-redux'\r\nimport { selectIsAuthenticated, selectIsAdmin, selectUserName } from '../../state/user/userSelector'\r\nimport { logout } from '../../state/user/userSlice'\r\nimport { inputDialogOpen } from '../../state/inputDialog/inputDialogSlice'\r\nimport LoginButton from './LoginButton'\r\nimport RegisterButton from './RegisterButton'\r\n\r\nfunction Header({ language, isLoggedIn, isAdmin, username, logout }) {\r\n\r\n    const navigate = useNavigate()\r\n\r\n    const [drawerOpen, setDrawerOpen] = useState(false)\r\n\r\n    const [mobileView, setMobileView] = useState(false)\r\n    useEffect(() => {\r\n        const setResponsiveness = () => {\r\n            return window.innerWidth < 900\r\n                ? setMobileView(true)\r\n                : setMobileView(false)\r\n        }\r\n\r\n        setResponsiveness();\r\n        window.addEventListener('resize', () => setResponsiveness())\r\n\r\n        return () => {\r\n            window.removeEventListener('resize', () => setResponsiveness())\r\n        }\r\n    }, [])\r\n\r\n    const userButtons = (\r\n        <>\r\n            <Button\r\n                size=\"large\"\r\n                variant=\"contained\"\r\n                startIcon={<AccountCircle />}\r\n                onClick={() => navigate('/account')}\r\n            >\r\n                <Typography variant=\"body1\" sx={{maxWidth: '180px', overflow: 'hidden', textOverflow: 'ellipsis'}}>\r\n                    {username}\r\n                </Typography>\r\n            </Button>\r\n            <Tooltip title={translate('logout', language)}>\r\n                <IconButton\r\n                    size=\"large\"\r\n                    variant=\"contained\"\r\n                    onClick={() => logout()}\r\n                >\r\n                    <Logout />\r\n                </IconButton>\r\n            </Tooltip>\r\n        </>\r\n    )\r\n\r\n    const adminButtons = (\r\n        <>\r\n            <Button\r\n                size=\"large\"\r\n                variant=\"contained\"\r\n                onClick={handleCreateConfigPressed}\r\n            >\r\n                {translate('createConfiguration', language)}\r\n            </Button>\r\n        </>\r\n    )\r\n\r\n    const guestButtons = (\r\n        <>\r\n            <LoginButton size=\"large\"></LoginButton>\r\n            <RegisterButton size=\"large\"></RegisterButton>\r\n        </>\r\n    )\r\n\r\n    const homeButton = (\r\n        <>\r\n            <IconButton onClick={() => navigate('/')}>\r\n                <Home sx={{color: 'white'}} />\r\n            </IconButton>\r\n        </>\r\n    )\r\n\r\n    function handleCreateConfigPressed() {\r\n        navigate('/create')\r\n    }\r\n\r\n    function getMenuButtons() {\r\n        return (\r\n            // <Grid container sx={{ gap: 2 }} >\r\n            <>\r\n                {/* <LanguageSelect></LanguageSelect> */}\r\n\r\n                {/* <Box sx={{ flexGrow: 1 }}></Box> */}\r\n\r\n                {/* <Button variant=\"contained\" onClick={() => openConfirmDialog('Example Message', {}, null, () => console.log('confirmed'))}>\r\n                    test dialog\r\n                </Button> */}\r\n\r\n                {isAdmin ? adminButtons : ''}\r\n\r\n                {isLoggedIn ? userButtons : guestButtons}\r\n\r\n            </>\r\n            // </Grid>\r\n        )\r\n    }\r\n\r\n    function handleToggleDrawer(on) {\r\n        setDrawerOpen(on)\r\n    }\r\n\r\n    function mobileToolbar() {\r\n        // const drawerBleeding = 56\r\n\r\n        return (\r\n            // <SwipeableDrawer\r\n            //     anchor=\"top\"\r\n            //     open={drawerOpen}\r\n            //     // onClose={handleToggleDrawer(false)}\r\n            //     // onOpen={handleToggleDrawer(true)}\r\n            //     swipeAreaWidth={drawerBleeding}\r\n            //     disableSwipeToOpen={false}\r\n            //     ModalProps={{\r\n            //         keepMounted: true,\r\n            //     }}\r\n            // >\r\n            //     <Box\r\n            //         sx={{\r\n            //             position: 'absolute',\r\n            //             top: -drawerBleeding,\r\n            //             borderTopLeftRadius: 8,\r\n            //             borderTopRightRadius: 8,\r\n            //             visibility: 'visible',\r\n            //             right: 0,\r\n            //             left: 0,\r\n            //         }}\r\n            //     >\r\n            //         <Menu fontSize=\"large\" />\r\n            //         <Typography sx={{ p: 2, color: 'text.secondary' }}>Open Menu</Typography>\r\n            //     </Box>\r\n            //     <Box\r\n            //         sx={{\r\n            //             px: 2,\r\n            //             pb: 2,\r\n            //             height: '100%',\r\n            //             overflow: 'auto',\r\n            //         }}\r\n            //     >\r\n\r\n            //     <Box sx={{ flexGrow: 1 }}></Box>\r\n\r\n            //     <IconButton onClick={() => navigate('/')}>\r\n            //         <ArrowBackIosNew></ArrowBackIosNew>\r\n            //     </IconButton>\r\n\r\n            //     <LanguageSelect></LanguageSelect>\r\n            //     </Box>\r\n            // </SwipeableDrawer>\r\n\r\n            <AppBar position=\"static\">\r\n                <Toolbar>\r\n\r\n                    <Grid container direction=\"row\">\r\n\r\n                        <IconButton\r\n                            size=\"large\"\r\n                            edge=\"start\"\r\n                            color=\"inherit\"\r\n                            aria-label=\"menu\"\r\n                            sx={{ mr: 2 }}\r\n                            onClick={() => handleToggleDrawer(true)}\r\n                            >\r\n                            <Menu fontSize=\"large\" />\r\n                        </IconButton>\r\n\r\n                        {homeButton}\r\n                        \r\n                        <Box sx={{ flexGrow: 1 }}></Box>\r\n                        \r\n                        <LanguageSelect></LanguageSelect>\r\n                    \r\n                    </Grid>\r\n\r\n                    <Drawer\r\n                        anchor=\"top\"\r\n                        open={drawerOpen}\r\n                        onClose={() => handleToggleDrawer(false)}\r\n                    >\r\n                        <Grid container direction=\"column\" padding={5} gap={2}>\r\n\r\n                            {getMenuButtons()}\r\n\r\n                        </Grid>\r\n                    </Drawer>\r\n\r\n                </Toolbar>\r\n            </AppBar>\r\n\r\n            // <Accordion expanded={drawerOpen}>\r\n            //     <AccordionSummary\r\n            //         expandIcon={<ExpandMoreOutlined />}\r\n            //         aria-controls=\"panel1a-content\"\r\n            //         id=\"panel1a-header\"\r\n            //         onClick={() => handleToggleDrawer(!drawerOpen)}\r\n            //     >\r\n\r\n            //         <IconButton\r\n            //             size=\"large\"\r\n            //             edge=\"start\"\r\n            //             color=\"inherit\"\r\n            //             aria-label=\"menu\"\r\n            //             sx={{ mr: 2 }}\r\n            //             onClick={() => handleToggleDrawer(!drawerOpen)}\r\n            //         >\r\n            //             <Menu fontSize=\"large\" />\r\n            //         </IconButton>\r\n\r\n            //         {/* <Box sx={{ flexGrow: 1 }}></Box>\r\n                    \r\n            //         <IconButton onClick={() => navigate('/')}>\r\n            //             <ArrowBackIosNew></ArrowBackIosNew>\r\n            //         </IconButton> */}\r\n\r\n\r\n            //     </AccordionSummary>\r\n            //     <AccordionDetails>\r\n\r\n            //         <Grid container direction=\"column\" gap={2} alignItems=\"center\">\r\n            //             <LanguageSelect></LanguageSelect>\r\n\r\n            //             {isAdmin ? adminButtons : ''}\r\n\r\n            //             {isLoggedIn ? userButtons : guestButtons}\r\n            //         </Grid>\r\n\r\n            //     </AccordionDetails>\r\n            // </Accordion >\r\n        )\r\n    }\r\n\r\n    function desktopToolbar() {\r\n        return (\r\n            <AppBar position=\"static\">\r\n                <Toolbar variant=\"regular\">\r\n                    <Grid justifyContent=\"flex-end\" container gap={2}>\r\n                        {homeButton}\r\n\r\n                        <LanguageSelect></LanguageSelect>\r\n\r\n                        <Box sx={{ flexGrow: 1 }}></Box>\r\n\r\n                        {/* <Grid container justifyContent=\"flex-end\" gap={2}> */}\r\n                            {getMenuButtons()}\r\n                        {/* </Grid> */}\r\n                    </Grid>\r\n                </Toolbar>\r\n            </AppBar>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <header>\r\n            <Box sx={{ flexGrow: 1 }}>\r\n                <Typography align='center' marginBottom={1} variant='h1'>\r\n                    {translate('productConfigurator', language)}\r\n                </Typography>\r\n\r\n                {mobileView ? mobileToolbar() : desktopToolbar()}\r\n            </Box>\r\n        </header>\r\n    )\r\n}\r\nconst mapStateToProps = (state) => ({\r\n    language: selectLanguage(state),\r\n    isLoggedIn: selectIsAuthenticated(state),\r\n    isAdmin: selectIsAdmin(state),\r\n    username: selectUserName(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    openInputDialog: inputDialogOpen,\r\n    logout: logout\r\n}\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(Header)\r\n","export const selectIsConfirmDialogOpen = state =>       state.confirmation.open\r\nexport const selectConfirmDialogMessage = state =>      state.confirmation.message\r\nexport const selectConfirmDialogData = state =>         state.confirmation.data\r\n","import { createSlice } from '@reduxjs/toolkit'\r\nimport { selectIsConfirmDialogOpen } from './confirmationSelectors'\r\n\r\nconst initialState = {\r\n    open: false,\r\n    message: '',\r\n    data: {}\r\n}\r\n\r\nexport const confirmationSlice = createSlice({\r\n    name: 'confirmation',\r\n    initialState,\r\n    reducers: {\r\n        show: (state, action) => {\r\n            const { message, data } = action.payload\r\n\r\n            // console.log('Opened confirmation dialog: ' + message)\r\n            state.open = true\r\n            state.message = message\r\n            state.data = data\r\n        },\r\n        close: (state, action) => {\r\n            // console.log('Closed confirmation dialog')\r\n            state.open = false\r\n            state.message = ''\r\n            state.data = {}\r\n        }\r\n    }\r\n})\r\n\r\n\r\nlet onConfirm = null\r\nlet bodyContent = null\r\n\r\nexport const confirmDialogOpen = (message, data, body, onConfirmCallback) => (dispatch, getState) => {\r\n    const isOpen = selectIsConfirmDialogOpen(getState())\r\n    if (isOpen) {\r\n        console.log('Confirmation Dialog is already open!')\r\n        return\r\n    }\r\n\r\n    onConfirm = onConfirmCallback\r\n    bodyContent = body\r\n    \r\n    dispatch(show({message, data}))\r\n}\r\n\r\nexport const confirmDialogConfirm = () => (dispatch, getState) => {\r\n    const isOpen = selectIsConfirmDialogOpen(getState())\r\n    if (!isOpen) {\r\n        console.log('Confirmation Dialog is closed (can not confirm)!')\r\n        return\r\n    }\r\n\r\n    dispatch(close())\r\n    if (onConfirm) {\r\n        onConfirm()\r\n    } else {\r\n        console.log('no confirmation callback')\r\n    }\r\n    onConfirm = null\r\n    bodyContent = null\r\n}\r\n\r\nexport const confirmDialogCancel = () => (dispatch) => {\r\n    dispatch(close())\r\n    onConfirm = null\r\n    bodyContent = null\r\n}\r\n\r\nexport const confirmDialogGetBody = () => bodyContent\r\n\r\n// class confirmationDialog {\r\n//     constructor() {\r\n//         this.onConfirm = null\r\n//     }\r\n\r\n//     open = (message, content, onConfirm) => (dispatch, getState) => {\r\n//         const isOpen = selectIsConfirmDialogOpen(getState())\r\n//         if (isOpen) {\r\n//             console.log('Confirmation Dialog is already open!')\r\n//             return\r\n//         }\r\n\r\n//         this.onConfirm = onConfirm\r\n        \r\n//         dispatch(show({message, content}))\r\n//     }\r\n\r\n//     confirm = () => (dispatch, getState) => {\r\n//         const isOpen = selectIsConfirmDialogOpen(getState())\r\n//         if (!isOpen) {\r\n//             console.log('Confirmation Dialog is closed (can not confirm)!')\r\n//             return\r\n//         }\r\n    \r\n//         dispatch(close())\r\n//         if (this.onConfirm) {\r\n//             this.onConfirm()\r\n//         } else {\r\n//             console.log('no confirmation callback')\r\n//         }\r\n//         this.onConfirm = null\r\n//     }\r\n\r\n//     cancel = () => (dispatch) => {\r\n//         dispatch(close())\r\n//         this.onConfirm = null\r\n//     }\r\n// }\r\n\r\n// export const useConfirmationDialog = new confirmationDialog() \r\n\r\n// export const openConfirmDialog = (message) => (dispatch, getState) => {\r\n//     const isOpen = selectIsConfirmDialogOpen(getState())\r\n//     if (isOpen) {\r\n//         console.log('Confirmation Dialog is already open!')\r\n//         return\r\n//     }\r\n\r\n//     dispatch(show({message}))\r\n// }\r\n// export const closeConfirmDialog = (isConfirmed = false) => (dispatch, getState) => {\r\n//     const isOpen = selectIsConfirmDialogOpen(getState())\r\n//     if (!isOpen) {\r\n//         console.log('Confirmation Dialog is already closed!')\r\n//         return\r\n//     }\r\n\r\n//     if (isConfirmed) {\r\n//         getState().confirmation.onConfirm()\r\n//         dispatch(confirm())\r\n//     } else {\r\n//         dispatch(cancel())\r\n//     }\r\n// }\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const { show, close/*, confirm, cancel*/ } = confirmationSlice.actions\r\n\r\nexport default confirmationSlice.reducer","import { createSelector } from 'reselect'\r\n\r\nexport const GROUP_ERRORS = {\r\n    atLeastOne: 'groupErrorAtLeastOne' // the name is the key in the language file \r\n}\r\n\r\nexport const OPTION_ERRORS = {\r\n    requirementsNotMet: 'optionRequirementsNotMet',\r\n    hasIncompatibilities: 'optionHasIncompatibilities'\r\n}\r\n\r\n// input selectors:\r\nconst selectGroupId = (state, groupId) =>               groupId\r\nconst selectOptionId = (state, optionId) =>             optionId\r\nconst selectModelName = (state, modelName) =>           modelName\r\nconst selectSectionId = (state, sectionId) =>           sectionId\r\n\r\nconst selectAllOptionIncompatibilities = state =>       state.configuration.configuration.rules.incompatibilities\r\nconst selectAllOptionRequirements = state =>            state.configuration.configuration.rules.requirements\r\nconst selectReplacementGroups = state =>                state.configuration.configuration.rules.replacementGroups\r\n\r\nconst selectAllGroupRequirements = state =>             state.configuration.configuration.rules.groupRequirements\r\n\r\nexport const selectConfigurationStatus = state =>       state.configuration.status\r\n\r\nexport const selectConfigurationId = (state) =>         state.configuration.configuration.configId\r\n\r\nexport const selectBasePrice = state =>                 state.configuration.configuration.rules?.basePrice || 0\r\nexport const selectPriceList = state =>                 state.configuration.configuration.rules?.priceList || []\r\n// export const selectDefaultOptions = state =>            state.configuration.configuration.rules?.defaultOptions || []\r\nexport const selectDefaultModel = state =>              state.configuration.configuration.rules?.defaultModel || ''\r\nexport const selectSelectedModel = state =>             state.configuration.selectedModel\r\nexport const selectModels = state =>                    state.configuration.configuration.rules?.models || []\r\nexport const selectDefaultOptions = state =>            state.configuration.configuration.rules?.defaultOptions || []\r\nexport const selectConfigurationName = state =>         state.configuration.configuration.name\r\nexport const selectConfigurationDescription = state =>  state.configuration.configuration.description\r\nexport const selectConfigurationImages = state =>       state.configuration.configuration.images\r\n\r\nexport const selectOptions = state =>                   state.configuration.configuration.options\r\nexport const selectOptionGroups = state =>              state.configuration.configuration.optionGroups\r\nexport const selectOptionSections = state =>            state.configuration.configuration.optionSections\r\nexport const selectSelectedOptions = state =>           state.configuration.selectedOptions || []\r\n\r\n\r\nexport const extractModelNameFromModel = model =>           model.name || ''\r\nexport const extractModelDescriptionFromModel = model =>    model.description || ''\r\nexport const extractModelOptionsFromModel = model =>        model.options || []\r\n\r\n// export const getCurrentModel = createSelector([selectModels, selectSelectedModel, selectDefaultModel], (models, selectedModel, defaultModel) => {\r\n//     const modelName = selectedModel ? selectedModel : defaultModel\r\n\r\n//     return models.find(m => m.name === modelName)\r\n// })\r\nexport const getModelOptions = createSelector([selectModels, selectModelName], (models, modelName) => {\r\n    const model = models.find(m => m.name === modelName)\r\n    console.log('model: ', model)\r\n    console.log('model options: ', model.options)\r\n\r\n    return model ? model.options : []\r\n})\r\n\r\nexport const getOptionsInSection = createSelector([selectSectionId, selectOptionGroups, selectOptionSections], (sectionId, groups, sections) => {\r\n    \r\n    // find the specific section\r\n    const section = sections.find(s => s.id === sectionId)\r\n    \r\n    // get all groups in that section\r\n    const groupsInSection = groups.filter(g => section.optionGroupIds.includes(g.id))\r\n\r\n    // get all options from these groups\r\n    let options = []\r\n    groupsInSection.forEach(g => {\r\n        options.push(...g.optionIds)\r\n    })\r\n\r\n    return options\r\n})\r\n\r\nexport const getOption = createSelector([selectOptions, selectOptionId], (options, id) => {\r\n    // console.log('Option output')\r\n    // console.log('---> ' + id)\r\n    return options.find(o => o.id === id)\r\n})\r\nexport const getOptionName = createSelector([getOption, selectOptionId], (option, id) => {\r\n    return option.name\r\n})\r\n\r\n\r\nexport const getIsOptionSelected = createSelector([selectSelectedOptions, selectOptionId], (selectedOptions, id) => {\r\n    // console.log('Is option selected output')\r\n    return selectedOptions.includes(id)\r\n})\r\n\r\n// all options that are in the same replacement group (or null if the option is in no replacement group)\r\nexport const getOptionReplacementGroup = createSelector([selectReplacementGroups, selectOptionId], (replacementGroups, id) => {\r\n    // console.log('Option replacement groups output')\r\n\r\n    for (let groupName of Object.keys(replacementGroups)) {\r\n        const replacementGroup = replacementGroups[groupName]\r\n        if (replacementGroup.includes(id)) {\r\n            return replacementGroup\r\n        }\r\n    }\r\n\r\n    return null\r\n})\r\n\r\n// -- getIsOptionSelectable -->\r\nconst getOptionIncompatibilities = createSelector([selectAllOptionIncompatibilities, selectOptionId], (incompatibilities, optionId) => {\r\n    // console.log('Option Incompatitbilities output')\r\n    return incompatibilities[optionId]\r\n})\r\nconst getIsOptionCompatible = createSelector([selectSelectedOptions, getOptionIncompatibilities], (selectedOptions, incompatibilities) => {\r\n    // returns an array:\r\n    //  -> 1. index: if the option is compatible or not\r\n    //  -> 2. index: options that are incompatible\r\n\r\n    if (!incompatibilities) return [true, null]\r\n\r\n    let compatible = true\r\n    let incompatibleOptions = []\r\n    incompatibilities.forEach(incompatibility => {\r\n        // if there is an incompatibility in the selected options, the option is not compatible\r\n        if (selectedOptions.includes(incompatibility)) {\r\n            compatible = false\r\n            incompatibleOptions.push(incompatibility)\r\n        }\r\n    })\r\n    return [compatible, incompatibleOptions]\r\n})\r\nconst getOptionRequirements = createSelector([selectAllOptionRequirements, selectOptionId], (requirements, optionId) => {\r\n    // console.log('Option Requirements output')\r\n    return requirements[optionId]\r\n})\r\nconst getIsOptionRequirementsMet = createSelector([selectSelectedOptions, getOptionRequirements], (selectedOptions, requirements) => {\r\n    // returns an array:\r\n    //  -> 1. index: if the options requirements are met or not (required options are selected)\r\n    //  -> 2. index: options that are required for this option\r\n\r\n    // console.log('Is option requirements met output')\r\n\r\n    if (!requirements) return [true, null] // if there are no requirements, return true\r\n    \r\n    let reqMet = true\r\n    let requiredOptions = []\r\n    requirements.forEach(requirement => {\r\n        // if there is a requirement not in the selected options, the option does not meet its requirements\r\n        if (!selectedOptions.includes(requirement)) {\r\n            reqMet = false\r\n            requiredOptions.push(requirement)\r\n        }\r\n    })\r\n    return [reqMet, requiredOptions]\r\n})\r\n// returns null ()\r\nexport const getIsOptionSelectable = createSelector([getIsOptionRequirementsMet, getIsOptionCompatible], (isRequirementsMet, isCompatible) => {\r\n    // console.log('Is option selectable output')\r\n\r\n    if (!isRequirementsMet[0])      return [OPTION_ERRORS.requirementsNotMet, isRequirementsMet[1]]//.join(', ') + (isRequirementsMet[1].length > 1 ? ' are ' : ' is ') + 'required!']\r\n    if (!isCompatible[0])           return [OPTION_ERRORS.hasIncompatibilities, isCompatible[1]]//'Not compatible with: ' + isCompatible[1].join(', ')\r\n\r\n    return null\r\n})\r\n// <-- getIsOptionSelectable --\r\n\r\n// -- group logic -->\r\nconst getGroupRequirements = createSelector([selectAllGroupRequirements, selectGroupId], (allRequirements, groupId) => {\r\n    const groupRequirements = allRequirements[groupId]\r\n    if (!groupRequirements) return []\r\n    return groupRequirements\r\n})\r\nconst getGroup = createSelector([selectOptionGroups, selectGroupId], (groups, groupId) => {\r\n    const selectedGroup = groups.find(g => g.id === groupId)\r\n    if (!selectedGroup) {\r\n        console.log('Can not get is group valid because there is no group with the id')\r\n        return null\r\n    }\r\n    return selectedGroup\r\n})\r\n// returns null (no error) or the specific error from 'GROUP_ERRORS'\r\nexport const getIsGroupValid = createSelector([getGroup, getGroupRequirements, selectOptionGroups, selectSelectedOptions], (selectedGroup, requirements, groups, selectedOptions) => {\r\n\r\n    // if the group is not required it is valid\r\n    if (!selectedGroup.required) return null\r\n\r\n    // if the group is required, but one of the required groups is not yet selected, it is also valid\r\n    const requiredGroups = groups.filter(g => requirements.includes(g.id))\r\n    let requirementsMet = true\r\n    requiredGroups.forEach(requirement => {\r\n        let groupSelected = false\r\n        requirement.optionIds.forEach(option => {\r\n            if (selectedOptions.includes(option)) {\r\n                groupSelected = true\r\n            }\r\n        })\r\n        // if just one group that is required for this group has not selected any options -> the requirements are not met\r\n        if (!groupSelected) requirementsMet = false\r\n    })\r\n    // the requirements are not yet selected -> this group is valid (cant select if the requirement is not selected)\r\n    if (!requirementsMet) return null\r\n\r\n    // the group is required and there is no option selected -> error at least has to be selected\r\n    let atLeastOneOptionSelected = false\r\n    selectedGroup.optionIds.forEach(option => {\r\n        if (selectedOptions.includes(option)) {\r\n            atLeastOneOptionSelected = true\r\n        }\r\n    })\r\n    if (!atLeastOneOptionSelected) {\r\n        return GROUP_ERRORS.atLeastOne\r\n    }\r\n\r\n    return null\r\n})\r\n// <-- group logic --\r\n\r\nexport const getOptionPrice = createSelector([selectPriceList, selectOptionId], (priceList, id) => {\r\n    // console.log('Option price output')\r\n    return priceList[id]\r\n})\r\n\r\n// the total price of all selected options plus the base price\r\nexport const getCurrentPrice = createSelector([selectSelectedOptions, selectBasePrice, selectPriceList], (selectedOptions, basePrice, priceList) => {\r\n    // console.log('Current Price output')\r\n\r\n    const price = selectedOptions.reduce((total, optionId) => {\r\n        if (priceList[optionId]) {\r\n            return total + priceList[optionId]\r\n        } else {\r\n            return total\r\n        }\r\n    }, basePrice)\r\n\r\n    return price\r\n})\r\n\r\n// the options that cant be used if this option is deselected\r\nexport const getDependentOptionsDeselect = createSelector(\r\n    [selectSelectedOptions, selectOptionId, selectAllOptionRequirements], \r\n    (selectedOptions, selectedOptionId, requirements) => {\r\n\r\n    let dependencies = dependenciesFromDependencyLists(selectedOptionId, requirements)\r\n\r\n    // only get the dependencies from the selected options\r\n    dependencies = dependencies.filter(d => selectedOptions.includes(d))\r\n\r\n    return dependencies\r\n})\r\n// the options that cant be used if this option selected\r\nexport const getDependentOptionsSelect = createSelector(\r\n    [selectSelectedOptions, selectOptionId, selectAllOptionIncompatibilities], \r\n    (selectedOptions, selectedOptionId, incompatibilities) => {\r\n\r\n    let dependencies = dependenciesFromDependencyLists(selectedOptionId, incompatibilities)\r\n    \r\n    // only get the dependencies from the selected options\r\n    dependencies = dependencies.filter(d => selectedOptions.includes(d))\r\n\r\n    return dependencies\r\n})\r\nfunction dependenciesFromDependencyLists(dependentOption, ...dependencyLists) {\r\n    let dependencies = []\r\n\r\n    // for every dependency list\r\n    for (const dependencyList of dependencyLists) {\r\n\r\n        // for every dependency in the dependency list\r\n        for (const dependency in dependencyList) {\r\n            // check if the dependent option is included in the dependencies\r\n            if (dependencyList[dependency].includes(dependentOption)) {\r\n                // add the dependency (the option that depends on the dependentOption)\r\n                dependencies.push(dependency)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    return dependencies\r\n}","import { Typography } from '@mui/material'\r\nimport { green, red } from '@mui/material/colors'\r\nimport { Box } from '@mui/system'\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { getOption } from '../../../../state/configuration/configurationSelectors'\r\n\r\nfunction OptionListItem({ optionId, highlight, name, description, image }) {\r\n    let bgCol = 'none'\r\n    if (highlight === 'add')    bgCol = green[500]\r\n    if (highlight === 'remove') bgCol = red[500]\r\n    \r\n    return (\r\n        <Box padding={1} margin={1} sx={{backgroundColor: bgCol}}>\r\n            <Typography variant=\"body1\">{name}</Typography>\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    const option = getOption(state, ownProps.optionId)\r\n    return {\r\n        name: option.name,\r\n        description: option.description,\r\n        image: option.image\r\n    }\r\n}\r\nconst mapDispatchToProps = {}\r\nexport default connect(\r\n    mapStateToProps, \r\n    mapDispatchToProps\r\n)(OptionListItem)\r\n","import React from 'react'\r\nimport Button from '@mui/material/Button'\r\nimport Dialog from '@mui/material/Dialog'\r\nimport DialogActions from '@mui/material/DialogActions'\r\nimport DialogContent from '@mui/material/DialogContent'\r\nimport DialogContentText from '@mui/material/DialogContentText'\r\nimport DialogTitle from '@mui/material/DialogTitle'\r\nimport { selectConfirmDialogData, selectConfirmDialogMessage, selectIsConfirmDialogOpen } from '../../state/confirmationDialog/confirmationSelectors'\r\nimport { connect } from 'react-redux'\r\nimport { confirmDialogCancel, confirmDialogConfirm, confirmDialogGetBody } from '../../state/confirmationDialog/confirmationSlice'\r\nimport { translate } from '../../lang'\r\nimport { selectLanguage } from '../../state/language/languageSelectors'\r\nimport { Grid, Typography } from '@mui/material'\r\nimport OptionListItem from '../configuration/Configurator/Options/OptionListItem'\r\nimport { Box } from '@mui/system'\r\n\r\nfunction ConfirmationOptionSelect({ isOpen, message, content, optionsToSelect, optionsToRemove, selectedOption, deselectedOption, cancel, confirm, text }) {\r\n    \r\n    if (!optionsToSelect) optionsToSelect = []\r\n    if (!optionsToRemove) optionsToRemove = []\r\n\r\n    function handleClose() {\r\n        cancel()\r\n    }\r\n\r\n    function handleConfirm() {\r\n        confirm()\r\n    }\r\n\r\n    function renderDialogContent() {\r\n        if (optionsToSelect.length > 0 || optionsToRemove.length > 0) {\r\n            return (\r\n                <div>\r\n                    <Box marginBottom={2}>\r\n                        {renderDialogContentHeader()}\r\n                    </Box>\r\n                    {renderDialogContentOptions(optionsToSelect)}\r\n                    {renderDialogContentOptions(optionsToRemove, false)}\r\n                </div>\r\n            )\r\n        }\r\n        return (\r\n            <>\r\n                <DialogContentText>\r\n                    {message}\r\n                </DialogContentText>\r\n                {content}\r\n            </>\r\n        )\r\n    }\r\n    function renderDialogContentHeader() {\r\n        return (\r\n            <>\r\n                <Typography variant=\"body1\">\r\n                    {selectedOption ? \r\n                        `${text.youWantToSelect}: `\r\n                        :\r\n                        `${text.youWantToRemove}: `\r\n                    }\r\n\r\n                </Typography>\r\n                <Grid container justifyContent=\"center\">\r\n                    <OptionListItem optionId={selectedOption || deselectedOption} highlight=\"add\"></OptionListItem>\r\n                </Grid>\r\n            </>\r\n        )\r\n    }\r\n    function renderDialogContentOptions(options, selected = true) {\r\n        if (options.length > 0) {\r\n            return (\r\n                <Box>\r\n                    <Typography variant=\"body1\">\r\n                        {selected ? \r\n                            `${text.youAlsoNeedToSelect}: `\r\n                            :\r\n                            `${text.theseOptionsWillBeRemoved}: `\r\n                        }\r\n                    </Typography>\r\n                    <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"center\">\r\n                        {options.map(optionId => (\r\n                            <OptionListItem key={optionId} optionId={optionId} highlight={selected ? 'add' : 'remove'}></OptionListItem>\r\n                        ))}\r\n                    </Grid>\r\n                </Box>\r\n            )\r\n        }\r\n        return ''\r\n    }\r\n\r\n\r\n    return (\r\n        <Dialog\r\n            open={isOpen}\r\n            onClose={handleClose}\r\n            scroll=\"paper\"\r\n            aria-labelledby=\"responsive-dialog-title\"\r\n            fullWidth\r\n        >\r\n            <DialogTitle id=\"responsive-dialog-title\">\r\n                {text.confirmationPrompt}\r\n            </DialogTitle>\r\n\r\n            <DialogContent dividers={true}>\r\n                {renderDialogContent()}\r\n            </DialogContent>\r\n\r\n            <DialogActions>\r\n                <Button autoFocus onClick={handleClose}>\r\n                    {text.cancel}\r\n                </Button>\r\n                <Button autoFocus onClick={handleConfirm}>\r\n                    {text.confirm}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    const language = selectLanguage(state)\r\n    return {\r\n        content: confirmDialogGetBody(),\r\n        message: selectConfirmDialogMessage(state),\r\n        isOpen: selectIsConfirmDialogOpen(state),\r\n        selectedOption: selectConfirmDialogData(state).selected,\r\n        deselectedOption: selectConfirmDialogData(state).deselected,\r\n        optionsToSelect: selectConfirmDialogData(state).optionsToSelect,\r\n        optionsToRemove: selectConfirmDialogData(state).optionsToRemove,\r\n        text: {\r\n            cancel: translate('cancel', language),\r\n            confirm: translate('confirm', language),\r\n            confirmationPrompt: translate('confirmationPrompt', language),\r\n            youWantToSelect: translate('youWantToSelect', language),\r\n            youWantToRemove: translate('youWantToRemove', language),\r\n            theseOptionsWillBeRemoved: translate('theseOptionsWillBeRemoved', language),\r\n            youAlsoNeedToSelect: translate('youAlsoNeedToSelect', language)\r\n        }\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    cancel: confirmDialogCancel,\r\n    confirm: confirmDialogConfirm,\r\n\r\n    // cancel: useConfirmationDialog.cancel,\r\n    // confirm: useConfirmationDialog.confirm,\r\n\r\n    // openedDialog: openConfirmDialog,\r\n    // closedDialog: closeConfirmDialog\r\n}\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ConfirmationOptionSelect)","import { Button, Checkbox, Dialog, DialogActions, DialogContent, DialogTitle, FormControlLabel, TextField } from '@mui/material'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { translate } from '../../lang'\r\nimport { selectInputDialogData, selectInputDialogHeaderMessage, selectIsInputDialogOpen } from '../../state/inputDialog/inputDialogSelectors'\r\nimport { inputDialogCancel, inputDialogConfirm, inputDialogSetData } from '../../state/inputDialog/inputDialogSlice'\r\nimport { selectLanguage } from '../../state/language/languageSelectors'\r\n\r\nfunction InputDialog({ isOpen, dialogTitle, inputData, cancel, confirm, setInputData, text }) {\r\n    \r\n    const [localData, setLocalData] = useState({...inputData})\r\n    useEffect(() => {\r\n        setLocalData({...inputData})\r\n    }, [inputData])\r\n\r\n    function valuesChanged(key, value) {\r\n        setLocalData(prevData => ({\r\n            ...prevData,\r\n            [key]: {\r\n                ...prevData[key],\r\n                value // data[key][value]\r\n            }\r\n        }))\r\n    }\r\n    \r\n    function handleClose() {\r\n        cancel()\r\n    }\r\n\r\n    function handleConfirm() {\r\n        // check if every field has an input\r\n        let valid = true\r\n        for (const key in localData) {\r\n            if (!localData[key].value && !localData[key].isCheckBox) valid = false\r\n        }\r\n        if (!valid) return\r\n\r\n        setInputData(localData)\r\n        confirm()\r\n    }\r\n\r\n    function renderInputField(inputdata, key, index) {\r\n        const data = inputdata[key]\r\n\r\n        if (data.isCheckBox) {\r\n            return (\r\n                <FormControlLabel\r\n                    key={index}\r\n                    label={data.name}\r\n                    labelPlacement=\"start\"\r\n                    control={\r\n                        <Checkbox\r\n                            checked={localData[key].value}\r\n                            onChange={(event) => {\r\n                                valuesChanged(key, !localData[key].value)\r\n                            }}\r\n                        />\r\n                    }\r\n                />\r\n            )\r\n        }\r\n        return (\r\n            <TextField\r\n                key={index}\r\n                autoFocus\r\n                autoComplete={inputData[key].isPassword ? \"current-password\" : \"text\"}\r\n                margin=\"dense\"\r\n                label={inputData[key].name}\r\n                type={inputData[key].isEmail ? 'email' : inputData[key].isPassword ? 'password' : 'text'}\r\n                fullWidth\r\n                variant=\"standard\"\r\n                value={localData[key].value}\r\n                error={!localData[key].value}\r\n                onChange={(event) => valuesChanged(key, event.target.value)}\r\n            />\r\n        )\r\n    }\r\n\r\n    function renderDialogContent() {\r\n        // if there is no data (or not yet), return no content\r\n        if (Object.keys(localData).length === 0) return (<></>)\r\n\r\n        return (\r\n            <form>\r\n                {Object.keys(inputData).map((key, index) => {\r\n                    return renderInputField(inputData, key, index)\r\n                })}\r\n            </form>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Dialog\r\n                open={isOpen}\r\n                onClose={handleClose}\r\n                scroll=\"paper\"\r\n                aria-labelledby=\"responsive-dialog-title\"\r\n            >\r\n                <DialogTitle id=\"responsive-dialog-title\">\r\n                    {dialogTitle}\r\n                </DialogTitle>\r\n\r\n                <DialogContent dividers={true}>\r\n                    {renderDialogContent()}\r\n                </DialogContent>\r\n\r\n                <DialogActions>\r\n                    <Button autoFocus onClick={handleClose}>\r\n                        {text.cancel}\r\n                    </Button>\r\n                    <Button autoFocus onClick={handleConfirm}>\r\n                        {text.submit}\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    const language = selectLanguage(state)\r\n    return {\r\n        inputData: selectInputDialogData(state),\r\n        isOpen: selectIsInputDialogOpen(state),\r\n        dialogTitle: selectInputDialogHeaderMessage(state), // already translated\r\n        text: { // so that the text is not translated at every render\r\n            cancel: translate('cancel', language),\r\n            submit: translate('submit', language),\r\n        }\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    cancel: inputDialogCancel,\r\n    confirm: inputDialogConfirm,\r\n    setInputData: inputDialogSetData\r\n}\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(InputDialog)","import { alertStatus } from './alertSlice'\r\n\r\nexport const selectIsAlertOpen = (state) =>         state.alert.status === alertStatus.OPEN\r\nexport const selectCurrentAlert = (state) =>        state.alert.alerts[0]","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { selectCurrentAlert, selectIsAlertOpen } from '../../state/alert/alertSelectors'\r\nimport { closeAlert } from '../../state/alert/alertSlice'\r\nimport Swal from 'sweetalert2'\r\n\r\nfunction GenericAlert({ isOpen, alert, close }) {\r\n\r\n    // Alert settings\r\n    const Toast = Swal.mixin({\r\n        toast: true,\r\n        position: 'top-end',\r\n        showConfirmButton: false,\r\n        timer: 3000,\r\n        timerProgressBar: true,\r\n        didOpen: (toast) => {\r\n            toast.addEventListener('mouseenter', Swal.stopTimer)\r\n            toast.addEventListener('mouseleave', Swal.resumeTimer)\r\n        },\r\n        didClose: () => {\r\n            close()\r\n        }\r\n    })\r\n\r\n    const renderAlert = () => {\r\n        // dont fire an alert, if the alert is not open, there is no alert data or the alert is already visible\r\n        if (!isOpen)            return\r\n        if (!alert)             return\r\n        if (Toast.isVisible())  return\r\n\r\n        Toast.fire({\r\n            icon: alert.type,\r\n            title: alert.message\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {renderAlert()}\r\n        </div>\r\n    )\r\n}\r\nconst mapStateToProps = (state) => ({\r\n    isOpen: selectIsAlertOpen(state),\r\n    alert: selectCurrentAlert(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    close: closeAlert\r\n}\r\nexport default connect(\r\n    mapStateToProps, \r\n    mapDispatchToProps\r\n)(GenericAlert)\r\n","export const selectProducts = state =>                      state.product.products\r\nexport const selectProductError = state =>                  state.product.error\r\nexport const selectProductStatus = state =>                 state.product.status\r\n\r\nexport const extractIdFromProduct = product =>              product.configId\r\nexport const extractNameFromProduct = product =>            product.name\r\nexport const extractDescriptionFromProduct = product =>     product.description\r\nexport const extractImagesFromProduct = product =>          product.images","import React from 'react'\r\nimport { ImageListItem, ImageListItemBar } from '@mui/material'\r\nimport { useNavigate } from 'react-router'\r\nimport { extractDescriptionFromProduct, extractIdFromProduct, extractImagesFromProduct, extractNameFromProduct } from '../../state/product/productSelector'\r\nimport { getImageSource } from '../../App'\r\n\r\nexport default function Product({ product }) {\r\n    const navigate = useNavigate()\r\n\r\n    const configId = extractIdFromProduct(product)\r\n    const name = extractNameFromProduct(product)\r\n    const description = extractDescriptionFromProduct(product)\r\n    const images = extractImagesFromProduct(product)\r\n\r\n    const image = images[0]\r\n\r\n    const imageSource = getImageSource(image)\r\n    \r\n    function handleClick() {\r\n        console.log(`clicked on: ${name} (id ${configId})`)\r\n        navigate(`/configuration/${configId}`)\r\n    }\r\n\r\n    return (\r\n        <ImageListItem key={imageSource} sx={{width: '100%', ':hover': {cursor: 'pointer'}}} onClick={handleClick}>\r\n            <img\r\n                width=\"100%\"\r\n                src={`${imageSource}?w=248&fit=crop&auto=format`}\r\n                srcSet={`${imageSource}?w=248&fit=crop&auto=format&dpr=2 2x`}\r\n                alt={name}\r\n                loading=\"lazy\"\r\n            />\r\n            <ImageListItemBar\r\n                title={name}\r\n                subtitle={description}\r\n            />\r\n        </ImageListItem>\r\n    )\r\n}","import axios from 'axios'\r\nimport { baseURL, LOCAL_DATA } from './general'\r\n\r\nexport const fetchAll = () => {\r\n    if (LOCAL_DATA) {\r\n        return fetchApiTest()\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n        axios.get(`${baseURL}/products`)\r\n        .then(res => {\r\n            if (!res.data) {\r\n                console.log('no response data')\r\n                resolve([])\r\n            }\r\n            console.log(res.data)\r\n            resolve(res.data)\r\n        })\r\n        .catch(err => {\r\n            console.log(err.toString())\r\n            reject(err.toString())\r\n        })\r\n    })\r\n}\r\n\r\nexport const postOrderConfiguredProduct = (configurationId, name, selectedOptions, price, model = '') => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (LOCAL_DATA) {\r\n            reject('Ordering not available in test mode!')\r\n            // resolve()\r\n        }\r\n        \r\n\r\n        const data = {\r\n            configurationName: name,\r\n            options: selectedOptions,\r\n            price: price,\r\n            model\r\n        }\r\n        console.log(data)\r\n\r\n        axios.post(`${baseURL}/products/${configurationId}`, data)\r\n        .then(res => {\r\n            resolve(res.data)\r\n        })\r\n        .catch(err => {\r\n            reject('API not reachable')\r\n        })\r\n\r\n    })\r\n}\r\n\r\n\r\n// A mock function to mimic making an async request for data\r\nfunction fetchApiTest(amount = products.length) {\r\n    return new Promise((resolve, reject) =>\r\n        // setTimeout(() => reject('AUTHENTICATION_FAILED'), 500)\r\n        setTimeout(() => resolve(products), 500)\r\n    )\r\n}\r\n\r\nconst products = [\r\n    {\r\n        configId: '0',\r\n        name: 'Car',\r\n        description: 'a next generation automobile',\r\n        images: ['vw-golf-r-2021.jpg']\r\n    },\r\n    {\r\n        configId: 1,\r\n        name: 'Computer',\r\n        description: 'high end computer',\r\n        images: ['Computer0.jpg']\r\n    },\r\n    {\r\n        configId: 2,\r\n        name: 'watch',\r\n        description: 'entry level watch',\r\n        images: ['Watch0.jpg']\r\n    },\r\n    {\r\n        configId: 3,\r\n        name: 'watch',\r\n        description: 'entry level watch',\r\n        images: ['Watch0.jpg']\r\n    },\r\n    {\r\n        configId: 4,\r\n        name: 'watch',\r\n        description: 'entry level watch',\r\n        images: ['Watch0.jpg']\r\n    },\r\n    {\r\n        configId: 5,\r\n        name: 'Computer',\r\n        description: 'high end computer',\r\n        images: ['Computer0123.jpg']\r\n    }\r\n]","import { createSlice } from '@reduxjs/toolkit'\r\nimport { fetchAll } from '../../api/productsAPI'\r\nimport { alertTypes, openAlert } from '../alert/alertSlice'\r\n\r\nconst initialState = {\r\n    products: [],\r\n    status: 'idle', // | 'loading' | 'succeeded' | 'failed'\r\n    error: null\r\n}\r\n\r\nexport const productSlice = createSlice({\r\n    name: 'product',\r\n    initialState,\r\n    reducers: {\r\n        loadingStarted: (state) => {\r\n            console.log('fetching products...')\r\n            state.status = 'loading'\r\n        },\r\n        loadingSucceeded: (state, action) => {\r\n            console.log('products loaded:', action.payload)\r\n            state.status = 'succeeded'\r\n            state.products = action.payload\r\n        },\r\n        loadingFailed: (state, action) => {\r\n            console.log('products loading failed:', action.payload)\r\n            state.status = 'failed'\r\n            state.error = action.payload\r\n        }\r\n    }\r\n})\r\n\r\nexport const fetchProducts = () => async (dispatch) => {\r\n    dispatch(loadingStarted())\r\n\r\n    fetchAll()\r\n    .then(res => {\r\n        dispatch(loadingSucceeded(res))\r\n    })\r\n    .catch(err => {\r\n        dispatch(openAlert(err, alertTypes.ERROR))\r\n        dispatch(loadingFailed(err))\r\n    })\r\n}\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const { loadingStarted, loadingSucceeded, loadingFailed } = productSlice.actions\r\n\r\nexport default productSlice.reducer","import { Typography } from '@mui/material'\r\nimport React from 'react'\r\n\r\nexport default function Loader() {\r\n    return (\r\n        <div>\r\n            <Typography variant=\"h2\">\r\n                Loading...\r\n            </Typography>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport Product from './Product'\r\nimport { connect } from 'react-redux'\r\nimport { Grid, Typography } from '@mui/material'\r\nimport { fetchProducts } from '../../state/product/productSlice'\r\nimport { selectProductError, selectProducts, selectProductStatus } from '../../state/product/productSelector'\r\nimport { selectLanguage } from '../../state/language/languageSelectors'\r\nimport { translate } from '../../lang'\r\nimport Loader from '../Loader'\r\n\r\nfunction ProductView({ products = [], status, error, fetchProducts, language }) {\r\n\r\n    const isEmpty = products.length === 0 ? true : false\r\n\r\n    useEffect(() => {\r\n        if (isEmpty) {\r\n            console.log('calling to fetch products...')\r\n            fetchProducts()\r\n        }\r\n    }, [fetchProducts, isEmpty])\r\n\r\n    function render() {\r\n        switch (status) {\r\n            case 'loading':\r\n                return renderLoadingProducts()\r\n            case 'succeeded':\r\n                return (isEmpty ? renderEmptyProducts() : renderProducts())\r\n            case 'failed':\r\n                return renderApiFailed(error)\r\n            default:\r\n                return renderLoadingProducts()\r\n        }\r\n    }\r\n\r\n    function renderLoadingProducts() {\r\n        return (\r\n            <Loader></Loader>\r\n        )\r\n    }\r\n\r\n    function renderEmptyProducts() {\r\n        return (\r\n            <Typography variant=\"h2\">{translate('noProductsFound', language)}</Typography>\r\n        )\r\n    }\r\n    function renderProducts() {\r\n        return (\r\n            <Grid container columns={12} spacing={2} sx={{paddingTop: 2, marginRight: 4}}>\r\n                {products.map((product, index) => (\r\n                    <Grid item sm={12} md={6} lg={4} xl={3} width=\"100%\" key={index}>\r\n                        <Product product={product}></Product>\r\n                    </Grid>\r\n                ))}\r\n            </Grid>\r\n        )\r\n    }\r\n\r\n    function renderApiFailed(errorMessage) {\r\n        return (\r\n            <div>\r\n                <Typography variant=\"h2\">{translate('failedToLoadProducts', language)}</Typography>\r\n                <Typography variant=\"body1\">{translate(errorMessage, language)}</Typography>\r\n            </div>\r\n        )\r\n    }\r\n    \r\n    return (\r\n        render()\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    products: selectProducts(state),\r\n    status: selectProductStatus(state),\r\n    error: selectProductError(state),\r\n    language: selectLanguage(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    fetchProducts\r\n}\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ProductView)","import axios from 'axios'\r\nimport { baseURL, LOCAL_DATA } from './general'\r\n\r\nexport const fetchId = (productId) => {\r\n    if (LOCAL_DATA) {\r\n        return fetchApiTest(productId)\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n        axios.get(`${baseURL}/configuration/${productId}`)\r\n        \r\n        // axios.get(`${baseURL}/configuration/Golf`)\r\n        .then(res => {\r\n            resolve(res.data)\r\n        })\r\n        .catch(err => {\r\n            reject(err.toString())\r\n        })\r\n    })\r\n}\r\n\r\nexport const postConfiguration = (newConfiguration) => {\r\n    return new Promise((resolve, reject) => {\r\n        if (LOCAL_DATA) {\r\n            reject('Posting a new configuration not available in test mode!')\r\n            return\r\n        }\r\n\r\n        const data = {\r\n            ...newConfiguration\r\n        }\r\n        console.log(data)\r\n        axios.post(`${baseURL}/configuration`, data)\r\n        .then(res => {\r\n            resolve(res.data)\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n            reject('Api unreachable')\r\n        })\r\n    })\r\n}\r\n\r\n// A mock api request function to mimic making an async request for data\r\nconst testDelay = 0;\r\nfunction fetchApiTest(configId) {\r\n    return new Promise((resolve, reject) =>\r\n        setTimeout(() => {\r\n\r\n            const conf = configurations.find(c => c.configId === configId)\r\n            if (!conf) {\r\n                reject('NO_CONFIGURATION_FOUND')\r\n                return\r\n            }\r\n            else if (!conf.options || !conf.optionGroups || !conf.optionSections || !conf.rules) {\r\n                reject('CONFIGURATION_INVALID')\r\n                return\r\n            }\r\n\r\n            resolve(conf)\r\n\r\n        }, testDelay)\r\n    )\r\n}\r\n\r\nconst configurations = [\r\n    {\r\n        configId: '0',\r\n        name: 'Car',\r\n        description: 'automobile',\r\n        images: [], // 'vw-golf-r-2021.jpg', 'vw-golf-r-2021.jpg', 'vw-golf-r-2021.jpg'\r\n        options: [\r\n            {\r\n                id: 'BLUE',\r\n                name: 'Blue',\r\n                description: 'A blue color',\r\n            },\r\n            {\r\n                id: 'YELLOW',\r\n                name: 'Yellow',\r\n                description: 'A yellow color',\r\n            },\r\n            {\r\n                id: 'GREEN',\r\n                name: 'Green',\r\n                description: 'A green color',\r\n            },\r\n            {\r\n                id: 'DIESEL',\r\n                name: 'Diesel Motor',\r\n                description: 'a motor driven by diesel fuel',\r\n            },\r\n            {\r\n                id: 'PETROL',\r\n                name: 'Petrol Motor',\r\n                description: 'a motor driven by petrol fuel',\r\n            },\r\n            {\r\n                id: 'D150',\r\n                name: '150 PS Diesel Motor',\r\n                description: 'a diesel V4 motor with 150 PS',\r\n            },\r\n            {\r\n                id: 'D250',\r\n                name: '250 PS Diesel Motor',\r\n                description: 'a diesel V6 motor with 250 PS',\r\n            },\r\n            {\r\n                id: 'P220',\r\n                name: '220 PS Petrol Motor',\r\n                description: 'a petrol V6 motor with 220 PS',\r\n            },\r\n            {\r\n                id: 'P450',\r\n                name: '450 PS Petrol Motor',\r\n                description: 'a petrol V8 motor with 450 PS',\r\n            },\r\n            {\r\n                id: 'PANORAMAROOF',\r\n                name: 'Panoramic Roof',\r\n                description: 'a glass roof for an open feeling',\r\n            },\r\n            {\r\n                id: 'PANORAMASMALL',\r\n                name: 'Small Panorama',\r\n                description: 'a small glass roof',\r\n            },\r\n            {\r\n                id: 'PANORAMALARGE',\r\n                name: 'Large Panorama',\r\n                description: 'a large glass roof for an amazing open feeling',\r\n            },\r\n            {\r\n                id: 'HEATED_SEATS',\r\n                name: 'Heated Seats',\r\n                description: 'the two seats in the front can be heated',\r\n            }, \r\n            {\r\n                id:  'HIGH_QUALITY_SOUND_SYSTEM',\r\n                name: 'High Quality Sound System',\r\n                description: 'premium sound system with high res audio',\r\n            }, \r\n            {\r\n                id: 'DRIVE_ASSISTENCE',\r\n                name: 'Drive Assistence',\r\n                description: 'extra driving assistence including cruise control, adaptive cruise control and a lane keeping assistent',\r\n            }\r\n        ],\r\n        optionSections: [\r\n            {\r\n                id: 'EXTERIOR',\r\n                name: 'Exterior',\r\n                optionGroupIds: [\r\n                    'COLOR_GROUP'\r\n                ]\r\n            },\r\n            {\r\n                id: 'MOTOR_SECTION',\r\n                name: 'Motor',\r\n                optionGroupIds: [\r\n                    'MOTORTYPE_GROUP', 'MOTOR_GROUP'\r\n                ]\r\n            },\r\n            {\r\n                id: 'PANORAMA_SECTION',\r\n                name: 'Panorama',\r\n                optionGroupIds: [\r\n                    'PANORAMA_GROUP', 'PANORAMATYPE_GROUP'\r\n                ]\r\n            },\r\n            {\r\n                id: 'EXTRAS',\r\n                name: 'Extras',\r\n                optionGroupIds: [\r\n                    'EXTRAS_GROUP'\r\n                ]\r\n            }\r\n        ],\r\n        optionGroups: [\r\n            {\r\n                id: 'COLOR_GROUP',\r\n                name: 'Color',\r\n                description: 'the exterior color of the car',\r\n                optionIds: [\r\n                    'BLUE', 'YELLOW', 'GREEN'\r\n                ],\r\n                required: true\r\n            },\r\n            {\r\n                id: 'MOTORTYPE_GROUP',\r\n                name: 'Motor type',\r\n                description: 'type of your motor',\r\n                optionIds: [\r\n                    'DIESEL', 'PETROL'\r\n                ],\r\n                required: true\r\n            },\r\n            {\r\n                id: 'MOTOR_GROUP',\r\n                name: 'Motor',\r\n                description: 'specific motor',\r\n                optionIds: [\r\n                    'D150', 'D250', 'P220', 'P450'\r\n                ],\r\n                required: true\r\n            },\r\n            {\r\n                id: 'PANORAMA_GROUP',\r\n                name: 'Panoramic Roof',\r\n                description: 'a glass roof for an open feeling',\r\n                optionIds: [\r\n                    'PANORAMAROOF'\r\n                ],\r\n                required: false\r\n            },\r\n            {\r\n                id: 'PANORAMATYPE_GROUP',\r\n                name: 'Panoramic Roof type',\r\n                description: 'size of your panorama roof',\r\n                optionIds: [\r\n                    'PANORAMASMALL', 'PANORAMALARGE'\r\n                ],\r\n                required: true\r\n            },\r\n            {\r\n                id: 'EXTRAS_GROUP',\r\n                name: 'Extras',\r\n                description: 'Additional Features For Your Car',\r\n                optionIds: [\r\n                    'HEATED_SEATS', 'HIGH_QUALITY_SOUND_SYSTEM', 'DRIVE_ASSISTENCE'\r\n                ],\r\n                required: false\r\n            }\r\n        ],\r\n        rules: {\r\n            basePrice: 10000,\r\n            // defaultOptions: [],\r\n            // defaultOptions: ['BLUE', 'DIESEL', 'D150'],\r\n\r\n            defaultModel: 'Golf',\r\n            models: [\r\n                {\r\n                    name: 'Golf',\r\n                    options: ['BLUE', 'DIESEL', 'D150', 'DRIVE_ASSISTENCE'],\r\n                    description: \"base model of this car\"\r\n                },\r\n                {\r\n                    name: 'Golf GTI',\r\n                    options: ['YELLOW', 'PETROL', 'P220', 'HEATED_SEATS', 'HIGH_QUALITY_SOUND_SYSTEM'],\r\n                    description: \"advanced model\"\r\n                }\r\n            ],\r\n            replacementGroups: {\r\n                COLOR_GROUP: [\r\n                    'BLUE', 'YELLOW', 'GREEN'\r\n                ],\r\n                MOTORTYPE_GROUP: [\r\n                    'DIESEL', 'PETROL'\r\n                ],\r\n                MOTOR_GROUP: [\r\n                    'D150', 'D250', 'P220', 'P450'\r\n                ],\r\n                PANORAMATYPE_GROUP: [\r\n                    'PANORAMASMALL', 'PANORAMALARGE'\r\n                ]\r\n            },\r\n            groupRequirements: {\r\n                PANORAMATYPE_GROUP: ['PANORAMA_GROUP'],\r\n                MOTOR_GROUP: ['MOTORTYPE_GROUP']\r\n            },\r\n            requirements: {\r\n                D150: ['DIESEL'],\r\n                D250: ['DIESEL'],\r\n                P220: ['PETROL'],\r\n                P450: ['PETROL'],\r\n                PANORAMASMALL: ['PANORAMAROOF'],\r\n                PANORAMALARGE: ['PANORAMAROOF']\r\n            },\r\n            incompatibilities: {\r\n                PANORAMAROOF: ['PETROL'],\r\n                PANORAMASMALL: ['BLUE']\r\n            },\r\n            priceList: {\r\n                D150: 8000,\r\n                D250: 11000,\r\n                P220: 9000,\r\n                P450: 16000,\r\n                YELLOW: 200,\r\n                GREEN: 500,\r\n                PANORAMAROOF: 2000,\r\n                PANORAMALARGE: 500,\r\n                HEATED_SEATS: 500, \r\n                HIGH_QUALITY_SOUND_SYSTEM: 250,\r\n                DRIVE_ASSISTENCE: 1500\r\n            }\r\n        }\r\n    },\r\n    {\r\n        configId: '1',\r\n        images: [],\r\n        options: [\r\n            {\r\n                id: 'ALLOY19',\r\n                name: 'ALLOY19',\r\n                description: 'ALLOY19',\r\n                groupId: 'WHEELS'\r\n            },\r\n            {\r\n                id: 'STEEL16',\r\n                name: 'STEEL16',\r\n                description: 'STEEL16',\r\n                groupId: 'WHEELS'\r\n            },\r\n            {\r\n                id: 'RED',\r\n                name: 'RED',\r\n                description: 'RED',\r\n                groupId: 'COLOR_GROUP'\r\n            },\r\n            {\r\n                id: 'BLUE',\r\n                name: 'BLUE',\r\n                description: 'RED',\r\n                groupId: 'COLOR_GROUP'\r\n            }\r\n        ],\r\n        optionSections: [\r\n            {\r\n                id: 'EXTERIOR',\r\n                optionGroupIds: [\r\n                    'WHEELS', 'COLOR_GROUP'\r\n                ]\r\n            }\r\n        ],\r\n        optionGroups: [\r\n            {\r\n                id: 'WHEELS',\r\n                name: 'WHEELS',\r\n                description: 'WHEELS',\r\n                optionIds: [\r\n                    'ALLOY19', 'STEEL16'\r\n                ],\r\n                required: true,\r\n                replacement: true\r\n            },\r\n            {\r\n                id: 'COLOR_GROUP',\r\n                name: 'COLOR_GROUP',\r\n                description: 'Desc',\r\n                optionIds: [\r\n                    'BLUE', 'RED'\r\n                ],\r\n                required: false,\r\n                replacement: false\r\n            }\r\n        ],\r\n        rules: {\r\n            basePrice: 500,\r\n            // defaultOptions: [/*BLUE*/],\r\n            defaultModel: '',\r\n            models: [\r\n                {\r\n                    id: 'Sport',\r\n                    name: 'Sport',\r\n                    description: 'Desc',\r\n                    options: ['ALLOY19', 'RED'],\r\n                },\r\n                {\r\n                    id: 'Basic',\r\n                    name: 'Basic',\r\n                    description: 'Desc',\r\n                    options: ['STEEL16', 'BLUE'],\r\n                }\r\n            ],\r\n            // replacementGroups: {\r\n            //     // COLOR_GROUP: [\r\n            //     //     'BLUE'\r\n            //     // ]\r\n            // },\r\n            groupRequirements: {\r\n                // PANORAMATYPE_GROUP: ['PANORAMA_GROUP']\r\n                COLOR_GROUP: ['WHEELS'],\r\n                WHEELS: ['COLOR_GROUP']\r\n            },\r\n            requirements: {\r\n                BLUE: ['STEEL16'],\r\n                ALLOY19: ['RED']\r\n            },\r\n            incompatibilities: {\r\n                // PANORAMAROOF: ['PETROL']\r\n                BLUE: ['ALLOY19'],\r\n                STEEL16: ['RED']\r\n            },\r\n            priceList: {\r\n                'BLUE': 200\r\n            }\r\n        }\r\n    }\r\n]","import { createSlice } from '@reduxjs/toolkit'\r\nimport { fetchId } from '../../api/configurationAPI'\r\nimport { readFromLocalStorage, writeToLocalStorage } from '../../App'\r\nimport { alertTypes, openAlert } from '../alert/alertSlice'\r\nimport { confirmDialogOpen } from '../confirmationDialog/confirmationSlice'\r\nimport { extractModelNameFromModel, extractModelOptionsFromModel, getDependentOptionsDeselect, getDependentOptionsSelect, getIsOptionSelected, getModelOptions, getOptionName, getOptionReplacementGroup, selectConfigurationId, selectDefaultModel, selectModels, selectSelectedOptions } from './configurationSelectors'\r\n\r\n// const openDialog = useConfirmationDialog.open\r\n\r\nconst initialState = {\r\n    configuration: {},\r\n    selectedOptions: [],\r\n    selectedModel: '',\r\n    status: 'idle', // | 'loading' | 'succeeded' | 'failed'\r\n    error: null\r\n}\r\n\r\nexport const configurationSlice = createSlice({\r\n    name: 'configuration',\r\n    initialState,\r\n    reducers: {\r\n        selectOption: (state, action) => {\r\n            if (!state.selectedOptions.includes(action.payload)) {\r\n                // console.log('selecting option', action.payload)\r\n                state.selectedOptions.push(action.payload)\r\n            }\r\n        },\r\n        deselectOption: (state, action) => {\r\n            // console.log('deselecting option', action.payload)\r\n            state.selectedOptions = state.selectedOptions.filter(optionId => optionId !== action.payload)\r\n        },\r\n        setSelectedOptions: (state, action) => {\r\n            console.log('setting selected options')\r\n            state.selectedOptions = action.payload\r\n        },\r\n        setSelectedModel: (state, action) => {\r\n            // console.log('setting selected model: ' + action.payload)\r\n            state.selectedModel = action.payload\r\n        },\r\n        reset: (state, action) => {\r\n            console.log('reset active configuration')\r\n            state.selectedOptions = action.payload\r\n        },\r\n        loadingStarted: (state) => {\r\n            console.log('fetching configuration...')\r\n            state.status = 'loading'\r\n        },\r\n        loadingSucceeded: (state, action) => {\r\n            console.log('configuration loaded:', action.payload)\r\n            state.status = 'succeeded'\r\n            state.configuration = action.payload\r\n            state.selectedOptions = loadSelectedOptionsFromStorage(state.configuration.configId) || []\r\n        },\r\n        loadingFailed: (state, action) => {\r\n            console.log('configuration loading failed:', action.payload)\r\n            state.status = 'failed'\r\n            state.error = action.payload.toString()\r\n            state.configuration = {}\r\n            state.selectedOptions = []\r\n        }\r\n    },\r\n    extraReducers: (builder) => {\r\n        // builder.addCase(selectOption, (state, action) => {\r\n        //     checkModel()\r\n        // })\r\n    }\r\n})\r\n\r\nexport const fetchConfiguration = (id) => async (dispatch, getState) => {\r\n    dispatch(loadingStarted())\r\n\r\n    fetchId(id)\r\n    .then(res => {\r\n        dispatch(setModel(selectDefaultModel(getState())))\r\n        dispatch(loadingSucceeded(res))\r\n        dispatch(checkModel())\r\n    })\r\n    .catch(error => {\r\n        dispatch(openAlert(error, alertTypes.ERROR))\r\n        dispatch(loadingFailed(error))\r\n    })\r\n}\r\n\r\nconst containsAll = (arr1, arr2) => arr2.every(arr2Item => arr1.includes(arr2Item))\r\nconst sameMembers = (arr1, arr2) => containsAll(arr1, arr2) && containsAll(arr2, arr1)\r\nconst checkModel = () => (dispatch, getState) => {\r\n    const selectedOptions = selectSelectedOptions(getState())\r\n    const models = selectModels(getState())\r\n    \r\n    if (selectedOptions.length === 0) {\r\n        // no option is selected -> unset model\r\n        dispatch(setModel(''))\r\n        return\r\n    }\r\n\r\n    // check if the selected options are part of a model and then set this model as the current one\r\n    for (const model of models) {\r\n        if (sameMembers(extractModelOptionsFromModel(model), selectedOptions)) {\r\n            dispatch(setModel(extractModelNameFromModel(model)))\r\n            return\r\n        }\r\n    }\r\n\r\n    // no model matches the current configuration -> unset model\r\n    dispatch(setModel(''))\r\n\r\n}\r\nexport const setModel = (modelName = '') => (dispatch, getState) => {\r\n    if (modelName) {\r\n        const modelOptions = getModelOptions(getState(), modelName)\r\n        dispatch(setSelectedOptions(modelOptions))\r\n    }\r\n\r\n    dispatch(setSelectedModel(modelName))\r\n}\r\n\r\n// save the currently active configuration to the local storage\r\nexport const saveActiveConfiguration = () => (dispatch, getState) => {\r\n    const id = selectConfigurationId(getState())\r\n    const options = selectSelectedOptions(getState())\r\n    saveConfigurationToStorage(id, options)\r\n}\r\n// save the configuration data (id, options) to the local storage (or append to existing configurations)\r\nexport const saveConfigurationToStorage = (id, options) => {\r\n    let configurations = loadConfigurationsFromStorage()\r\n\r\n    let newConfiguration = configurations.find(c => c.id === id)\r\n    if (newConfiguration) {\r\n        // configuration is already saved -> updated values\r\n        newConfiguration.options = options\r\n    } else {\r\n        // add the new configuration to the array\r\n        newConfiguration = {id, options}\r\n        configurations.push(newConfiguration)\r\n    }\r\n\r\n    // save the updated configurations to the storage\r\n    writeToLocalStorage(configurations, 'configurations')\r\n}\r\n\r\n// get the selected options for the specific configuration (id) from the storage\r\nconst loadSelectedOptionsFromStorage = (id) => {\r\n    console.log('all stored configs:', loadConfigurationsFromStorage())\r\n    console.log(id)\r\n    const configuration = loadConfigurationsFromStorage().find(c => c.id === id)\r\n\r\n    console.log('storage loaded config:', configuration)\r\n\r\n    if (!configuration) return null\r\n\r\n    if (!configuration.options) return null\r\n\r\n    return configuration.options\r\n}\r\nconst loadConfigurationsFromStorage = () => {\r\n    let configurations = readFromLocalStorage('configurations')\r\n    \r\n    if (!configurations) return []\r\n\r\n    return configurations\r\n}\r\n\r\n// reset the active confirguration\r\nexport const resetActiveConfiguration = () => (dispatch, getState) => {\r\n    try {\r\n        // const defaultOptions = selectDefaultOptions(getState())\r\n        // dispatch(reset(defaultOptions))\r\n        const defaultModel = selectDefaultModel(getState())\r\n        dispatch(setModel(defaultModel))\r\n    } catch {\r\n        console.log('Can not reset -> no configuration found')\r\n    }\r\n}\r\n\r\n\r\n\r\n// handle the click on an option\r\nexport const clickedOption = (id) => (dispatch, getState) => {\r\n    // // check if the option is in a replacement group \r\n    // const replacementGroup = getOptionReplacementGroup(getState(), id)\r\n    // if (replacementGroup) {\r\n    //     if (!getIsOptionSelected(getState(), id)) {\r\n    //         dispatch(selectWithDependencies(id))\r\n    //     }\r\n        \r\n    //     // -> deselect all other options\r\n    //     for (const optionId of replacementGroup) {\r\n    //         // dont dispatch the deselect action if its the option that gets selected \r\n    //         if (optionId === id) continue\r\n    //         // dont dispatch if the option is already not selected\r\n    //         if (!getIsOptionSelected(getState(), optionId)) continue\r\n            \r\n    //         dispatch(deselectWithDependencies(optionId))\r\n    //     }\r\n\r\n    //     return\r\n    // }\r\n\r\n    if (getIsOptionSelected(getState(), id)) {\r\n        // option is selected\r\n        dispatch(deselectWithDependencies(id))\r\n    } else {\r\n        // option is not selected\r\n        dispatch(selectWithDependencies(id))\r\n    }\r\n\r\n}\r\n// select an option and look out for dependencies (deselect all that are incompatible with it)\r\nconst selectWithDependencies = (id) => (dispatch, getState) => {\r\n\r\n    // get all options in the replacement group that will be disabled\r\n    let replacementGroupOptionsToDeselect = []\r\n    const replacementGroup = getOptionReplacementGroup(getState(), id)\r\n    if (replacementGroup) {\r\n        for (const optionId of replacementGroup) {\r\n            // ignore if the option is the option that gets selected \r\n            if (optionId === id) continue\r\n\r\n            // ignore if the option is already deselected selected\r\n            if (!getIsOptionSelected(getState(), optionId)) continue\r\n            \r\n            replacementGroupOptionsToDeselect.push(optionId)\r\n        }\r\n    }\r\n\r\n\r\n    // -> deeper options (not in the same group)\r\n    // get all options that cant be used if this option is selected\r\n    const incompatibleOptionsToDeselect = getDependentOptionsSelect(getState(), id)\r\n\r\n    \r\n    // for every option that has to be disabled, get all further dependencies \r\n    const optionsToDeselect = [...replacementGroupOptionsToDeselect, ...incompatibleOptionsToDeselect]\r\n\r\n    let deeperOptionsToDeselect = []\r\n    optionsToDeselect.forEach(option => {\r\n        const dependencies = getDependenciesDeselect(getState(), option)\r\n        if (dependencies) {\r\n            // if the dependencies are not empty, add them to the list\r\n            deeperOptionsToDeselect = [...deeperOptionsToDeselect, ...dependencies]\r\n        }\r\n    })\r\n    deeperOptionsToDeselect = [...incompatibleOptionsToDeselect, ...deeperOptionsToDeselect]\r\n    // <- deeper options (not in the same group)\r\n\r\n\r\n    const allOptionsToDeselect = [...replacementGroupOptionsToDeselect, ...deeperOptionsToDeselect]\r\n\r\n    if (!allOptionsToDeselect || allOptionsToDeselect.length === 0) {\r\n        // no options to deselect if this option is selected -> just select the option\r\n        dispatch(selectAndDeselectOptions([id], null))\r\n        return\r\n    }\r\n    \r\n    // console.log(deeperOptionsToDeselect)\r\n    if (deeperOptionsToDeselect.length === 0) {\r\n        // no confirmation prompt required (deselected options are just from replacementgroup)\r\n        dispatch(selectAndDeselectOptions([id], allOptionsToDeselect))\r\n        return\r\n    }\r\n    \r\n    // confirmation prompt for incompatibilities with the selected option\r\n    const incompatibleOptionNames = deeperOptionsToDeselect.map(dependentId => getOptionName(getState(), dependentId))\r\n    const selectedOptionName = getOptionName(getState(), id)\r\n\r\n    const confirmMessage = `By selecting ${selectedOptionName} you will deselect ${incompatibleOptionNames.join(', ')}`\r\n    dispatch(confirmDialogOpen(confirmMessage, {selected: id, deselected: null, optionsToSelect: [], optionsToRemove: deeperOptionsToDeselect}, null, () => {\r\n        // console.log('Confirmed')\r\n        // select the option and deselect all incompatible options\r\n        dispatch(selectAndDeselectOptions([id], allOptionsToDeselect))\r\n    }))\r\n}\r\n// select an option and look out for dependencies (deselect all others that depend on it)\r\nconst deselectWithDependencies = (id) => (dispatch, getState) => {\r\n\r\n    // get all options that can only be used if this option was selected\r\n    const dependentOptions = getDependenciesDeselect(getState(), id)\r\n    \r\n    // if there are no dependent options, just deselect this option\r\n    if (!dependentOptions || dependentOptions.length === 0) {\r\n        dispatch(selectAndDeselectOptions(null, [id]))\r\n        return\r\n    }\r\n\r\n    // console.log('all deselect dependencies: ')\r\n    // console.log(dependentOptions)\r\n\r\n    // confirmation Prompt for deselecting 'deeper dependentOptions'\r\n    const dependentOptionNames = dependentOptions.map(dependentId => getOptionName(getState(), dependentId))\r\n    const deselectedOptionName = getOptionName(getState(), id)\r\n\r\n    const confirmMessage = `By deselecting ${deselectedOptionName} you will also deselect ${dependentOptionNames.join(', ')}`\r\n    dispatch(confirmDialogOpen(confirmMessage, {selected: null, deselected: id, optionsToSelect: [], optionsToRemove: dependentOptions}, null, () => {\r\n        // console.log('Confirmed')\r\n        // deselect the option and all dependent options\r\n        dispatch(selectAndDeselectOptions(null, [id].concat(dependentOptions)))\r\n    }))\r\n\r\n    // deselect this option and all the options that depend on it\r\n    // dispatch(selectAndDeselectOptions(null, [id].concat(dependentOptions)))\r\n}\r\n// dispatches the actions to select (1st parameter) and deselect (2nd parameter) all given options\r\nexport const selectAndDeselectOptions = (optionsToSelect, optionsToDeselect) => (dispatch) => {\r\n    // if the options to select are valid, select all of them\r\n    if (optionsToSelect && optionsToSelect.length >= 1) {\r\n        optionsToSelect.forEach(option => {\r\n            dispatch(selectOption(option))\r\n        })\r\n    }\r\n    // if the options to deselect are valid, deselect all of them\r\n    if (optionsToDeselect && optionsToDeselect.length >= 1) {\r\n        optionsToDeselect.forEach(option => {\r\n            dispatch(deselectOption(option))\r\n        })\r\n    }\r\n\r\n    // after adjusting the current selection -> save the configuration\r\n    dispatch(saveActiveConfiguration())\r\n\r\n    // check if the model changes based on the different selected options\r\n    dispatch(checkModel())\r\n\r\n}\r\n// recursive function to get all options that depend on the deselected option \r\nconst getDependenciesDeselect = (state, id) => {\r\n    // deselect all options that cant be used if this option is deselected\r\n    const dependentOptions = getDependentOptionsDeselect(state, id)\r\n\r\n    if (dependentOptions.length === 0) return null\r\n\r\n    let subDependentOptions = []\r\n\r\n    dependentOptions.forEach(optionId => {\r\n        // recursively get all dependencies from the dependent options\r\n        const x = getDependenciesDeselect(state, optionId)\r\n        if (x != null) {\r\n            subDependentOptions = [...subDependentOptions, ...x]\r\n        }\r\n    })\r\n    return [...dependentOptions, ...subDependentOptions]\r\n}\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const { selectOption, deselectOption, setSelectedOptions, setSelectedModel, reset, loadingStarted, loadingSucceeded, loadingFailed } = configurationSlice.actions\r\n\r\nexport default configurationSlice.reducer","import { Typography } from '@mui/material'\r\nimport React from 'react'\r\n// import { useSelector } from 'react-redux'\r\nimport { connect } from 'react-redux'\r\nimport { getOption, getOptionPrice } from '../../../../state/configuration/configurationSelectors'\r\n\r\nfunction PriceListItem({state, optionId, name, price}) {\r\n    // console.log('---------')\r\n    // console.log(name + ' rendered new')\r\n    // console.log('---------')\r\n\r\n    if (optionId) {\r\n        name = getOption(state, optionId).name\r\n        price = getOptionPrice(state, optionId)\r\n    }\r\n    \r\n    return (\r\n        <Typography variant=\"body2\">\r\n            {name}{price ? `: ${price}` : ''}\r\n        </Typography>\r\n    )\r\n}\r\n\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        ...ownProps,\r\n        state\r\n    }\r\n    // if (!ownProps.optionId) {\r\n    //     console.log('|||||||||||||||||||\\nbaseprice rendering new\\n|||||||||||||||||||')\r\n    //     return {\r\n    //         ...ownProps\r\n    //     }\r\n    // }\r\n\r\n    // return {\r\n    //     name: getOption(state, ownProps.optionId).name,\r\n    //     price: getOptionPrice(state, ownProps.optionId)\r\n    // }\r\n}\r\nconst mapDispatchToProps = {\r\n    \r\n}\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(PriceListItem)\r\n","import React, { useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Box } from '@mui/system'\r\nimport { Accordion, AccordionDetails, AccordionSummary, Divider, Stack, Typography } from '@mui/material'\r\nimport PriceListItem from './PriceListItem'\r\nimport { getCurrentPrice, selectBasePrice, selectConfigurationId, selectConfigurationStatus, selectOptionGroups, selectOptions, selectOptionSections } from '../../../../state/configuration/configurationSelectors'\r\nimport { translate } from '../../../../lang'\r\nimport { selectLanguage } from '../../../../state/language/languageSelectors'\r\nimport { fetchConfiguration, setSelectedOptions } from '../../../../state/configuration/configurationSlice'\r\nimport { ExpandMoreOutlined } from '@mui/icons-material'\r\n\r\nfunction Summary({ configurationId, selectedOptions, status, loadedConfigurationId, sections, groups, basePrice, currentPrice, fetchConfiguration, setSelectedOptions, language }) {\r\n\r\n    useEffect(() => {\r\n        // if the selectedoptions or the loaded configuration changes, set the selected options again\r\n        console.log('summary: setting selected options')\r\n        setSelectedOptions(selectedOptions)\r\n    }, [loadedConfigurationId, selectedOptions, setSelectedOptions])\r\n\r\n    useEffect(() => {\r\n        if (configurationId !== loadedConfigurationId) {\r\n            // no configuration or a different configuration is loaded -> load correct configuration\r\n            console.log('summary: fetching configuration')\r\n            fetchConfiguration(configurationId)\r\n        }\r\n    }, [configurationId, loadedConfigurationId, fetchConfiguration])\r\n\r\n\r\n    function renderSectionContent(section) {\r\n        const sectionGroups = groups.filter(g => section.optionGroupIds.includes(g.id))\r\n        const groupOptions = (group) => selectedOptions.filter(o => group.optionIds.includes(o))\r\n\r\n        return (\r\n            sectionGroups.map((group, index) => (\r\n                <Box key={index}>\r\n                    {groupOptions(group).length > 0 ?\r\n                        <>\r\n                            <Typography vairant=\"body1\">{group.name}</Typography>\r\n                            \r\n                            {groupOptions(group).map((option, index) => (\r\n                                <PriceListItem\r\n                                key={index}\r\n                                optionId={option}\r\n                                >\r\n                                </PriceListItem>\r\n                            ))}\r\n        \r\n                            <Divider sx={{marginTop: 1, marginBottom: 1}} />\r\n\r\n                        </> : ''\r\n                    }\r\n                </Box>\r\n            ))\r\n        )\r\n    }\r\n\r\n    function renderSummary() {\r\n        if (status !== 'succeeded') {\r\n            return (<></>)\r\n        }\r\n\r\n        return (\r\n            <Box>\r\n                <Typography variant=\"h3\">\r\n                    {translate('price', language)}: {currentPrice}\r\n                </Typography>\r\n\r\n                <Stack spacing={1}>\r\n                    <PriceListItem\r\n                        name={translate('basePrice', language)}\r\n                        price={basePrice}\r\n                    >\r\n                    </PriceListItem>\r\n\r\n                    {sections.map((section, index) => (\r\n                        <Accordion key={index}>\r\n                            <AccordionSummary\r\n                                expandIcon={<ExpandMoreOutlined />}\r\n                                aria-controls=\"panel1a-content\"\r\n                                id=\"panel1a-header\"\r\n                            >\r\n                                <Typography variant=\"h4\">{section.name}</Typography>\r\n                            </AccordionSummary>\r\n                            <AccordionDetails>\r\n                                {renderSectionContent(section)}\r\n                            </AccordionDetails>\r\n                        </Accordion>\r\n                    ))}\r\n                        {/* <Box key={index}>\r\n                            <Typography variant=\"h4\">{section.name}</Typography>\r\n                            {groups.filter(g => section.optionGroupIds.includes(g.id)).map((group, index) => (\r\n                                <Box key={index}>\r\n                                    <Typography vairant=\"body1\">{group.name}</Typography>\r\n\r\n                                    {selectedOptions.filter(o => group.optionIds.includes(o)).map((option, index) => (\r\n                                        <PriceListItem\r\n                                            key={index}\r\n                                            optionId={option}\r\n                                        >\r\n                                        </PriceListItem>\r\n                                    ))}\r\n                                </Box>\r\n                            ))}\r\n                        </Box> */}\r\n                    \r\n                    {/* <Typography>{translate('priceList', language)}</Typography>\r\n                    <PriceListItem\r\n                        name='Base Price'\r\n                        price={basePrice}\r\n                    >\r\n                    </PriceListItem>\r\n\r\n                    {selectedOptions.map((optionId, index) => (\r\n                        <PriceListItem\r\n                            key={index}\r\n                            optionId={optionId}\r\n                            name={optionId}\r\n                            price={0}\r\n                        >\r\n                        </PriceListItem>\r\n                    ))} */}\r\n                </Stack>\r\n            </Box>\r\n        )\r\n    }\r\n\r\n    return (\r\n        renderSummary()\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        sections: selectOptionSections(state),\r\n        groups: selectOptionGroups(state),\r\n        status: selectConfigurationStatus(state),\r\n        loadedConfigurationId: selectConfigurationId(state),\r\n        options: selectOptions(state),\r\n        basePrice: selectBasePrice(state),\r\n        currentPrice: getCurrentPrice(state),\r\n        language: selectLanguage(state)\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    fetchConfiguration: fetchConfiguration,\r\n    setSelectedOptions: setSelectedOptions\r\n}\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(Summary)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Box, Grid, IconButton, Typography } from '@mui/material'\r\nimport { Delete, Edit, Preview } from '@mui/icons-material'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { saveConfigurationToStorage } from '../../state/configuration/configurationSlice'\r\nimport Summary from '../configuration/Configurator/SidePanel/Summary'\r\nimport { confirmDialogOpen } from '../../state/confirmationDialog/confirmationSlice'\r\nimport { requestDeleteSavedConfiguration } from '../../api/userAPI'\r\nimport { alertTypes, openAlert } from '../../state/alert/alertSlice'\r\nimport { translate } from '../../lang'\r\nimport { selectLanguage } from '../../state/language/languageSelectors'\r\nimport { extractDateFromConfiguration, extractIdFromConfiguration, extractNameFromConfiguration, extractOptionsFromConfiguration, extractUsernameFromConfiguration } from '../../state/user/userSelector'\r\n\r\nfunction ConfigurationList({ configurations, openConfirm, isOrdered = false, isAdminView = false, openAlert, language }) {\r\n\r\n    const navigate = useNavigate()\r\n\r\n    function handleEditClick(id, options) {\r\n        navigate(`/configuration/${id}`)\r\n        saveConfigurationToStorage(id, options)\r\n    }\r\n\r\n    function handleDeleteClicked(id, name) {\r\n        requestDeleteSavedConfiguration(id, name)\r\n        .then(res => {\r\n            openAlert(`${translate('successfullyRemoved', language)} ${name}!`, alertTypes.SUCCESS)\r\n            // refresh\r\n            navigate(`/account/saved`)\r\n        })\r\n        .catch(err => {\r\n            openAlert(`Error: ${err}`, alertTypes.ERROR)\r\n        })\r\n    }\r\n\r\n    function handleShowSummaryClicked(id, options) {\r\n        openConfirm('', {}, <Summary configurationId={id} selectedOptions={options}></Summary>, () => {\r\n\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Box>\r\n            <Grid container justifyContent=\"center\">\r\n                {configurations.map((config, index) => {\r\n                    const id = extractIdFromConfiguration(config)\r\n                    const options = extractOptionsFromConfiguration(config)\r\n                    const name = extractNameFromConfiguration(config)\r\n                    const date = extractDateFromConfiguration(config)\r\n                    const username = extractUsernameFromConfiguration(config)\r\n\r\n                    return (\r\n                        <Box key={index} margin={2}>\r\n                            <Box display=\"flex\" alignItems=\"center\">\r\n                                <Typography variant=\"body1\">{name}</Typography>\r\n                                <IconButton onClick={() => handleEditClick(id, options)}>\r\n                                    <Edit></Edit>\r\n                                </IconButton>\r\n                                {!isOrdered ? \r\n                                <IconButton onClick={() => handleDeleteClicked(id, name)}>\r\n                                    <Delete></Delete>\r\n                                </IconButton>\r\n                                : ''}\r\n                                {isOrdered ?\r\n                                <IconButton onClick={() => handleShowSummaryClicked(id, options)}>\r\n                                    <Preview></Preview>\r\n                                </IconButton>\r\n                                : ''}\r\n                            </Box>\r\n\r\n                            <Typography variant=\"body2\">{name}</Typography>\r\n\r\n                            <Typography variant=\"body2\">{new Date(date).toLocaleTimeString()}</Typography>\r\n\r\n                            {isAdminView ? \r\n                            <Typography variant=\"body2\">From: {username}</Typography>\r\n                            : ''}\r\n                        </Box>\r\n                    )\r\n                })}\r\n            </Grid>\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    language: selectLanguage(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    openConfirm: confirmDialogOpen,\r\n    openAlert: openAlert\r\n}\r\nexport default connect(\r\n    mapStateToProps, \r\n    mapDispatchToProps\r\n)(ConfigurationList)","import { Box, Tab, Tabs } from '@mui/material'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { useNavigate, useParams } from 'react-router-dom'\r\nimport { translate } from '../../lang'\r\nimport { selectLanguage } from '../../state/language/languageSelectors'\r\nimport { selectAllOrderedConfigurations, selectIsAdmin, selectOrderedConfigurations, selectSavedConfigurations } from '../../state/user/userSelector'\r\nimport ConfigurationList from './ConfigurationList'\r\n\r\nfunction TabPanel(props) {\r\n    const { children, value, index, ...other } = props\r\n\r\n    return (\r\n        <div\r\n            role=\"tabpanel\"\r\n            hidden={value !== index}\r\n            id={`simple-tabpanel-${index}`}\r\n            aria-labelledby={`simple-tab-${index}`}\r\n            {...other}\r\n        >\r\n            {value === index && (\r\n                <Box sx={{ p: 3 }}>\r\n                    {children}\r\n                </Box>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst tabNames = [\r\n    {name: 'saved', value: 0},\r\n    {name: 'ordered', value: 1},\r\n    {name: 'allordered', value: 2, forAdmin: true}\r\n]\r\n\r\nfunction ConfigurationTabs({ isAdmin, savedConfigurations, orderedConfigurations, allOrderedConfigurations, language }) {\r\n\r\n    const navigate = useNavigate()\r\n    const { tab } = useParams()\r\n\r\n    const foundTab = tabNames.find(t => t.name === tab)\r\n    let tabName = foundTab\r\n\r\n    if (foundTab && tabName.forAdmin && !isAdmin) {\r\n        // the tab is only for admins and the user is not an admin\r\n        tabName = null\r\n    }\r\n\r\n    useEffect(() => {\r\n        // if the dynamic path tabname does not correspond to any of tabnames array -> update route by navigating\r\n        if (!tabName) {\r\n            navigate(`/account/${tabNames[0].name}`)\r\n        }\r\n    }, [tabName, navigate])\r\n\r\n    const tabIndex = tabName ? tabName.value : 0\r\n\r\n    const [value, setValue] = useState(tabIndex)\r\n\r\n    const handleChange = (event, newValue) => {\r\n        const tabName = tabNames.find(t => t.value === newValue)\r\n        if (tabName) {\r\n            setValue(tabName.value)\r\n            navigate(`/account/${tabName.name}`)\r\n        }\r\n    }\r\n\r\n    function tabProps(index) {\r\n        return {\r\n            id: `simple-tab-${index}`,\r\n            'aria-controls': `simple-tabpanel-${index}`,\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Box width=\"100%\">\r\n            <Tabs \r\n                scrollButtons=\"auto\"\r\n                variant=\"scrollable\" \r\n                allowScrollButtonsMobile\r\n                value={value}\r\n                onChange={handleChange} \r\n                aria-label=\"configurationstabs\"\r\n            >\r\n                <Tab label={translate('savedConfigurations', language)} {...tabProps(0)} />\r\n                <Tab label={translate('orderedConfigurations', language)} {...tabProps(1)} />\r\n                {isAdmin ? <Tab label={translate('allOrderedConfigurations', language)} {...tabProps(2)} /> : ''}\r\n            </Tabs>\r\n            <TabPanel value={value} path={tabNames[0].name} index={0}>\r\n                <ConfigurationList configurations={savedConfigurations}></ConfigurationList>\r\n            </TabPanel>\r\n            <TabPanel value={value} path={tabNames[1].name} index={1}>\r\n                <ConfigurationList configurations={orderedConfigurations} isOrdered={true}></ConfigurationList>\r\n            </TabPanel>\r\n            {isAdmin ?\r\n                <TabPanel value={value} path={tabNames[1].name} index={2}>\r\n                    <ConfigurationList configurations={allOrderedConfigurations} isOrdered={true} isAdminView={true}></ConfigurationList>\r\n                </TabPanel>\r\n                : ''\r\n            }\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    isAdmin: selectIsAdmin(state),\r\n    savedConfigurations: selectSavedConfigurations(state),\r\n    orderedConfigurations: selectOrderedConfigurations(state),\r\n    allOrderedConfigurations: selectAllOrderedConfigurations(state),\r\n    language: selectLanguage(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    \r\n}\r\nexport default connect(\r\n    mapStateToProps, \r\n    mapDispatchToProps\r\n)(ConfigurationTabs)","import { Typography } from '@mui/material'\r\nimport { Box } from '@mui/system'\r\nimport React, { useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { selectIsAdmin, selectIsAuthenticated, selectUserEmail, selectUserName } from '../../state/user/userSelector'\r\nimport { getAllOrderedConfigurations, getSavedConfigurations } from '../../state/user/userSlice'\r\nimport ConfigurationTabs from './ConfigurationTabs'\r\n\r\n\r\nfunction AccountView({ username, email, isLoggedIn, isAdmin, getSavedConfigurations, getAllOrderedConfigurations }) {\r\n\r\n    const adminActions = (\r\n        <></>\r\n    )\r\n\r\n    const userActions = (\r\n        <></>\r\n    )\r\n\r\n    // every time the logged in state changes -> reload the saved configurations\r\n    useEffect(() => {\r\n        if (isLoggedIn) {\r\n            getSavedConfigurations()\r\n        }\r\n    \r\n        if (isAdmin) {\r\n            getAllOrderedConfigurations()\r\n        }\r\n    }, [isLoggedIn, isAdmin, getSavedConfigurations, getAllOrderedConfigurations])\r\n\r\n    \r\n    function renderUserActions() {\r\n        return (\r\n            <Box>\r\n                {userActions}\r\n                {isAdmin ? adminActions : ''}\r\n            </Box>\r\n        )\r\n    }\r\n\r\n    function renderUserDetails() {\r\n        return (\r\n            <Box className=\"userdetails\" paddingTop={2} paddingBottom={4} display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\r\n                <Typography variant=\"h2\">{username}</Typography>\r\n                <Typography variant=\"body1\">{email}</Typography>\r\n            </Box>\r\n        )\r\n    }\r\n\r\n    function renderLoggedIn() {\r\n        return (\r\n            <>\r\n                {renderUserDetails()}\r\n                {renderUserActions()}\r\n                <ConfigurationTabs></ConfigurationTabs>\r\n            </>\r\n        )\r\n    }\r\n\r\n    function renderLoggedOut() {\r\n        return (\r\n            <Box>\r\n                <Typography variant=\"h2\">Log in to access this page!</Typography>\r\n            </Box>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Box className=\"accountpage\" display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\r\n            {isLoggedIn ? renderLoggedIn() : renderLoggedOut()}\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    isLoggedIn: selectIsAuthenticated(state),\r\n    isAdmin: selectIsAdmin(state),\r\n    username: selectUserName(state),\r\n    email: selectUserEmail(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    getSavedConfigurations: getSavedConfigurations,\r\n    getAllOrderedConfigurations: getAllOrderedConfigurations\r\n}\r\nexport default connect(\r\n    mapStateToProps, \r\n    mapDispatchToProps\r\n)(AccountView)\r\n","import { createSelector } from '@reduxjs/toolkit'\r\n\r\nconst selectBuilderLanguages = (state) =>                       state.builder.configuration.languages\r\nconst selectCurrentBuilderLanguage = (state) =>                 state.builder.currentLanguage\r\n\r\nexport const selectBuilderConfiguration = (state) =>            state.builder.configuration\r\nexport const selectBuilderStatus = (state) =>                   state.builder.status\r\nexport const selectBuilderError = (state) =>                    state.builder.error\r\nexport const selectBuilderInputLanguage = (state) =>            state.builder.currentLanguage\r\n\r\nexport const selectBuilderSections = (state) =>                 state.builder.configuration.optionSections\r\nexport const selectBuilderGroups = (state) =>                   state.builder.configuration.optionGroups\r\nexport const selectBuilderOptions = (state) =>                  state.builder.configuration.options\r\nexport const selectBuilderModels = (state) =>                   state.builder.configuration.rules.models\r\nexport const selectBuilderDefaultModel = (state) =>             state.builder.configuration.rules.defaultModel\r\nexport const selectBuilderBasePrice = (state) =>                state.builder.configuration.rules.basePrice\r\nexport const selectBuilderPriceList = (state) =>                state.builder.configuration.rules.priceList\r\nexport const selectBuilderOptionRequirements = (state) =>       state.builder.configuration.rules.requirements\r\nexport const selectBuilderOptionIncompatibilities = (state) =>  state.builder.configuration.rules.incompatibilities\r\nexport const selectBuilderGroupRequirements = (state) =>        state.builder.configuration.rules.groupRequirements || []\r\n\r\nconst selectBuilderName = (state) =>                                    state.builder.configuration.languages[state.builder.currentLanguage].name || ''\r\nconst selectBuilderDescription = (state) =>                             state.builder.configuration.languages[state.builder.currentLanguage].description || ''\r\nexport const selectBuilderOptionsFromCurrentLanguage = (state) =>       state.builder.configuration.languages[state.builder.currentLanguage].options || []\r\nexport const selectBuilderGroupsFromCurrentLanguage = (state) =>        state.builder.configuration.languages[state.builder.currentLanguage].optionGroups || []\r\nexport const selectBuilderSectionsFromCurrentLanguage = (state) =>      state.builder.configuration.languages[state.builder.currentLanguage].optionSections || []\r\n\r\nconst selectName = (state, name) =>                             name\r\n\r\n// also updates cached value when builder language changes\r\nexport const getBuilderName = createSelector([selectBuilderName, selectCurrentBuilderLanguage], (builderName, lang) => {\r\n    return builderName ? builderName : ''\r\n})\r\n// also updates cached value when builder language changes\r\nexport const getBuilderDescription = createSelector([selectBuilderDescription, selectCurrentBuilderLanguage], (builderDescription, lang) => {\r\n    return builderDescription ? builderDescription : ''\r\n})\r\n\r\nexport const getBuilderOptionById = createSelector([selectName, selectBuilderOptionsFromCurrentLanguage], (optionId, options) => {\r\n    const option = options.find(o => o.id === optionId)\r\n    return option ? option : null\r\n})\r\nexport const getBuilderOptionPrice = createSelector([selectName, selectBuilderPriceList], (optionId, priceList) => {\r\n    const price = priceList[optionId]\r\n    return price ? price : 0\r\n})\r\nexport const getBuilderOptionRequirementsByOptionId = createSelector([selectName, selectBuilderOptionRequirements], (optionId, requirements) => {\r\n    const optionReq = requirements[optionId]\r\n    return optionReq ? optionReq : []\r\n})\r\nexport const getBuilderOptionIncompatibilitiesByOptionId = createSelector([selectName, selectBuilderOptionIncompatibilities], (optionId, incompatibilities) => {\r\n    const optionIncomp = incompatibilities[optionId]\r\n    return optionIncomp ? optionIncomp : []\r\n})\r\n\r\nexport const getBuilderSectionById = createSelector([selectName, selectBuilderSections], (sectionId, sections) => {\r\n    const section = sections.find(s => s.id === sectionId)\r\n    return section ? section : null\r\n})\r\nexport const getBuilderGroupsInSection = createSelector([selectName, selectBuilderSections], (sectionId, sections) => {\r\n    const section = sections.find(s => s.id === sectionId)\r\n    return section ? section.optionGroupIds : []\r\n})\r\n\r\nexport const getBuilderGroupById = createSelector([selectName, selectBuilderGroups], (groupId, groups) => {\r\n    const group = groups.find(g => g.id === groupId)\r\n    return group ? group : null\r\n})\r\nexport const getBuilderGroupNameByOptionId = createSelector([selectName, selectBuilderGroups, selectBuilderGroupsFromCurrentLanguage], (optionId, groups, groupLangObj) => {\r\n    const group = groups.find(g => g.optionIds.includes(optionId))\r\n    return group ? groupLangObj.find(g => g.id === group.id).name : ''\r\n})\r\nexport const getBuilderGroupRequirementsByGroupId = createSelector([selectName, selectBuilderGroupRequirements], (groupId, requirements) => {\r\n    const groupReq = requirements[groupId]\r\n    return groupReq ? groupReq : []\r\n})\r\n\r\nconst getBuilderLanguageObject = createSelector([selectBuilderLanguages, selectCurrentBuilderLanguage], (languages, language) => {\r\n    return languages[language]\r\n})\r\n\r\n\r\nexport const getDoesSectionExist = createSelector([selectBuilderSections, selectName], (sections, sectionName) => {\r\n    return sections.find(s => s.id.toUpperCase() === sectionName.toUpperCase()) ? true : false\r\n})\r\nexport const getDoesGroupdExist = createSelector([selectBuilderGroups, selectName], (groups, groupName) => {\r\n    return groups.find(g => g.id.toUpperCase() === groupName.toUpperCase()) ? true : false\r\n})\r\nexport const getDoesOptionExist = createSelector([selectBuilderOptions, selectName], (options, optionName) => {\r\n    return options.find(o => o.id.toUpperCase() === optionName.toUpperCase()) ? true : false\r\n})\r\n\r\nconst getGroupPropertiesFromBuilderGroup = createSelector([getBuilderLanguageObject, selectName], (langObj, groupId) => {\r\n    const group = langObj.optionGroups.find(g => g.id === groupId)\r\n    return group || null\r\n})\r\nexport const getGroupNameFromBuilderGroup = createSelector([getGroupPropertiesFromBuilderGroup], (group) => group ? group.name : '')\r\nexport const getGroupDescriptionFromBuilderGroup = createSelector([getGroupPropertiesFromBuilderGroup], (group) => group ? group.description : '')\r\n\r\nconst getModelPropertiesFromBuilderModel = createSelector([getBuilderLanguageObject, selectName], (langObj, modelObj) => {\r\n    const model = langObj.models.find(m => m.id === modelObj.id)\r\n    return model || null\r\n})\r\nexport const getModelNameFromBuilderModel = createSelector([getModelPropertiesFromBuilderModel], (model) => model ? model.name : 'c')\r\nexport const getModelDescriptionFromBuilderModel = createSelector([getModelPropertiesFromBuilderModel], (model) => model ? model.description : 'c')\r\n\r\nexport const extractModelNameFromBuilderModel = (model) =>          model.name || ''\r\nexport const extractGroupNameFromBuilderGroupId = (group) =>        group.name || ''\r\n\r\nexport const extractOptionsFromBuilderGroup = (group) =>            group.optionIds || []\r\nexport const extractGroupsFromBuilderSection = (section) =>         section.optionGroupIds || []\r\nexport const extractModelOptionsFromBuilderModel = (model) =>       model.options || []\r\nexport const extractGroupIdFromBuilderOption = (option) =>          option.groupId || ''","import { createSlice } from '@reduxjs/toolkit'\r\nimport { postConfiguration } from '../../api/configurationAPI'\r\nimport { readFromLocalStorage, writeToLocalStorage } from '../../App'\r\nimport { defaultLang } from '../../lang'\r\nimport { extractGroupsFromBuilderSection, extractModelNameFromBuilderModel, extractModelOptionsFromBuilderModel, extractOptionsFromBuilderGroup, getBuilderGroupById, getBuilderSectionById, getDoesGroupdExist, getDoesOptionExist, getDoesSectionExist, selectBuilderGroupRequirements, selectBuilderModels, selectBuilderOptionIncompatibilities, selectBuilderOptionRequirements, selectBuilderConfiguration } from './builderSelectors'\r\n\r\n\r\nconst initialConfiguration = {\r\n    configId: '',\r\n    images: [],\r\n    options: [],\r\n    optionSections: [],\r\n    optionGroups: [],\r\n    rules: {\r\n        basePrice: 0,\r\n        defaultModel: '',\r\n        models: [],\r\n        groupRequirements: {\r\n            // PANORAMATYPE_GROUP: ['PANORAMA_GROUP']\r\n        },\r\n        requirements: {\r\n            // BLUE: ['STEEL16'],\r\n        },\r\n        incompatibilities: {\r\n            // PANORAMAROOF: ['PETROL']\r\n        },\r\n        priceList: {\r\n            // BLUE: 200\r\n        }\r\n    },\r\n    languages: {\r\n        en: {\r\n            name: '',\r\n            description: '',\r\n            options: [],\r\n            optionSections: [],\r\n            optionGroups: [],\r\n            models: []\r\n        },\r\n        de: {\r\n            name: '',\r\n            description: '',\r\n            options: [],\r\n            optionSections: [],\r\n            optionGroups: [],\r\n            models: []\r\n        },\r\n        fr: {\r\n            name: '',\r\n            description: '',\r\n            options: [],\r\n            optionSections: [],\r\n            optionGroups: [],\r\n            models: []\r\n        }\r\n    }\r\n}\r\n\r\nconst testConfiguration = {\r\n    configId: 'TestNeueKonfig_-_ENTitle',\r\n    images: [],\r\n    options: [\r\n        {\r\n            id: 'ALLOY19',\r\n            groupId: 'WHEELS2'\r\n        },\r\n        {\r\n            id: 'STEEL16',\r\n            groupId: 'WHEELS2'\r\n        },\r\n        {\r\n            id: 'RED',\r\n            groupId: 'COLOR_GROUP2'\r\n        },\r\n        {\r\n            id: 'BLUE222',\r\n            groupId: 'COLOR_GROUP2'\r\n        }\r\n    ],\r\n    optionSections: [\r\n        {\r\n            id: 'EXTERIOR2',\r\n            optionGroupIds: [\r\n                'WHEELS2', 'COLOR_GROUP2'\r\n            ]\r\n        }\r\n    ],\r\n    optionGroups: [\r\n        {\r\n            id: 'WHEELS2',\r\n            optionIds: [\r\n                'ALLOY19', 'STEEL16'\r\n            ],\r\n            required: true,\r\n            replacement: true\r\n        },\r\n        {\r\n            id: 'COLOR_GROUP2',\r\n            optionIds: [\r\n                'BLUE222', 'RED'\r\n            ],\r\n            required: false,\r\n            replacement: false\r\n        }\r\n    ],\r\n    rules: {\r\n        basePrice: 500,\r\n        defaultModel: '',\r\n        models: [\r\n            {\r\n                id: 'Sport',\r\n                options: ['ALLOY19', 'RED'],\r\n            },\r\n            {\r\n                id: 'Basic',\r\n                options: ['STEEL16', 'BLUE222'],\r\n            }\r\n        ],\r\n        // replacementGroups: {\r\n        //     // COLOR_GROUP2: [\r\n        //     //     'BLUE222'\r\n        //     // ]\r\n        // },\r\n        groupRequirements: {\r\n            // PANORAMATYPE_GROUP: ['PANORAMA_GROUP']\r\n            COLOR_GROUP2: ['WHEELS2'],\r\n            WHEELS2: ['COLOR_GROUP2']\r\n        },\r\n        requirements: {\r\n            BLUE222: ['STEEL16'],\r\n            ALLOY19: ['RED']\r\n        },\r\n        incompatibilities: {\r\n            // PANORAMAROOF: ['PETROL']\r\n            BLUE222: ['ALLOY19'],\r\n            STEEL16: ['RED']\r\n        },\r\n        priceList: {\r\n            'BLUE222': 200\r\n        }\r\n    },\r\n    languages: {\r\n        en: {\r\n            name: 'TestNeueKonfig - ENTitle',\r\n            description: 'test en desc',\r\n            options: [\r\n                {\r\n                    id: 'ALLOY19',\r\n                    name: '19 inch Alloy',\r\n                    description: 'description',\r\n                },\r\n                {\r\n                    id: 'STEEL16',\r\n                    name: '16 inch Steel',\r\n                    description: 'description',\r\n                },\r\n                {\r\n                    id: 'RED',\r\n                    name: 'red',\r\n                    description: 'Farbe rot',\r\n                },\r\n                {\r\n                    id: 'BLUE222',\r\n                    name: 'blue',\r\n                    description: 'Farbe blau',\r\n                }\r\n            ],\r\n            optionSections: [\r\n                {\r\n                    id: 'EXTERIOR2',\r\n                    name: 'Exterior'\r\n                }\r\n            ],\r\n            optionGroups: [\r\n                {\r\n                    id: 'WHEELS2',\r\n                    name: 'Wheels',\r\n                    description: 'round stuff'\r\n                },\r\n                {\r\n                    id: 'COLOR_GROUP2',\r\n                    name: 'Color',\r\n                    description: 'of the car',\r\n                }\r\n            ],\r\n            models: [\r\n                {\r\n                    id: 'Sport',\r\n                    name: 'Sport',\r\n                    description: 'en description, description, description, description, description, description, description, description, description, description, description, description, description, description, description, description,'\r\n                },\r\n                {\r\n                    id: 'Basic',\r\n                    name: 'Basic',\r\n                    description: 'en description, description, description, description, description, description, description, description, '\r\n                }\r\n            ]\r\n        },\r\n        de: {\r\n            name: 'TestNeueKonfig - DETitle',\r\n            description: 'test de desc',\r\n            options: [\r\n                {\r\n                    id: 'ALLOY19',\r\n                    name: '19 zoll Alo',\r\n                    description: 'Beschreibung',\r\n                },\r\n                {\r\n                    id: 'STEEL16',\r\n                    name: '16 zoll Stahl',\r\n                    description: 'Beschreibung',\r\n                },\r\n                {\r\n                    id: 'RED',\r\n                    name: 'red',\r\n                    description: 'Farbe rot',\r\n                },\r\n                {\r\n                    id: 'BLUE222',\r\n                    name: 'blau',\r\n                    description: 'Farbe blau',\r\n                }\r\n            ],\r\n            optionSections: [\r\n                {\r\n                    id: 'EXTERIOR2',\r\n                    name: 'Auen'\r\n                }\r\n            ],\r\n            optionGroups: [\r\n                {\r\n                    id: 'WHEELS2',\r\n                    name: 'Reifen',\r\n                    description: 'Reifen halt'\r\n                },\r\n                {\r\n                    id: 'COLOR_GROUP2',\r\n                    name: 'Farbe',\r\n                    description: 'Farbe vom Auto'\r\n                }\r\n            ],\r\n            models: [\r\n                {\r\n                    id: 'Sport',\r\n                    name: 'Sport',\r\n                    description: 'Beschreibung Sport'\r\n                },\r\n                {\r\n                    id: 'Basic',\r\n                    name: 'Standard',\r\n                    description: 'Beschreibung Standard'\r\n                }\r\n            ]\r\n        },\r\n        fr: {\r\n            name: 'TestNeueKonfig - FRTitle',\r\n            description: 'test fr desc',\r\n            options: [\r\n                {\r\n                    id: 'ALLOY19',\r\n                    name: '19 inch Alloy',\r\n                    description: 'description',\r\n                },\r\n                {\r\n                    id: 'STEEL16',\r\n                    name: '16 inch Steel',\r\n                    description: 'description',\r\n                },\r\n                {\r\n                    id: 'RED',\r\n                    name: 'red',\r\n                    description: 'Farbe rot',\r\n                },\r\n                {\r\n                    id: 'BLUE222',\r\n                    name: 'blue',\r\n                    description: 'Farbe blau',\r\n                }\r\n            ],\r\n            optionSections: [\r\n                {\r\n                    id: 'EXTERIOR2',\r\n                    name: 'Exterior'\r\n                }\r\n            ],\r\n            optionGroups: [\r\n                {\r\n                    id: 'WHEELS2',\r\n                    name: 'Wheels',\r\n                    description: 'round stuff'\r\n                },\r\n                {\r\n                    id: 'COLOR_GROUP2',\r\n                    name: 'Color',\r\n                    description: 'of the car',\r\n                }\r\n            ],\r\n            models: [\r\n                {\r\n                    id: 'Sport',\r\n                    name: 'Sport',\r\n                    description: 'description fr'\r\n                },\r\n                {\r\n                    id: 'Basic',\r\n                    name: 'Basic',\r\n                    description: 'description fr'\r\n                }\r\n            ]\r\n        }\r\n    }\r\n}\r\n\r\nconst initialState = {\r\n    configuration: initialConfiguration, // testConfiguration\r\n    currentLanguage: defaultLang,\r\n    status: 'idle', // | 'loading' | 'succeeded' | 'failed'\r\n    error: null\r\n}\r\n\r\nexport const builderSlice = createSlice({\r\n    name: 'builder',\r\n    initialState: {\r\n        ...initialState, \r\n        configuration: readFromLocalStorage('builder') || initialState.configuration\r\n    },\r\n    reducers: {\r\n        addSection: (state, action) => {\r\n            const name = action.payload\r\n\r\n            // add to sections\r\n            state.configuration.optionSections.push({\r\n                id: name,\r\n                // name: name,\r\n                optionGroupIds: []\r\n            })\r\n\r\n            // add to every language\r\n            const newSection = { id: name, name }\r\n            for (const lang in state.configuration.languages) {\r\n                const langObj = state.configuration.languages[lang]\r\n                const sections = langObj.optionSections\r\n                sections.push(newSection)\r\n            }\r\n            // const section = sections.find(s => s.id === name)\r\n            // if (section) section.name = name\r\n            // else sections.push({id: name, name: name})\r\n\r\n            // const sections = state.configuration.languages[language].optionSections\r\n            // const section = sections.find(s => s.id === name)\r\n            // if (section) section.name = name\r\n            // else sections.push({id: name, name: name})\r\n\r\n            // state.configuration.languages[language].optionSections[name] = {name: name}\r\n        },\r\n        changeSectionProperties: (state, action) => {\r\n            const { sectionId, newName } = action.payload\r\n\r\n            const section = state.configuration.languages[state.currentLanguage].optionSections.find(s => s.id === sectionId)\r\n            if (section) {\r\n                section.name = newName || section.name\r\n            }\r\n        },\r\n        removeSection: (state, action) => {\r\n            const sectionId = action.payload\r\n\r\n            // remove from sections\r\n            state.configuration.optionSections = state.configuration.optionSections.filter(s => s.id !== sectionId)\r\n            \r\n            // remove from all languages\r\n            for (const lang in state.configuration.languages) {\r\n                const langObj = state.configuration.languages[lang]\r\n                langObj.optionSections = langObj.optionSections.filter(s => s.id !== sectionId)\r\n            }\r\n        },\r\n        addOptionGroup: (state, action) => {\r\n            const { sectionId, groupId, name, description, isRequired, isReplacementGroup } = action.payload\r\n\r\n            state.configuration.optionGroups.push({\r\n                id: groupId,\r\n                // name: name,\r\n                // description: description,\r\n                required: isRequired,\r\n                replacement: isReplacementGroup,\r\n                optionIds: []\r\n            })\r\n\r\n            // add to every language\r\n            const newGroup = {\r\n                id: groupId, \r\n                name, \r\n                description\r\n            }\r\n            for (const lang in state.configuration.languages) {\r\n                const langObj = state.configuration.languages[lang]\r\n                const groups = langObj.optionGroups\r\n                groups.push(newGroup)\r\n            }\r\n            \r\n            // add to language\r\n            // const groups = state.configuration.languages[state.currentLanguage].optionGroups\r\n            // let group = groups.find(g => g.id === groupId)\r\n            // const updatedGroup = {\r\n            //     id: groupId, \r\n            //     name, \r\n            //     description\r\n            // }\r\n            // if (group) group = updatedGroup\r\n            // else groups.push(updatedGroup)\r\n\r\n            // add to section\r\n            const section = state.configuration.optionSections.find(s => s.id === sectionId)\r\n            if (section) section.optionGroupIds.push(groupId)\r\n        },\r\n        changeGroupProperties: (state, action) => {\r\n            const { groupId, newName, newDescription } = action.payload\r\n\r\n            const group = state.configuration.languages[state.currentLanguage].optionGroups.find(g => g.id === groupId)\r\n            if (group) {\r\n                group.name = newName || group.name\r\n                group.description = newDescription || group.description\r\n            }\r\n        },\r\n        setGroupRequirements: (state, action) => {\r\n            const { groupId, requirements } = action.payload\r\n\r\n            state.configuration.rules.groupRequirements[groupId] = requirements\r\n\r\n            // cleanup empty requirements (remove dictionary entry if the option array is empty)\r\n            for (const gId in state.configuration.rules.groupRequirements) {\r\n                if (state.configuration.rules.groupRequirements[gId].length === 0) {\r\n                    delete state.configuration.rules.groupRequirements[gId]\r\n                }\r\n            }\r\n        },\r\n        setGroupIsRequired: (state, action) => {\r\n            const { groupId, required } = action.payload\r\n\r\n            const group = state.configuration.optionGroups.find(g => g.id === groupId)\r\n            if (group) group.required = required\r\n        },\r\n        setGroupIsReplacement: (state, action) => {\r\n            const { groupId, replacement } = action.payload\r\n\r\n            const group = state.configuration.optionGroups.find(g => g.id === groupId)\r\n            if (group) group.replacement = replacement\r\n        },\r\n        removeOptionGroup: (state, action) => {\r\n            const { groupId, sectionId } = action.payload\r\n\r\n            // remove group requirements\r\n            if (state.configuration.rules.groupRequirements[groupId]) delete state.configuration.rules.groupRequirements[groupId]\r\n\r\n            // remove group from group list\r\n            state.configuration.optionGroups = state.configuration.optionGroups.filter(g => g.id !== groupId)\r\n\r\n            // remove from all languages\r\n            for (const lang in state.configuration.languages) {\r\n                const langObj = state.configuration.languages[lang]\r\n                langObj.optionGroups = langObj.optionGroups.filter(g => g.id !== groupId)\r\n            }\r\n\r\n            // remove group from section\r\n            const section = state.configuration.optionSections.find(s => s.id === sectionId)\r\n            if (section) section.optionGroupIds = section.optionGroupIds.filter(g => g !== groupId)\r\n        },\r\n        addOption: (state, action) => {\r\n            const { groupId, optionId, name, description, price } = action.payload\r\n\r\n            // add option to options list\r\n            state.configuration.options.push({\r\n                id: optionId,\r\n                // name: name,\r\n                // description: description,\r\n                groupId: groupId\r\n            })\r\n\r\n            // add to every language\r\n            const newOption = {\r\n                id: optionId, \r\n                name, \r\n                description\r\n            }\r\n            for (const lang in state.configuration.languages) {\r\n                const langObj = state.configuration.languages[lang]\r\n                const options = langObj.options\r\n                options.push(newOption)\r\n            }\r\n\r\n            // add to language\r\n            // const options = state.configuration.languages[language].options\r\n            // let option = options.find(o => o.id === optionId)\r\n            // const updatedOption = {\r\n            //     id: optionId,\r\n            //     name,\r\n            //     description\r\n            // }\r\n            // if (option) option = updatedOption\r\n            // else options.push(updatedOption)\r\n\r\n            // add option to group\r\n            const group = state.configuration.optionGroups.find(g => g.id === groupId)\r\n            if (group) group.optionIds.push(optionId)\r\n\r\n            // add option price to pricelist in rules\r\n            if (price) state.configuration.rules.priceList[optionId] = price\r\n        },\r\n        changeOptionProperties: (state, action) => {\r\n            const { optionId, newName, newDescription } = action.payload\r\n\r\n            const option = state.configuration.languages[state.currentLanguage].options.find(o => o.id === optionId)\r\n            if (option) {\r\n                option.name = newName || option.name\r\n                option.description = newDescription || option.description\r\n            }\r\n        },\r\n        setOptionPrice: (state, action) => {\r\n            const { optionId, price } = action.payload\r\n\r\n            state.configuration.rules.priceList[optionId] = price\r\n        },\r\n        setOptionRequirements: (state, action) => {\r\n            const { optionId, requirements } = action.payload\r\n\r\n            state.configuration.rules.requirements[optionId] = requirements\r\n\r\n            // cleanup empty requirements (remove dictionary entry if the option array is empty)\r\n            for (const oId in state.configuration.rules.requirements) {\r\n                if (state.configuration.rules.requirements[oId].length === 0) {\r\n                    delete state.configuration.rules.requirements[oId]\r\n                }\r\n            }\r\n        },\r\n        setOptionIncompatibilities: (state, action) => {\r\n            const { optionId, incompatibilities } = action.payload\r\n\r\n            state.configuration.rules.incompatibilities[optionId] = incompatibilities\r\n\r\n            // cleanup empty incompatitbilities (remove dictionary entry if the option array is empty)\r\n            for (const oId in state.configuration.rules.incompatibilities) {\r\n                if (state.configuration.rules.incompatibilities[oId].length === 0) {\r\n                    delete state.configuration.rules.incompatibilities[oId]\r\n                }\r\n            }\r\n        },\r\n        removeOption: (state, action) => {\r\n            const { groupId, optionId } = action.payload\r\n\r\n            // remove option from option list\r\n            state.configuration.options = state.configuration.options.filter(o => o.id !== optionId)\r\n\r\n            // remove option from group\r\n            const group = state.configuration.optionGroups.find(g => g.id === groupId)\r\n            if (group) group.optionIds = group.optionIds.filter(o => o !== optionId)\r\n\r\n            // remove from all languages\r\n            for (const lang in state.configuration.languages) {\r\n                const langObj = state.configuration.languages[lang]\r\n                langObj.options = langObj.options.filter(o => o.id !== optionId)\r\n            }\r\n\r\n            // remove option requirements\r\n            if (state.configuration.rules.requirements[optionId]) delete state.configuration.rules.requirements[optionId]\r\n\r\n            // remove option incompatibilities\r\n            if (state.configuration.rules.incompatibilities[optionId]) delete state.configuration.rules.incompatibilities[optionId]\r\n\r\n            // remove option price from pricelist\r\n            if (state.configuration.rules.priceList[optionId]) delete state.configuration.rules.priceList[optionId]\r\n        },\r\n        addModel: (state, action) => {\r\n            const { modelName, options, description } = action.payload\r\n\r\n            state.configuration.rules.models.push({\r\n                id: modelName, \r\n                options, \r\n            })\r\n\r\n            // add to every language\r\n            const newModel = {\r\n                id: modelName,\r\n                name: modelName,\r\n                description\r\n            }\r\n            for (const lang in state.configuration.languages) {\r\n                const langObj = state.configuration.languages[lang]\r\n                const models = langObj.models\r\n                models.push(newModel)\r\n            }\r\n\r\n            // add to language\r\n            // const models = state.configuration.languages[state.currentLanguage].models\r\n            // let model = models.find(m => m.id === modelName)\r\n            // const updatedModel = {\r\n            //     id: modelName,\r\n            //     name: modelName,\r\n            //     description\r\n            // }\r\n            // if (model) model = updatedModel\r\n            // else models.push(updatedModel)\r\n        },\r\n        changeModelProperties: (state, action) => {\r\n            const { modelId, newName, newDescription } = action.payload\r\n\r\n            const model = state.configuration.languages[state.currentLanguage].models.find(m => m.id === modelId)\r\n            if (model) {\r\n                model.name = newName || model.name\r\n                model.description = newDescription || model.description\r\n            }\r\n        },\r\n        setDefaultModel: (state, action) => {\r\n            state.configuration.rules.defaultModel = action.payload\r\n        },\r\n        setModelOptions: (state, action) => {\r\n            const { modelId, options } = action.payload\r\n            \r\n            const model = state.configuration.rules.models.find(m => m.id === modelId)\r\n            if (model) model.options = options\r\n        },\r\n        removeModel: (state, action) => {\r\n            const modelId  = action.payload\r\n\r\n            // remove from models\r\n            state.configuration.rules.models = state.configuration.rules.models.filter(m => m.id !== modelId)\r\n\r\n            // remove from languages\r\n            for (const lang in state.configuration.languages) {\r\n                const langObj = state.configuration.languages[lang]\r\n                langObj.models = langObj.models.filter(m => m.id !== modelId)\r\n            }\r\n        },\r\n        setBasePrice: (state, action) => {\r\n            state.configuration.rules.basePrice = action.payload\r\n        },\r\n        setDescription: (state, action) => {\r\n            const description = action.payload\r\n\r\n            state.configuration.languages[state.currentLanguage].description = description\r\n        },\r\n        setName: (state, action) => {\r\n            const name = action.payload\r\n\r\n            state.configuration.languages[state.currentLanguage].name = name\r\n            if (!state.configuration.languages[defaultLang].name) {\r\n                // also set the name to the default lang if its empty\r\n                state.configuration.languages[defaultLang].name = name\r\n            }\r\n        },\r\n        changeInputLanguage: (state, action) => {\r\n            const newLanguage = action.payload\r\n\r\n            state.currentLanguage = newLanguage\r\n        },\r\n        resetBuild: (state, action) => {\r\n            state.configuration = initialState\r\n        },\r\n        loadingStarted: (state) => {\r\n            state.status = 'loading'\r\n        },\r\n        loadingSucceeded: (state, action) => {\r\n            state.status = 'succeeded'\r\n        },\r\n        loadingFailed: (state, action) => {\r\n            state.status = 'failed'\r\n            state.error = action.payload\r\n        },\r\n        loadingHandled: (state, action) => {\r\n            state.status = 'idle'\r\n            state.error = null\r\n        }\r\n    },\r\n    // extraReducers: (builder) => {\r\n    //     builder\r\n    //         .addCase(loadingSucceeded, (state, action) => {\r\n    //         })\r\n    // }\r\n})\r\n\r\nexport const saveBuilderToStorage = () => (dispatch, getState) => {\r\n    writeToLocalStorage(selectBuilderConfiguration(getState()), 'builder')\r\n}\r\n\r\nexport const createSection = (sectionName) => (dispatch, getState) => {\r\n    // check if section doesn't already exist\r\n    const sectionExists = getDoesSectionExist(getState(), sectionName)\r\n    if (sectionExists) {\r\n        return false\r\n    }\r\n\r\n    dispatch(addSection(sectionName))\r\n    return true\r\n}\r\nexport const deleteSection = (sectionId) => (dispatch, getState) => {\r\n    const section = getBuilderSectionById(getState(), sectionId)\r\n\r\n    if (!section) {\r\n        console.log('Could not delete section -> no section matches the id: ' + sectionId)\r\n        return\r\n    }\r\n    \r\n    // remove associated groups\r\n    const groups = extractGroupsFromBuilderSection(section)\r\n    groups.forEach(groupId => {\r\n        dispatch(deleteOptionGroup(groupId))\r\n    })\r\n\r\n    // remove section\r\n    dispatch(removeSection(sectionId))\r\n}\r\n\r\nexport const createGroup = (sectionId, name, description, isRequired, isReplacementGroup) => (dispatch, getState) => {\r\n\r\n    const groupId = name.replace(' ', '_')\r\n\r\n    // check if section doesn't already exist\r\n    const groupExists = getDoesGroupdExist(getState(), groupId)\r\n    if (groupExists) {\r\n        return false\r\n    }\r\n\r\n    dispatch(addOptionGroup({sectionId, groupId, name, description, isRequired, isReplacementGroup}))\r\n    return true\r\n}\r\nexport const deleteOptionGroup = (groupId, sectionId) => (dispatch, getState) => {\r\n    const group = getBuilderGroupById(getState(), groupId)\r\n\r\n    if (!group) {\r\n        console.log('Could not delete group -> no group matches the id: ' + groupId)\r\n        return\r\n    }\r\n\r\n    // remove associated options\r\n    const options = extractOptionsFromBuilderGroup(group)\r\n    options.forEach(optionId => {\r\n        dispatch(deleteOption(groupId, optionId))\r\n    })\r\n\r\n    // remove group from other group requirements\r\n    const groups = selectBuilderGroupRequirements(getState())\r\n    for (const gId in groups) {\r\n        const requirements = groups[gId].filter(req => req !== groupId)\r\n        dispatch(setGroupRequirements({groupId: gId, requirements}))\r\n    }\r\n\r\n    // remove group\r\n    dispatch(removeOptionGroup({groupId, sectionId}))\r\n}\r\n\r\nexport const createOption = (groupId, name, description, price = 0) => (dispatch, getState) => {\r\n    const optionId = `${name}_${groupId}`.replace(' ', '_')\r\n\r\n    // check if option doesn't already exist\r\n    const optionExists = getDoesOptionExist(getState(), optionId)\r\n    if (optionExists) {\r\n        return false\r\n    }\r\n\r\n    dispatch(addOption({groupId, optionId, name, description, price}))\r\n    return true\r\n}\r\nexport const deleteOption = (groupId, name) => (dispatch, getState) => {\r\n    // remove option from models\r\n    const models = selectBuilderModels(getState())\r\n    models.forEach(model => {\r\n        const newOptions = extractModelOptionsFromBuilderModel(model).filter(optionId => optionId !== name) // get the models options and filter out the option that gets removed\r\n        dispatch(changeModelOptions(model.id, newOptions))\r\n    })\r\n\r\n    // remove option from other requirements\r\n    const allRequirements = selectBuilderOptionRequirements(getState())\r\n    for (const oId in allRequirements) {\r\n        const requirements = allRequirements[oId].filter(req => req !== name)\r\n        dispatch(setOptionRequirements({optionId: oId, requirements}))\r\n    }\r\n\r\n    // remove option from other incompatibilities\r\n    const allIncompatibilities = selectBuilderOptionIncompatibilities(getState())\r\n    for (const oId in allIncompatibilities) {\r\n        const incompatibilities = allIncompatibilities[oId].filter(req => req !== name)\r\n        dispatch(setOptionIncompatibilities({optionId: oId, incompatibilities}))\r\n    }\r\n    \r\n    dispatch(removeOption({groupId, optionId: name}))\r\n}\r\n\r\nexport const createModel = (modelName, description, options = []) => (dispatch) => {\r\n    dispatch(addModel({\r\n        modelName,\r\n        options,\r\n        description\r\n    }))\r\n}\r\nexport const createDefaultModel = (modelName) => (dispatch) => {\r\n    dispatch(setDefaultModel(modelName))\r\n}\r\nexport const changeModelOptions = (modelId, options) => (dispatch) => {\r\n    dispatch(setModelOptions({\r\n        modelId,\r\n        options\r\n    }))\r\n}\r\n\r\nexport const finishConfigurationBuild = () => async (dispatch, getState) => {\r\n    dispatch(loadingStarted())\r\n\r\n    let configuration = selectBuilderConfiguration(getState())\r\n    \r\n    writeToLocalStorage(initialState, 'builder')\r\n\r\n    postConfiguration(configuration)\r\n    .then(res => {\r\n        dispatch(loadingSucceeded(res))\r\n    })\r\n    .catch(error => {\r\n        dispatch(loadingFailed(error))\r\n    })\r\n}\r\n\r\n\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const { \r\n    addSection, changeSectionProperties, removeSection,\r\n    addOptionGroup, changeGroupProperties, setGroupRequirements, setGroupIsRequired, setGroupIsReplacement, removeOptionGroup,\r\n    addOption, changeOptionProperties, setOptionPrice, setOptionRequirements, setOptionIncompatibilities, removeOption,\r\n    addModel, changeModelProperties, setDefaultModel, setModelOptions, removeModel,\r\n    setBasePrice, setDescription, setName, changeInputLanguage,\r\n    resetBuild,\r\n    loadingStarted, loadingSucceeded, loadingFailed, loadingHandled\r\n} = builderSlice.actions\r\n\r\nexport default builderSlice.reducer","import { Grid, InputAdornment, TextField, Typography } from '@mui/material'\r\nimport React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { translate } from '../../../lang'\r\nimport { getBuilderDescription, getBuilderName, selectBuilderBasePrice } from '../../../state/configurationBuilder/builderSelectors'\r\nimport { setBasePrice, setDescription, setName } from '../../../state/configurationBuilder/builderSlice'\r\nimport { selectLanguage } from '../../../state/language/languageSelectors'\r\n\r\nfunction ConfigurationProperties({ name, description, basePrice, setName, setDescription, setPrice, language }) {\r\n\r\n    const [priceError, setPriceError] = useState(false)\r\n    const [nameInput, setNameInput] = useState(name)\r\n    const [descriptionInput, setDescriptionInput] = useState(description)\r\n    \r\n    useEffect(() => {\r\n        // when the description updates, also update the value for the input field\r\n        // -> language could change so the value for the other languages name might be different\r\n        setNameInput(name)\r\n    }, [name, setNameInput])\r\n    \r\n    useEffect(() => {\r\n        setDescriptionInput(description)\r\n    }, [description, setNameInput])\r\n\r\n    function handleNameChanged(event) {\r\n        if (nameInput) setName(nameInput)\r\n    }\r\n\r\n    function handleDescriptionChanged(event) {\r\n        if (descriptionInput) setDescription(descriptionInput)\r\n    }\r\n\r\n    function handleBasePriceChanged(event) {\r\n        const price = Number(event.target.value)\r\n\r\n        if (price || price === 0) {\r\n            setPriceError(false)\r\n            setPrice(price)\r\n        } else {\r\n            setPriceError(true)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Grid item container rowGap={2}>\r\n            <Grid item>\r\n                <Typography variant=\"h3\">{translate('productProperties', language)}</Typography>\r\n            </Grid>\r\n\r\n            <Grid item container rowSpacing={2} columnSpacing={2}>\r\n                <Grid item xs={12} sm={8} md={3}>\r\n                    <TextField \r\n                        fullWidth\r\n                        label={translate('configurationName', language)}\r\n                        variant=\"outlined\"\r\n                        value={nameInput}\r\n                        onChange={(e) => setNameInput(e.target.value)}\r\n                        onBlur={handleNameChanged}\r\n                    />\r\n                </Grid>\r\n\r\n                <Grid item xs={12} flexGrow={1} sm={4} md={2}>\r\n                    <TextField\r\n                        fullWidth\r\n                        label={translate('basePrice', language)}\r\n                        variant=\"outlined\"\r\n                        onChange={handleBasePriceChanged}\r\n                        error={priceError}\r\n                        defaultValue={basePrice}\r\n                        type=\"number\"\r\n                        InputProps={{\r\n                            inputProps: {\r\n                                min: 0\r\n                            },\r\n                            startAdornment: <InputAdornment position='start'></InputAdornment>\r\n                        }}\r\n                    />\r\n                </Grid>\r\n\r\n                <Grid item flexGrow={1}>\r\n                    <TextField \r\n                        fullWidth\r\n                        label={translate('description', language)}\r\n                        variant=\"outlined\"\r\n                        value={descriptionInput}\r\n                        onChange={(e) => setDescriptionInput(e.target.value)}\r\n                        onBlur={handleDescriptionChanged} // opnly change description when done (if called on every change -> there would be too many state calls that would result in lag)\r\n                        multiline\r\n                        maxRows={4}\r\n                    />\r\n                </Grid>\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    name: getBuilderName(state),\r\n    description: getBuilderDescription(state),\r\n    basePrice: selectBuilderBasePrice(state),\r\n    language: selectLanguage(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    setName: setName,\r\n    setDescription: setDescription,\r\n    setPrice: setBasePrice\r\n}\r\nexport default connect(\r\n    mapStateToProps, \r\n    mapDispatchToProps\r\n)(ConfigurationProperties)\r\n","import { Edit } from '@mui/icons-material'\r\nimport { Button, IconButton, Tooltip } from '@mui/material'\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { inputDialogOpen } from '../../../state/inputDialog/inputDialogSlice'\r\n\r\nfunction EditButton({ title, propertyName = '', oldValue = '', textButton = false, valueChangedCallback, openInputDialog }) {\r\n\r\n    function handleClick() {\r\n        const data = {\r\n            item: {name: propertyName || 'new value', value: oldValue }\r\n        }\r\n        openInputDialog(`${title}`, data, (data) => {\r\n            valueChangedCallback(data.item.value)\r\n        })\r\n    }\r\n\r\n    function renderTextButton() {\r\n        return (\r\n            <Button onClick={handleClick}>{`${title}`}</Button>\r\n        )\r\n    }\r\n\r\n    function renderIconButton() {\r\n        return (\r\n            <Tooltip title={title}>\r\n                <IconButton sx={{display: 'inline'}} onClick={handleClick}>\r\n                    <Edit />\r\n                </IconButton>\r\n            </Tooltip>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {textButton ? renderTextButton() : renderIconButton()}\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\r\n})\r\nconst mapDispatchToProps = {\r\n    openInputDialog: inputDialogOpen\r\n}\r\nexport default connect(\r\n    mapStateToProps, \r\n    mapDispatchToProps\r\n)(EditButton)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Checkbox, FormControl, Grid, IconButton, InputLabel, ListItemText, MenuItem, OutlinedInput, Select, Tooltip, Typography } from '@mui/material'\r\nimport { changeModelOptions, changeModelProperties, removeModel } from '../../../../state/configurationBuilder/builderSlice'\r\nimport { Delete } from '@mui/icons-material'\r\nimport { confirmDialogOpen } from '../../../../state/confirmationDialog/confirmationSlice'\r\nimport { translate } from '../../../../lang'\r\nimport { selectLanguage } from '../../../../state/language/languageSelectors'\r\nimport { getBuilderGroupNameByOptionId, getModelDescriptionFromBuilderModel, getModelNameFromBuilderModel, selectBuilderOptionsFromCurrentLanguage } from '../../../../state/configurationBuilder/builderSelectors'\r\nimport EditButton from '../EditButton'\r\n\r\nfunction Model({ model, name, description, allOptions, getBuilderGroupNameByOptionId, removeModel, changeModelProperties, setModelOptions, openConfirmDialog, language }) {\r\n\r\n    const { options } = model\r\n    const modelId = model.id\r\n\r\n    function handleDelete() {\r\n        openConfirmDialog(`${translate('removeModelConfirmation', language)}: '${name}'?`, {}, null, () => {\r\n            removeModel(modelId)\r\n        })\r\n    }\r\n\r\n    function handleChangeOptions(event) {\r\n        const {\r\n            target: { value },\r\n        } = event\r\n\r\n        // On autofill we get a stringified value. \r\n        const newOptions = typeof value === 'string' ? value.split(',') : value\r\n\r\n        setModelOptions(name, newOptions)\r\n    }\r\n\r\n    return (\r\n        <Grid container>\r\n            {/* Info */}\r\n            <Grid \r\n                item xs={12} sm={10} xl={9}\r\n            >\r\n                <Grid item container alignItems=\"center\">\r\n                    <Typography variant=\"body1\">\r\n                        {name}\r\n                    </Typography>\r\n\r\n                    <EditButton \r\n                        title={`${translate('editModelName', language)}`} \r\n                            propertyName={translate('modelName', language)} \r\n                            oldValue={name} \r\n                        valueChangedCallback={(newValue) => {changeModelProperties({modelId, newName: newValue})}}\r\n                    ></EditButton>\r\n\r\n                </Grid>\r\n                <Grid item container alignItems=\"center\">\r\n                    <Typography variant=\"body2\">\r\n                        {description}\r\n                        <EditButton\r\n                            title={`${translate('editModelDescription', language)}`} \r\n                            propertyName={translate('modelDescription', language)} \r\n                            oldValue={description} \r\n                            valueChangedCallback={(newValue) => {changeModelProperties({modelId, newDescription: newValue})}}\r\n                        ></EditButton>\r\n                    </Typography>\r\n\r\n\r\n                </Grid>\r\n            </Grid>\r\n\r\n            {/* Actions */}\r\n            <Grid \r\n                item container xs={12} sm={2} xl={1} \r\n                justifyContent={{xs: 'center', sm: 'flex-end'}}\r\n            >\r\n                \r\n\r\n                <Tooltip title={`${translate('remove', language)} '${name}'`}>\r\n                    <IconButton onClick={handleDelete}>\r\n                        <Delete />\r\n                    </IconButton>\r\n                </Tooltip>\r\n            </Grid>\r\n\r\n            {/* Option Select */}\r\n            <Grid\r\n                item container xs={12} xl={2}\r\n                justifyContent={{xs: 'center', xl: 'flex-end'}}\r\n            >\r\n                <FormControl sx={{ m: 1, width: 300 }}>\r\n                    <InputLabel id={`options-label-${name}`}>{translate('options', language)}</InputLabel>\r\n                    <Select\r\n                        labelId=\"options-label\"\r\n                        multiple\r\n                        value={options}\r\n                        onChange={handleChangeOptions}\r\n                        input={<OutlinedInput label={translate('options', language)} />}\r\n                        renderValue={(selectedIds) => {\r\n                                const selectedOptions = allOptions.filter(o => selectedIds.includes(o.id))\r\n                                return selectedOptions.map(o => o.name).join(', ')\r\n                            }\r\n                        }\r\n                    >\r\n                        {allOptions.map((option) => (\r\n                            <MenuItem key={option.id} value={option.id}>\r\n                                <Checkbox checked={options.indexOf(option.id) > -1} />\r\n                                <ListItemText primary={`${option.name} (${getBuilderGroupNameByOptionId(option.id)})`} />\r\n                            </MenuItem>\r\n                        ))}\r\n                    </Select>\r\n                </FormControl>\r\n            </Grid>\r\n            \r\n        </Grid>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    name: getModelNameFromBuilderModel(state, ownProps.model),\r\n    description: getModelDescriptionFromBuilderModel(state, ownProps.model),\r\n    allOptions: selectBuilderOptionsFromCurrentLanguage(state),\r\n    getBuilderGroupNameByOptionId: (optionId) => getBuilderGroupNameByOptionId(state, optionId),\r\n    language: selectLanguage(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    removeModel,\r\n    changeModelProperties,\r\n    setModelOptions: changeModelOptions,\r\n    openConfirmDialog: confirmDialogOpen\r\n}\r\nexport default connect(\r\n    mapStateToProps, \r\n    mapDispatchToProps\r\n)(Model)","import { Add } from '@mui/icons-material'\r\nimport { FormControl, Grid, IconButton, InputLabel, MenuItem, Select, Tooltip, Typography } from '@mui/material'\r\nimport { Box } from '@mui/system'\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { translate } from '../../../../lang'\r\nimport { selectBuilderDefaultModel, selectBuilderModels } from '../../../../state/configurationBuilder/builderSelectors'\r\nimport { createDefaultModel, createModel } from '../../../../state/configurationBuilder/builderSlice'\r\nimport { inputDialogOpen } from '../../../../state/inputDialog/inputDialogSlice'\r\nimport { selectLanguage } from '../../../../state/language/languageSelectors'\r\nimport Model from './Model'\r\n\r\nfunction ModelSelector({ models, selectedDefaultModel, setDefaultModel, createModel, openInputDialog, language }) {\r\n\r\n    function handleAddModel() {\r\n        const title = translate(`addModel`, language)\r\n\r\n        const data = {\r\n            modelName: {name: translate('modelName', language), value: '' },\r\n            modelDesc: {name: translate('modelDescription', language), value: '' },\r\n        }\r\n\r\n        openInputDialog(title, data, (data) => {\r\n    \r\n            const name = data.modelName.value\r\n            const description = data.modelDesc.value\r\n            \r\n            createModel(name, description)\r\n\r\n        })\r\n    }\r\n\r\n    function handleSetDefaultModel(event) {\r\n        setDefaultModel(event.target.value)\r\n    }\r\n\r\n    return (\r\n        <Box width=\"100%\">\r\n            <Grid container justifyContent=\"space-between\">\r\n\r\n                <Typography variant=\"h3\">{translate('models', language)}</Typography>\r\n\r\n                <Box sx={{ minWidth: 120 }}>\r\n                    <FormControl variant='standard' \r\n                        fullWidth\r\n                    >\r\n                        <InputLabel id=\"select-default-model-label\">{translate('defaultModel', language)}</InputLabel>\r\n                        <Select\r\n                            labelId='select-default-model-label'\r\n                            value={selectedDefaultModel}\r\n                            autoWidth\r\n                            label=\"Default Model\"\r\n                            onChange={handleSetDefaultModel}\r\n                            >\r\n                            {models.map((model, index) => (\r\n                                <MenuItem key={index} value={model.id}>{model.id}</MenuItem>\r\n                            ))}\r\n                        </Select>\r\n                    </FormControl>\r\n                </Box>\r\n            </Grid>\r\n\r\n            <Grid container gap={2} marginTop={2} direction=\"column\" justifyContent=\"center\" alignItems=\"center\">\r\n\r\n                {models.map((model, index) => (\r\n                    <Model key={index} model={model} isSelected={model.id === selectedDefaultModel}></Model>\r\n                ))}\r\n\r\n                <Box>\r\n                    <Tooltip title=\"Add Model\">\r\n                        <IconButton onClick={handleAddModel}>\r\n                            <Add />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                </Box>\r\n\r\n            </Grid>\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    models: selectBuilderModels(state),\r\n    selectedDefaultModel: selectBuilderDefaultModel(state),\r\n    language: selectLanguage(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    createModel: createModel,\r\n    setDefaultModel: createDefaultModel,\r\n    openInputDialog: inputDialogOpen\r\n}\r\nexport default connect(\r\n    mapStateToProps, \r\n    mapDispatchToProps\r\n)(ModelSelector)","import { Delete } from '@mui/icons-material'\r\nimport { Box, Checkbox, FormControl, Grid, IconButton, InputAdornment, InputLabel, ListItemText, MenuItem, OutlinedInput, Select, TextField, Tooltip, Typography } from '@mui/material'\r\nimport React from 'react'\r\nimport { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { translate } from '../../../../lang'\r\nimport { getBuilderGroupNameByOptionId, getBuilderOptionById, getBuilderOptionIncompatibilitiesByOptionId, getBuilderOptionPrice, getBuilderOptionRequirementsByOptionId, selectBuilderOptionsFromCurrentLanguage } from '../../../../state/configurationBuilder/builderSelectors'\r\nimport { changeOptionProperties, deleteOption, setOptionIncompatibilities, setOptionPrice, setOptionRequirements } from '../../../../state/configurationBuilder/builderSlice'\r\nimport { confirmDialogOpen } from '../../../../state/confirmationDialog/confirmationSlice'\r\nimport { selectLanguage } from '../../../../state/language/languageSelectors'\r\nimport EditButton from '../EditButton'\r\n\r\nfunction BuilderOption({ optionId, group, option, optionPrice, allOptions, optionReqirements, optionIncompatibilities, getBuilderGroupNameByOptionId, language, remove, setOptionPrice, setOptionRequirements, setOptionIncompatibilities, changeOptionProperties, openConfirmDialog }) {\r\n\r\n    const { name, description } = option\r\n\r\n    const [priceError, setPriceError] = useState(false)\r\n\r\n    function handleDelete() {\r\n        openConfirmDialog(`${translate('removeOptionConfigrmation', language)}: '${name}'?`, {}, null, () => {\r\n            remove(group.id, optionId)\r\n        })\r\n    }\r\n\r\n    const arrayFromMultiSelect = (event) => {\r\n        const {\r\n            target: { value }\r\n        } = event\r\n\r\n        // on autofill we get a stringified value\r\n        return typeof value === 'string' ? value.split(',') : value\r\n    }\r\n\r\n    function handlePriceChanged(event) {\r\n        const price = Number(event.target.value)\r\n\r\n        // check if the price is valid\r\n        if (price < 0) {\r\n            setPriceError(true)\r\n            return\r\n        }\r\n\r\n        setPriceError(false)\r\n        setOptionPrice({optionId, price})\r\n    }\r\n\r\n    function handleSetRequirements(event) {\r\n        const newRequirements = arrayFromMultiSelect(event)\r\n\r\n        setOptionRequirements({optionId, requirements: newRequirements})\r\n    }\r\n\r\n    function handleSetIncompatibilities(event) {\r\n        const newIncomps = arrayFromMultiSelect(event)\r\n\r\n        setOptionIncompatibilities({optionId, incompatibilities: newIncomps})\r\n    }\r\n\r\n    return (\r\n        <Grid container paddingTop={2} paddingLeft={2} paddingBottom={2}>\r\n            <Grid item width=\"100%\">\r\n                <Box display=\"flex\" justifyContent=\"space-between\">\r\n                    {/* Info */}\r\n                    <Box>\r\n                        <Typography variant=\"body1\">\r\n                            {name}\r\n                            <EditButton \r\n                                title={`${translate('editOptionName', language)}`}\r\n                                propertyName={translate('optionName', language)} \r\n                                oldValue={name} \r\n                                valueChangedCallback={(newValue) => {changeOptionProperties({optionId, newName: newValue})}}\r\n                            ></EditButton>\r\n                        </Typography>\r\n                        <Typography variant=\"body2\">\r\n                            {description}\r\n                            <EditButton \r\n                                title={`${translate('editOptionDescription', language)}`}\r\n                                propertyName={translate('optionDescription', language)} \r\n                                oldValue={description} \r\n                                valueChangedCallback={(newValue) => {changeOptionProperties({optionId, newDescription: newValue})}}\r\n                            ></EditButton>\r\n                        </Typography>\r\n                    </Box>\r\n\r\n                    {/* Actions */}\r\n                    <Tooltip title={`${translate('remove', language)} '${name}'`}>\r\n                        <IconButton onClick={handleDelete}>\r\n                            <Delete />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                </Box>\r\n            </Grid>\r\n\r\n            <Grid item container justifyContent=\"center\">\r\n                <FormControl sx={{ m: 1, width: 300 }}>\r\n                    <TextField \r\n                        fullWidth\r\n                        label={translate('optionPrice', language)}\r\n                        variant=\"outlined\"\r\n                        onChange={handlePriceChanged}\r\n                        error={priceError}\r\n                        defaultValue={optionPrice}\r\n                        type=\"number\"\r\n                        InputProps={{\r\n                            inputProps: {\r\n                                min: 0\r\n                            },\r\n                            startAdornment: <InputAdornment position='start'></InputAdornment>\r\n                        }}\r\n                    />\r\n                </FormControl>\r\n                <FormControl sx={{ m: 1, width: 300 }}>\r\n                    {Multiselect(translate('requirements', language), optionReqirements, allOptions.filter(o => o.id !== optionId), getBuilderGroupNameByOptionId, handleSetRequirements)}\r\n                </FormControl>\r\n                <FormControl sx={{ m: 1, width: 300 }}>\r\n                    {Multiselect(translate('incompatibilities', language), optionIncompatibilities, allOptions.filter(o => o.id !== optionId), getBuilderGroupNameByOptionId, handleSetIncompatibilities)}\r\n                </FormControl>\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\n\r\nconst Multiselect = (title, resultOptions, allOptions, getBuilderGroupNameByOptionId, onChangeCallback) => (\r\n    <>\r\n        <InputLabel id={`options-label-${title}`}>{title}</InputLabel>\r\n        <Select\r\n            labelId={`options-label-${title}`}\r\n            multiple\r\n            value={resultOptions}\r\n            onChange={onChangeCallback}\r\n            input={<OutlinedInput label={title} />}\r\n            renderValue={(selectedIds) => {\r\n                    const selectedOptions = allOptions.filter(o => selectedIds.includes(o.id))\r\n                    return selectedOptions.map(o => o.name).join(', ')\r\n                }\r\n            }\r\n        >\r\n            {allOptions.map((option) => {\r\n                return (\r\n                    <MenuItem key={option.id} value={option.id}>\r\n                        <Checkbox checked={resultOptions.indexOf(option.id) > -1} />\r\n                        <ListItemText primary={`${option.name} (${getBuilderGroupNameByOptionId(option.id)})`} />\r\n                    </MenuItem>\r\n                )\r\n            })}\r\n        </Select>\r\n    </>\r\n)\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    option: getBuilderOptionById(state, ownProps.optionId),\r\n    optionPrice: getBuilderOptionPrice(state, ownProps.optionId),\r\n    allOptions: selectBuilderOptionsFromCurrentLanguage(state),\r\n    optionReqirements: getBuilderOptionRequirementsByOptionId(state, ownProps.optionId),\r\n    optionIncompatibilities: getBuilderOptionIncompatibilitiesByOptionId(state, ownProps.optionId),\r\n    getBuilderGroupNameByOptionId: (optionId) => getBuilderGroupNameByOptionId(state, optionId),\r\n    language: selectLanguage(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    remove: deleteOption,\r\n    setOptionRequirements,\r\n    setOptionIncompatibilities,\r\n    setOptionPrice,\r\n    changeOptionProperties,\r\n    openConfirmDialog: confirmDialogOpen\r\n}\r\nexport default connect(\r\n    mapStateToProps, \r\n    mapDispatchToProps\r\n)(BuilderOption)","import { Checkbox, Divider, FormControl, FormControlLabel, Grid, IconButton, InputLabel, ListItemText, MenuItem, OutlinedInput, Select, Tooltip, Typography } from '@mui/material'\r\nimport { Box } from '@mui/system'\r\nimport React from 'react'\r\nimport { selectLanguage } from '../../../../state/language/languageSelectors'\r\nimport { translate } from '../../../../lang'\r\nimport { connect } from 'react-redux'\r\nimport BuilderOption from './BuilderOption'\r\nimport { Add, Delete } from '@mui/icons-material'\r\nimport { alertTypes, openAlert } from '../../../../state/alert/alertSlice'\r\nimport { changeGroupProperties, createOption, deleteOptionGroup, setGroupIsReplacement, setGroupIsRequired, setGroupRequirements } from '../../../../state/configurationBuilder/builderSlice'\r\nimport { inputDialogOpen } from '../../../../state/inputDialog/inputDialogSlice'\r\nimport { confirmDialogOpen } from '../../../../state/confirmationDialog/confirmationSlice'\r\nimport { getBuilderGroupRequirementsByGroupId, getGroupDescriptionFromBuilderGroup, getGroupNameFromBuilderGroup, selectBuilderGroupsFromCurrentLanguage } from '../../../../state/configurationBuilder/builderSelectors'\r\nimport EditButton from '../EditButton'\r\n\r\nfunction OptionGroup({group, name, description, sectionId, allGroups, groupRequirements, createOption, setGroupRequirements, setGroupIsRequired, setGroupIsReplacement, changeGroupProperties, deleteGroup, openInputDialog, openConfirmDialog, openAlert, language}) {\r\n\r\n    const { id, optionIds, required, replacement } = group\r\n\r\n    function handleAddOption() {\r\n        const data = {\r\n            optionName: {name: translate('optionName', language), value: '' },\r\n            optionDescription: {name: translate('optionDescription', language), value: ''},\r\n        }\r\n        openInputDialog(translate('newOption', language), data, (data) => {\r\n            const success = createOption(id, data.optionName.value, data.optionDescription.value)\r\n            if (!success) {\r\n                openAlert('Option already exists!', alertTypes.ERROR)\r\n            }\r\n        })\r\n    }\r\n\r\n    function handleRemoveGroup() {\r\n        openConfirmDialog(`${translate('removeGroupConfirmation', language)}: ${name}?`, {}, null, () => {\r\n            deleteGroup(id, sectionId)\r\n        })\r\n    }\r\n\r\n    function handleSetGroupRequirements(event) {\r\n        const {\r\n            target: { value }\r\n        } = event\r\n\r\n        // on autofill we get a stringified value\r\n        const requirements = typeof value === 'string' ? value.split(',') : value\r\n        setGroupRequirements({groupId: id, requirements: requirements})\r\n    }\r\n\r\n    function handleChangeRequired(event) {\r\n        setGroupIsRequired({groupId: id, required: !required})\r\n    }\r\n\r\n    function handleChangeMultiselect(event) {\r\n        setGroupIsReplacement({groupId: id, replacement: !replacement})\r\n    }\r\n\r\n    return (\r\n        <Box marginBottom={1} padding={1} sx={{border: '1px dashed grey'}}>\r\n            <Box display={'flex'} flexWrap=\"wrap\" justifyContent={'space-between'} alignItems={'center'}>\r\n                <Box>\r\n                    <Typography variant=\"h3\">\r\n                        {name}\r\n                        <EditButton \r\n                            title={`${translate('editGroupName', language)}`}\r\n                            propertyName={translate('groupName', language)} \r\n                            oldValue={name} \r\n                            valueChangedCallback={(newValue) => {changeGroupProperties({groupId: id, newName: newValue})}}\r\n                        ></EditButton>\r\n                    </Typography>\r\n                    <Typography variant=\"subtitle1\">\r\n                        {description}\r\n                        <EditButton \r\n                            title={`${translate('editGroupDescription', language)}`} \r\n                            propertyName={translate('groupDescription', language)} \r\n                            oldValue={description} \r\n                            valueChangedCallback={(newValue) => {changeGroupProperties({groupId: id, newDescription: newValue})}}\r\n                        ></EditButton>\r\n                    </Typography>\r\n                </Box>\r\n\r\n                <Box>\r\n                    <Tooltip title={translate('addOption', language)}>\r\n                        <IconButton onClick={handleAddOption}>\r\n                            <Add />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                    <Tooltip title={`${translate('remove', language)} '${name}'`}>\r\n                        <IconButton onClick={handleRemoveGroup}>\r\n                            <Delete />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                </Box>\r\n            </Box>\r\n\r\n            <Grid item container justifyContent=\"center\">\r\n                <Grid \r\n                    item container justifyContent=\"center\"\r\n                    xs={12} xl={6}\r\n                >\r\n                    {Multiselect(translate('requirements', language), name, groupRequirements, allGroups.filter(g => g.id !== id), handleSetGroupRequirements)}\r\n                </Grid>\r\n                <Grid \r\n                    item container justifyContent=\"center\"\r\n                    xs={12} xl={3} \r\n                >\r\n                    {CheckboxInput(translate('required', language), required, (e) => handleChangeRequired(e))}\r\n                </Grid>\r\n                <Grid \r\n                    item container justifyContent=\"center\"\r\n                    xs={12} xl={3}\r\n                >\r\n                    {CheckboxInput(translate('multiselect', language), !replacement, (e) => handleChangeMultiselect(e))}\r\n                </Grid>\r\n            </Grid>\r\n            \r\n            <Box>\r\n                {optionIds.map(optionId => (\r\n                    <div key={optionId}>\r\n                        <Divider variant=\"middle\" />\r\n                        <BuilderOption key={optionId} group={group} optionId={optionId}></BuilderOption>\r\n                    </div>\r\n                ))}\r\n            </Box>\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst CheckboxInput = (title, checked, callback) => {\r\n    return (\r\n        <FormControl sx={{ m: 1, width: 300 }}>\r\n            <FormControlLabel\r\n                label={title}\r\n                labelPlacement=\"end\"\r\n                control={\r\n                    <Checkbox\r\n                        checked={checked}\r\n                        onChange={(event) => {\r\n                            callback(event)\r\n                        }}\r\n                    />\r\n                }\r\n            />\r\n        </FormControl>\r\n    )\r\n}\r\n\r\nconst Multiselect = (title, groupName, resultGroups, allGroups, onChangeCallback) => (\r\n    <FormControl sx={{ m: 1, width: 300 }}>\r\n        <InputLabel id={`${title}-${groupName}`}>{title}</InputLabel>\r\n        <Select\r\n            labelId={`${title}-${groupName}`}\r\n            multiple\r\n            value={resultGroups}\r\n            onChange={onChangeCallback}\r\n            input={<OutlinedInput label={title} />}\r\n            renderValue={(selectedIds) => {\r\n                    const selectedGroups = allGroups.filter(g => selectedIds.includes(g.id))\r\n                    return selectedGroups.map(g => g.name).join(', ')\r\n                }\r\n            }\r\n        >\r\n            {allGroups.map((group) => (\r\n                <MenuItem key={group.id} value={group.id}>\r\n                    <Checkbox checked={resultGroups.indexOf(group.id) > -1} />\r\n                    <ListItemText primary={group.name} />\r\n                </MenuItem>\r\n            ))}\r\n        </Select>\r\n    </FormControl>\r\n)\r\n\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    name: getGroupNameFromBuilderGroup(state, ownProps.group.id),\r\n    description: getGroupDescriptionFromBuilderGroup(state, ownProps.group.id),\r\n    allGroups: selectBuilderGroupsFromCurrentLanguage(state),\r\n    groupRequirements: getBuilderGroupRequirementsByGroupId(state, ownProps.group.id),\r\n    language: selectLanguage(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    createOption,\r\n    setGroupRequirements,\r\n    setGroupIsRequired,\r\n    setGroupIsReplacement,\r\n    changeGroupProperties,\r\n    deleteGroup: deleteOptionGroup,\r\n    openInputDialog: inputDialogOpen,\r\n    openConfirmDialog: confirmDialogOpen,\r\n    openAlert\r\n}\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(OptionGroup)\r\n","import React, { useState } from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\nimport Tabs from '@mui/material/Tabs'\r\nimport Tab from '@mui/material/Tab'\r\nimport Box from '@mui/material/Box'\r\nimport { Button, IconButton, Stack, Tooltip, Typography } from '@mui/material'\r\nimport { Add } from '@mui/icons-material'\r\nimport { connect } from 'react-redux'\r\nimport { changeSectionProperties, createGroup, createSection, deleteSection } from '../../../state/configurationBuilder/builderSlice'\r\nimport { inputDialogOpen } from '../../../state/inputDialog/inputDialogSlice'\r\nimport { selectLanguage } from '../../../state/language/languageSelectors'\r\nimport { alertTypes, openAlert } from '../../../state/alert/alertSlice'\r\nimport { getBuilderGroupsInSection, selectBuilderGroups, selectBuilderSectionsFromCurrentLanguage } from '../../../state/configurationBuilder/builderSelectors'\r\nimport BuilderOptionGroup from './Options/BuilderOptionGroup'\r\nimport { translate } from '../../../lang'\r\nimport { confirmDialogOpen } from '../../../state/confirmationDialog/confirmationSlice'\r\nimport EditButton from './EditButton'\r\n\r\nfunction TabPanel(props) {\r\n    const { children, value, index, ...other } = props\r\n\r\n    return (\r\n        <div\r\n            role=\"tabpanel\"\r\n            hidden={value !== index}\r\n            id={`simple-tabpanel-${index}`}\r\n            aria-labelledby={`simple-tab-${index}`}\r\n            {...other}\r\n        >\r\n            {value === index && (\r\n            <Box sx={{ p: 3 }}>\r\n                {children}\r\n            </Box>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\nTabPanel.propTypes = {\r\n    children: PropTypes.node,\r\n    index: PropTypes.number.isRequired,\r\n    value: PropTypes.number.isRequired\r\n}\r\n\r\nfunction a11yProps(index) {\r\n    return {\r\n        id: `simple-tab-${index}`,\r\n        'aria-controls': `simple-tabpanel-${index}`,\r\n    }\r\n}\r\n\r\n// a tab has to have a children prop\r\nfunction TooltipAsTab({ children, title }) {\r\n    return <Tooltip title={title} children={children} />\r\n}\r\n\r\nfunction SectionTabs({ sections, getOptionGroupsInSection, optionGroups, openInputDialog, openConfirmDialog, createSection, createGroup, changeSectionProperties, deleteSection, openAlert, language }) {\r\n\r\n    const [value, setValue] = useState(0)\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setValue(newValue)\r\n    }\r\n\r\n    const handleAddSection = () => {\r\n        const data = {\r\n            sectionName: {name: translate('sectionName', language), value: '' }\r\n        }\r\n        openInputDialog(translate('newSection', language), data, (data) => {\r\n            const success = createSection(data.sectionName.value)\r\n            if (!success) {\r\n                openAlert('Section already exists!', alertTypes.ERROR)\r\n            }\r\n        })\r\n    }\r\n\r\n    const handleRemoveSection = (sectionId, name) => {\r\n        openConfirmDialog(`${translate('removeSectionConfirmation', language)}: ${name}?`, {}, null, () => {\r\n            deleteSection(sectionId)\r\n            setValue(0)\r\n        })\r\n    }\r\n\r\n    const handleAddGroup = (sectionId) => {\r\n        const data = {\r\n            groupName: {name: translate('groupName', language), value: '' },\r\n            groupDescription: {name: translate('groupDescription', language), value: ''},\r\n            groupIsRequired: {name: translate('required', language), value: false, isCheckBox: true},\r\n            groupIsMultiselect: {name: translate('multiselect', language), value: true, isCheckBox: true}\r\n        }\r\n        openInputDialog(translate('newGroup', language), data, (data) => {\r\n            const isReplacementGroup = !data.groupIsMultiselect.value   // is replacement group if its not a multiselect\r\n            const success = createGroup(sectionId, data.groupName.value, data.groupDescription.value, data.groupIsRequired.value, isReplacementGroup)\r\n            if (!success) {\r\n                openAlert('Group already exists!', alertTypes.ERROR)\r\n            }\r\n        })\r\n    }\r\n\r\n    const renderSectionHeader = (sectionId, sectionName) => {\r\n        return (\r\n            <Box>\r\n                <Button onClick={() => handleAddGroup(sectionId)}>{translate('addOptionGroup', language)}</Button>\r\n                <EditButton \r\n                    title={`${translate('editSectionName', language)}`}\r\n                    propertyName={translate('sectionName', language)}\r\n                    oldValue={sectionName}\r\n                    valueChangedCallback={(newValue) => {changeSectionProperties({sectionId, newName: newValue})}}\r\n                    textButton={true}\r\n                ></EditButton>\r\n                <Button onClick={() => handleRemoveSection(sectionId, sectionName)}>{translate('removeSection', language)}</Button>\r\n            </Box>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Box sx={{ width: '100%' }}>\r\n            <Typography variant=\"h3\">{translate('options', language)}</Typography>\r\n\r\n            <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\r\n                <Tabs \r\n                    value={value} \r\n                    scrollButtons=\"auto\"\r\n                    allowScrollButtonsMobile\r\n                    variant=\"scrollable\" \r\n                    onChange={handleChange} \r\n                    aria-label=\"sectiontabs\"\r\n                >\r\n                    {sections.map((section, index) => (\r\n                        <Tab key={section.id} label={section.name} wrapped {...a11yProps(index)} />\r\n                    ))}\r\n\r\n                    <TooltipAsTab title={translate('addSection', language)}>\r\n                        <IconButton onClick={() => handleAddSection()}>\r\n                            <Add />\r\n                        </IconButton>\r\n                    </TooltipAsTab>\r\n                </Tabs>\r\n            </Box>\r\n            \r\n            {sections.map((section, index) => (\r\n                <TabPanel key={section.id} value={value} index={index}>\r\n                    <Stack minHeight={400} mb={10}>\r\n                        {renderSectionHeader(section.id, section.name)}\r\n\r\n                        {optionGroups\r\n                            .filter(group => getOptionGroupsInSection(section.id).includes(group.id))\r\n                            .map((group, index) => (\r\n                                <BuilderOptionGroup key={group.id} group={group} sectionId={section.id}></BuilderOptionGroup>\r\n                        ))}\r\n                    </Stack>\r\n                </TabPanel>\r\n            ))}\r\n\r\n            {/* <TabPanel value={value} index={0}>\r\n                <Typography variant=\"body1\">Item One 1</Typography>\r\n            </TabPanel>\r\n            <TabPanel value={value} index={1}>\r\n                <Typography variant=\"body1\">Item Two</Typography>\r\n            </TabPanel>\r\n            <TabPanel value={value} index={2}>\r\n                <Typography variant=\"body1\">Item Three</Typography>\r\n            </TabPanel> */}\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    sections: selectBuilderSectionsFromCurrentLanguage(state),\r\n    getOptionGroupsInSection: (sectionId) => getBuilderGroupsInSection(state, sectionId),\r\n    optionGroups: selectBuilderGroups(state),\r\n    language: selectLanguage(state),\r\n})\r\nconst mapDispatchToProps = {\r\n    openInputDialog: inputDialogOpen,\r\n    openConfirmDialog: confirmDialogOpen,\r\n    createSection,\r\n    changeSectionProperties,\r\n    deleteSection,\r\n    createGroup,\r\n    openAlert\r\n}\r\nexport default connect(\r\n    mapStateToProps, \r\n    mapDispatchToProps\r\n)(SectionTabs)","import { Delete, Done } from '@mui/icons-material'\r\nimport { FormControl, Grid, IconButton, InputLabel, ListItemText, MenuItem, OutlinedInput, Select, Tooltip, Typography } from '@mui/material'\r\nimport React, { useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { languageNames, translate } from '../../../lang'\r\nimport { alertTypes, openAlert } from '../../../state/alert/alertSlice'\r\nimport { selectBuilderError, selectBuilderInputLanguage, selectBuilderStatus } from '../../../state/configurationBuilder/builderSelectors'\r\nimport { changeInputLanguage, finishConfigurationBuild, loadingHandled, resetBuild, saveBuilderToStorage } from '../../../state/configurationBuilder/builderSlice'\r\nimport { confirmDialogOpen } from '../../../state/confirmationDialog/confirmationSlice'\r\nimport { selectLanguage } from '../../../state/language/languageSelectors'\r\nimport { selectIsAdmin } from '../../../state/user/userSelector'\r\nimport ConfigurationProperties from './ConfigurationProperties'\r\nimport CreateModel from './Model/CreateModel'\r\nimport SectionTabs from './SectionTabs'\r\n\r\nfunction ConfigurationBuilderView({ isAdmin, status, error, inputLanguage, openAlert, openConfirmDialog, changeInputLanguage, saveBuilderToStorage, finish, reset, loadingHandled, language }) {\r\n    \r\n    const autoSave = true\r\n    const autoSaveInterval = 10000\r\n\r\n    const navigate = useNavigate()\r\n\r\n    // open alert and navigate to the home page if the configuration is created\r\n    useEffect(() => {\r\n        if (status === 'succeeded') {\r\n            loadingHandled()\r\n            openAlert(`Successfully created a new configuration!`, alertTypes.SUCCESS)\r\n            navigate('/')\r\n        }\r\n    }, [status, navigate, loadingHandled, openAlert])\r\n\r\n    // open alert if there is an error\r\n    useEffect(() => {\r\n        if (error) {\r\n            loadingHandled()\r\n            console.log('error:', error)\r\n            openAlert(`Error: ${error}`, alertTypes.ERROR)\r\n        }\r\n    }, [error, loadingHandled, openAlert])\r\n\r\n    // if the user is not an admin, navigate to the home page\r\n    useEffect(() => {\r\n        if (!isAdmin) {\r\n            navigate('/')\r\n        }\r\n    }, [isAdmin, navigate])\r\n\r\n\r\n    // start the auto save when the component is initialized\r\n    useEffect(() => {\r\n        if (!autoSave) return\r\n\r\n        let saveBuilderInterval = setInterval(() => {\r\n            console.log('Saving Builder...')\r\n            saveBuilderToStorage()\r\n        }, autoSaveInterval)\r\n\r\n        // clear interval when the component is unmounted\r\n        return () => {clearInterval(saveBuilderInterval)}\r\n    }, [saveBuilderToStorage])\r\n\r\n    const handleFinishClicked = () => {\r\n        openConfirmDialog(translate('createConfiguration', language), {}, null, () => {\r\n            finish()\r\n        })\r\n    }\r\n\r\n    const handleResetClicked = () => {\r\n        openConfirmDialog(translate('resetBuildConfirmation', language), {}, null, () => {\r\n            reset()\r\n        })\r\n    }\r\n\r\n    const handleChangeInputLanguage = (event) => {\r\n        const newLang = event.target.value\r\n        changeInputLanguage(newLang)\r\n    }\r\n\r\n    const renderBuilderBody = () => {\r\n        return (\r\n            <Grid container direction=\"column\" gap={2}>\r\n                <ConfigurationProperties></ConfigurationProperties>\r\n                <CreateModel></CreateModel>\r\n                <SectionTabs></SectionTabs>\r\n            </Grid>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Grid container justifyContent=\"flex-end\">\r\n                {/* Header */}\r\n                <Grid item sx={{flexGrow: 1}}>\r\n                    <Typography variant=\"h2\">{translate('createNewConfiguration', language)}</Typography>\r\n                </Grid>\r\n\r\n                {/* Actions */}\r\n                <Grid item display=\"flex\" alignItems=\"center\" sx={{paddingTop: 2, justifySelf: 'flex-end'}}>\r\n                    \r\n                    <FormControl sx={{width: 150}} >\r\n                        <InputLabel id=\"select-input-lang-label\">Input Language</InputLabel>\r\n                        <Select\r\n                            labelId='select-input-lang-label'\r\n                            value={inputLanguage}\r\n                            autoWidth\r\n                            onChange={handleChangeInputLanguage}\r\n                            input={<OutlinedInput label='Input Language' />}\r\n                        >\r\n                            {Object.keys(languageNames).map((lang, index) => (\r\n                                <MenuItem sx={{width: 150}} key={index} value={languageNames[lang]}>\r\n                                    <ListItemText primary={lang}></ListItemText>\r\n                                </MenuItem>\r\n                            ))}\r\n                        </Select>\r\n                    </FormControl>\r\n\r\n                    <Tooltip title={translate('finishBuild', language)}>\r\n                        <IconButton \r\n                            variant=\"contained\" \r\n                            onClick={handleFinishClicked}\r\n                            >\r\n                            <Done />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n\r\n                    <Tooltip title={translate('resetBuild', language)}>\r\n                        <IconButton \r\n                            variant=\"contained\" \r\n                            onClick={handleResetClicked}\r\n                            >\r\n                            <Delete />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                </Grid>\r\n\r\n                {/* Language Select */}\r\n                <Grid item container>\r\n                </Grid>\r\n\r\n                {/* Builder */}\r\n                {renderBuilderBody()}\r\n            </Grid>\r\n        </div>\r\n    )\r\n}\r\nconst mapStateToProps = (state) => ({\r\n    isAdmin: selectIsAdmin(state),\r\n    status: selectBuilderStatus(state),\r\n    error: selectBuilderError(state),\r\n    inputLanguage: selectBuilderInputLanguage(state),\r\n    language: selectLanguage(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    openAlert,\r\n    openConfirmDialog: confirmDialogOpen,\r\n    changeInputLanguage,\r\n    saveBuilderToStorage,\r\n    finish: finishConfigurationBuild,\r\n    reset: resetBuild,\r\n    loadingHandled: loadingHandled\r\n\r\n}\r\nexport default connect(\r\n    mapStateToProps, mapDispatchToProps\r\n)(ConfigurationBuilderView)\r\n\r\n\r\n\r\n// export class ConfigurationBuilderView extends Component {\r\n\r\n//     constructor(props) {\r\n//         super(props)\r\n//     }\r\n\r\n//     componentDidUpdate() {\r\n//         this.checkState()\r\n//     }\r\n\r\n//     componentDidMount() {\r\n//         this.checkState()\r\n//         this.saveBuilderInterval = setInterval(this.saveBuilder, 10000)\r\n//     }\r\n\r\n//     componentWillUnmount() {\r\n//         clearInterval(this.saveBuilderInterval)\r\n//     }\r\n\r\n//     checkState = () => {\r\n//         console.log('CHECKING STATE')\r\n//         const {navigate} = this.props\r\n\r\n//         const { isAdmin, status, error, openAlert, loadingHandled } = this.props\r\n\r\n//         if (error) {\r\n//             loadingHandled()\r\n//             console.log('error:', error)\r\n//             openAlert(`Error: ${error}`, alertTypes.ERROR)\r\n//         }\r\n\r\n//         if (status === 'succeeded') {\r\n//             loadingHandled()\r\n//             openAlert(`Successfully created a new configuration!`, alertTypes.SUCCESS)\r\n//             navigate('/')\r\n//         }\r\n\r\n//         console.log(isAdmin)\r\n//         if (!isAdmin) {\r\n//             console.log('not admin')\r\n//             console.log(navigate)\r\n//             navigate('/')\r\n//         }\r\n//     }\r\n\r\n//     saveBuilder = () => {\r\n//         const { saveBuilderToStorage } = this.props\r\n//         console.log('Saving Builder...')\r\n//         saveBuilderToStorage()\r\n//     }\r\n\r\n//     handleFinishClicked = () => {\r\n//         const { openInputDialog, finish, language } = this.props\r\n\r\n//         const data = {\r\n//             configurationName: {name: translate('configurationName', language), value: '' }\r\n//         }\r\n//         const title = translate('finishConfiguration', language)\r\n\r\n//         openInputDialog(title, data, (data) => {\r\n//             const configurationName = data.configurationName.value\r\n\r\n//             finish(configurationName)\r\n//         })\r\n//     }\r\n\r\n//     handleResetClicked = () => {\r\n//         const { reset, language } = this.props\r\n        \r\n//         this.openConfirmDialog(translate('resetBuildConfirmation', language), {}, null, () => {\r\n//             reset()\r\n//         })\r\n//     }\r\n\r\n//     renderBuilderBody = () => {\r\n//         return (\r\n//             <Grid container direction=\"column\" gap={2}>\r\n//                 <ConfigurationProperties></ConfigurationProperties>\r\n//                 <CreateModel></CreateModel>\r\n//                 <SectionTabs></SectionTabs>\r\n//             </Grid>\r\n//         )\r\n//     }\r\n\r\n//     render() {\r\n//         const { language } = this.props\r\n        \r\n//         return (\r\n//             <div>\r\n//                 <Grid container justifyContent=\"flex-end\">\r\n//                     <Grid item sx={{flexGrow: 1}}>\r\n//                         <Typography variant=\"h2\">{translate('createNewConfiguration', language)}</Typography>\r\n//                     </Grid>\r\n\r\n//                     <Grid item sx={{paddingTop: 2, justifySelf: 'flex-end'}}>\r\n//                         <Tooltip title={translate('finishBuild', language)}>\r\n//                             <IconButton \r\n//                                 variant=\"contained\" \r\n//                                 onClick={this.handleFinishClicked}\r\n//                                 >\r\n//                                 <Done />\r\n//                             </IconButton>\r\n//                         </Tooltip>\r\n//                         <Tooltip title={translate('resetBuild', language)}>\r\n//                             <IconButton \r\n//                                 variant=\"contained\" \r\n//                                 onClick={this.handleResetClicked}\r\n//                                 >\r\n//                                 <Delete />\r\n//                             </IconButton>\r\n//                         </Tooltip>\r\n//                     </Grid>\r\n//                 </Grid>\r\n\r\n//                 {this.renderBuilderBody()}\r\n//             </div>\r\n//         )\r\n//     }\r\n// }\r\n\r\n// const mapStateToProps = (state) => ({\r\n//     isAdmin: selectIsAdmin(state),\r\n//     status: selectBuilderStatus(state),\r\n//     error: selectBuilderError(state),\r\n//     language: selectLanguage(state)\r\n// })\r\n// const mapDispatchToProps = {\r\n//     openAlert,\r\n//     openInputDialog: inputDialogOpen,\r\n//     openConfirmDialog: confirmDialogOpen,\r\n//     saveBuilderToStorage: saveBuilderToStorage,\r\n//     finish: finishConfigurationBuild,\r\n//     reset: resetBuild,\r\n//     loadingHandled: loadingHandled\r\n// }\r\n// const ConfigurationBuilderViewConnected = connect(\r\n//     mapStateToProps, \r\n//     mapDispatchToProps\r\n// )(ConfigurationBuilderView)\r\n\r\n// // export default ConfigurationBuilderViewConnected\r\n\r\n// function WithNavigate(props) {\r\n//     const navigate = useNavigate()\r\n//     return <ConfigurationBuilderViewConnected {...props} navigate={navigate}></ConfigurationBuilderViewConnected>\r\n// }\r\n// export default WithNavigate","import { ListItemText } from '@mui/material'\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { getOption } from '../../../../state/configuration/configurationSelectors'\r\n\r\nfunction ModelOptionText({ name, description }) {\r\n\r\n    return (\r\n        <ListItemText\r\n            primary={name}\r\n            secondary={description}\r\n        ></ListItemText>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    const option = getOption(state, ownProps.optionId)\r\n\r\n    return {\r\n        name: option.name,\r\n        description: option.description\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n\r\n}\r\nexport default connect(\r\n    mapStateToProps, \r\n    mapDispatchToProps\r\n)(ModelOptionText)\r\n","import { ListItem } from '@mui/material'\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { getOptionsInSection } from '../../../../state/configuration/configurationSelectors'\r\nimport ModelOptionText from './ModelOptionText'\r\n\r\nfunction SectionOptionList({ allOptions, selectedOptions }) {\r\n\r\n    if (!selectedOptions || !allOptions) {\r\n        console.log(selectedOptions)\r\n        return (\r\n            <></>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {allOptions.filter(o => selectedOptions.includes(o)).map(optionId => (\r\n                <ListItem sx={{paddingBottom: 0, paddingTop: 0}} key={optionId}>\r\n                    <ModelOptionText optionId={optionId}></ModelOptionText>\r\n                </ListItem>\r\n            ))}\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    allOptions: getOptionsInSection(state, ownProps.sectionId)\r\n})\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps, \r\n    mapDispatchToProps\r\n)(SectionOptionList)\r\n","import { Box, ButtonBase, List, ListSubheader, Typography } from '@mui/material'\r\nimport React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { extractModelDescriptionFromModel, extractModelNameFromModel, extractModelOptionsFromModel, selectOptionSections, selectSelectedOptions } from '../../../../state/configuration/configurationSelectors'\r\nimport { setModel } from '../../../../state/configuration/configurationSlice'\r\nimport SectionOptionList from './SectionOptionList'\r\n\r\nfunction ModelButton({ model, isSelected = false, disabled = false, selectedOptions, selectModel, sections = [] }) {\r\n\r\n    // for the custom model, dont display sections if it is not selected\r\n    if (!model && !isSelected) sections = []\r\n\r\n    const name = model ? extractModelNameFromModel(model) : 'Custom'\r\n    const description = model ? extractModelDescriptionFromModel(model) : ''\r\n    const options = model ? extractModelOptionsFromModel(model) : (isSelected ? selectedOptions : [])\r\n\r\n    const [hover, setHover] = useState(false)\r\n\r\n    const border = isSelected ? '2px solid grey' : hover ? '1px solid grey' : '1px dashed grey'\r\n\r\n\r\n    function handleClick() {\r\n        if (!disabled) {\r\n            selectModel(name)\r\n        }\r\n    }\r\n\r\n    function handleHover(isHovering) {\r\n        setHover(isHovering)\r\n    }\r\n\r\n\r\n    return (\r\n        <ButtonBase \r\n            sx={{width: '100%', height: '100%'}}\r\n            onMouseLeave={() => handleHover(false)} \r\n            onMouseOver={() => handleHover(true)}\r\n            onClick={handleClick} \r\n        >\r\n            <Box padding={2} sx={{ width: '100%', border: border }}>\r\n                \r\n                <Box height=\"80px\">\r\n                    <Typography variant=\"h4\">\r\n                        {name}\r\n                    </Typography>\r\n                    <Typography variant=\"body1\">\r\n                        {description}\r\n                    </Typography>\r\n                </Box>\r\n\r\n                <List\r\n                    dense={true}\r\n                    sx={{\r\n                        position: 'relative',\r\n                        overflow: 'auto',\r\n                        maxHeight: 300,\r\n                        '& ul': { padding: 0 },\r\n                    }}\r\n                    subheader={<li />}\r\n                >\r\n                    {sections.map(section => (\r\n                        <li key={section.id}>\r\n                            <ul>\r\n                                <ListSubheader>{section.name}</ListSubheader>\r\n                                <SectionOptionList sectionId={section.id} selectedOptions={options}></SectionOptionList>\r\n                            </ul>\r\n                        </li>\r\n                    ))}\r\n                </List>\r\n\r\n            </Box>\r\n        </ButtonBase>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    selectedOptions: selectSelectedOptions(state),\r\n    sections: selectOptionSections(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    selectModel: setModel,\r\n}\r\nexport default connect(\r\n    mapStateToProps, \r\n    mapDispatchToProps\r\n)(ModelButton)\r\n","import { Grid, Stack, Typography, useMediaQuery } from '@mui/material'\r\nimport { Box } from '@mui/system'\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { selectModels, selectSelectedModel } from '../../../../state/configuration/configurationSelectors'\r\nimport ModelButton from './ModelButton'\r\n\r\nfunction ModelSelector({ models, selectedModel }) {\r\n\r\n    const isDesktop = useMediaQuery((theme) => theme.breakpoints.up('sm'))\r\n\r\n    function modelSelectGridLayout() {\r\n        return (\r\n            <Grid container spacing={2} alignItems=\"flex-start\">\r\n\r\n                {models.map((model, index) => (\r\n                    <Grid item key={index} xs={12} sm={6} md={4} lg={3}>\r\n                        <ModelButton model={model} isSelected={model.name === selectedModel}></ModelButton>\r\n                    </Grid>\r\n                ))}\r\n\r\n                <Grid item xs={12} sm={6} md={4} lg={3}>\r\n                    <ModelButton model={null} isSelected={!selectedModel} disabled={true}></ModelButton>\r\n                </Grid>\r\n\r\n            </Grid>\r\n        )\r\n    }\r\n\r\n    function modelSelectHorizontalScrollLayout() {\r\n        return (\r\n            <Box sx={{overflowX: 'scroll'}}>\r\n                <Stack\r\n                    direction={{xs: 'row', md: 'column'}}\r\n                    justifyContent=\"space-around\"\r\n                    alignItems=\"center\"\r\n                    width={`${(models.length + 1)*90}vw`}\r\n                >\r\n                    {models.map((model, index) => (\r\n                        <Box key={index} width=\"80vw\">\r\n                            <ModelButton model={model} isSelected={model.name === selectedModel}></ModelButton>\r\n                        </Box>\r\n                    ))}\r\n\r\n                    <Box width=\"80vw\">\r\n                        <ModelButton model={null} isSelected={!selectedModel} disabled={true}></ModelButton>\r\n                    </Box>\r\n\r\n                </Stack>\r\n            </Box>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Box marginBottom={4}>\r\n            <Typography variant=\"h3\">Models</Typography>\r\n\r\n            {isDesktop ? \r\n                modelSelectGridLayout()\r\n            :\r\n                modelSelectHorizontalScrollLayout()\r\n            }\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    models: selectModels(state),\r\n    selectedModel: selectSelectedModel(state),\r\n})\r\nconst mapDispatchToProps = {\r\n\r\n}\r\nexport default connect(\r\n    mapStateToProps, \r\n    mapDispatchToProps\r\n)(ModelSelector)\r\n","import React from 'react'\r\nimport { Typography, Box, Button, Tooltip, Zoom } from '@mui/material'\r\nimport { connect } from 'react-redux'\r\nimport { clickedOption } from '../../../../state/configuration/configurationSlice'\r\nimport './Option.css'\r\nimport { getIsOptionSelectable, getIsOptionSelected, getOption, getOptionName, getOptionPrice } from '../../../../state/configuration/configurationSelectors'\r\nimport { translate } from '../../../../lang'\r\nimport { selectLanguage } from '../../../../state/language/languageSelectors'\r\n\r\nfunction Option({ optionId, clickedOption, option, selected, price, selectable, disabledReason, problematicOptions, language }) {\r\n\r\n    const disabled = !selectable\r\n\r\n    function handleClick() {\r\n        clickedOption(optionId)\r\n    }\r\n    \r\n    return (\r\n        <Tooltip \r\n            title={disabled ? `${translate(disabledReason, language)}: ${problematicOptions.join(', ')}` : ''} \r\n            placement=\"top\" \r\n            TransitionComponent={Zoom}\r\n            arrow\r\n            enterTouchDelay={200}\r\n        >\r\n            <Box >\r\n\r\n            <Button style={{width: '100%', height: '100%'}} variant={selected ? \"contained\" : \"outlined\"} disabled={disabled} onClick={handleClick}>\r\n                <Box className=\"Option\">\r\n                    <Typography variant=\"h4\">{option.name}</Typography>\r\n                    <Typography variant=\"body1\">{option.description}</Typography>\r\n                    {price ? \r\n                        <Typography variant=\"body2\">{translate('price', language)}: {price}</Typography>\r\n                        :\r\n                        <></>\r\n                    }\r\n                </Box>\r\n            </Button>\r\n\r\n            </Box>\r\n        </Tooltip>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    const selectableError = getIsOptionSelectable(state, ownProps.optionId)\r\n    let isSelectable = true\r\n    let disabledReason = ''\r\n    let problematicOptions = []\r\n\r\n    if (selectableError) {\r\n        isSelectable = false\r\n        disabledReason = selectableError[0]\r\n        problematicOptions = selectableError[1].map(optionId => getOptionName(state, optionId))\r\n    }\r\n\r\n    return {\r\n        option: getOption(state, ownProps.optionId),\r\n        selected: getIsOptionSelected(state, ownProps.optionId),\r\n        price: getOptionPrice(state, ownProps.optionId),\r\n        selectable: isSelectable,\r\n        disabledReason,\r\n        problematicOptions,\r\n        language: selectLanguage(state)\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    clickedOption\r\n}\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(Option)","import { ErrorOutline } from '@mui/icons-material'\r\nimport { Tooltip } from '@mui/material'\r\nimport React from 'react'\r\n\r\nexport default function GroupInvalidError({errorMessage}) {\r\n    return (\r\n        <Tooltip \r\n            title={errorMessage} \r\n            placement=\"top\"\r\n            arrow\r\n            enterTouchDelay={200}\r\n        >\r\n            <ErrorOutline />\r\n        </Tooltip>\r\n    )\r\n}\r\n","import { Typography } from '@mui/material'\r\nimport { Box } from '@mui/system'\r\nimport React from 'react'\r\nimport Option from './Option'\r\nimport GroupInvalidError from './GroupInvalidError'\r\nimport './OptionGroup.css'\r\nimport { getIsGroupValid } from '../../../../state/configuration/configurationSelectors'\r\nimport { selectLanguage } from '../../../../state/language/languageSelectors'\r\nimport { translate } from '../../../../lang'\r\nimport { connect } from 'react-redux'\r\n\r\nfunction OptionGroup({group, isValid, groupError, language}) {\r\n    const { name, description, optionIds } = group\r\n\r\n    function renderGroupError() {\r\n        if (!isValid) {\r\n            return (\r\n                <GroupInvalidError errorMessage={translate(groupError, language)}></GroupInvalidError>\r\n            )\r\n        } else {\r\n            return\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Box className=\"OptionGroup\" marginBottom={1} padding={1}>\r\n            <Box className=\"OptionGroupTitle\" display={'flex'} justifyContent={'space-between'} alignItems={'center'}>\r\n                <Typography variant=\"h3\">\r\n                    {name}\r\n                </Typography>\r\n                {renderGroupError()}\r\n            </Box>\r\n            <Typography variant=\"subtitle2\">{description}</Typography>\r\n            <Box className=\"OptionContainer\">\r\n                {\r\n                    optionIds.map(optionId => (\r\n                        <Option key={optionId} optionId={optionId}></Option>\r\n                        ))\r\n                    }\r\n            </Box>\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    const groupError = getIsGroupValid(state, ownProps.group.id)\r\n    const isValid = groupError === null\r\n\r\n    return {\r\n        isValid,\r\n        groupError,\r\n        language: selectLanguage(state)\r\n    }\r\n}\r\nconst mapDispatchToProps = {}\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(OptionGroup)\r\n","import React, { useState } from 'react'\r\n\r\nimport OptionGroup from './Options/OptionGroup'\r\nimport PropTypes from 'prop-types'\r\nimport Tabs from '@mui/material/Tabs'\r\nimport Tab from '@mui/material/Tab'\r\nimport Box from '@mui/material/Box'\r\nimport { useSelector } from 'react-redux'\r\n\r\nfunction TabPanel(props) {\r\n    const { children, value, index, ...other } = props\r\n\r\n    return (\r\n        <div\r\n            role=\"tabpanel\"\r\n            hidden={value !== index}\r\n            id={`simple-tabpanel-${index}`}\r\n            aria-labelledby={`simple-tab-${index}`}\r\n            {...other}\r\n        >\r\n            {value === index && (\r\n            <Box sx={{ p: 3 }}>\r\n                {children}\r\n            </Box>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\nTabPanel.propTypes = {\r\n    children: PropTypes.node,\r\n    index: PropTypes.number.isRequired,\r\n    value: PropTypes.number.isRequired\r\n}\r\n\r\nfunction a11yProps(index) {\r\n    return {\r\n        id: `simple-tab-${index}`,\r\n        'aria-controls': `simple-tabpanel-${index}`,\r\n    }\r\n}\r\n\r\nexport default function OptionTabs() {\r\n\r\n    const {configuration} = useSelector(state => state.configuration)\r\n\r\n    const [value, setValue] = useState(0)\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setValue(newValue)\r\n    }\r\n    \r\n    return (\r\n        <Box sx={{ width: '100%' }}>\r\n            <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\r\n                <Tabs \r\n                    value={value} \r\n                    scrollButtons=\"auto\"\r\n                    allowScrollButtonsMobile\r\n                    variant=\"scrollable\" \r\n                    onChange={handleChange} \r\n                    aria-label=\"sectiontabs\"\r\n                >\r\n                    {/* <Tab label=\"Item One\" {...a11yProps(0)} />\r\n                    <Tab label=\"Item Two\" {...a11yProps(1)} />\r\n                    <Tab label=\"Item Three\" {...a11yProps(2)} /> */}\r\n\r\n                    {configuration.optionSections.map((section, index) => (\r\n                        <Tab key={section.id} label={section.name} wrapped {...a11yProps(index)} />\r\n                    ))}\r\n                </Tabs>\r\n            </Box>\r\n            {configuration.optionSections.map((section, index) => (\r\n                <TabPanel key={section.id} value={value} index={index}>\r\n                    {configuration.optionGroups\r\n                        .filter(group => section.optionGroupIds.includes(group.id))\r\n                        .map((group, index) => (\r\n                            <OptionGroup key={group.id} group={group}></OptionGroup>\r\n                        ))}\r\n                </TabPanel>\r\n            ))}\r\n            {/* <TabPanel value={value} index={0}>\r\n                Item One 111\r\n            </TabPanel>\r\n            <TabPanel value={value} index={1}>\r\n                Item Two\r\n            </TabPanel>\r\n            <TabPanel value={value} index={2}>\r\n                Item Three\r\n            </TabPanel> */}\r\n        </Box>\r\n    )\r\n}","import { Done, RestartAlt, SaveAs } from '@mui/icons-material'\r\nimport { Box, Grid, IconButton, ImageList, ImageListItem, Tooltip, Typography } from '@mui/material'\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { postOrderConfiguredProduct } from '../../../api/productsAPI'\r\nimport { requestSaveConfiguration } from '../../../api/userAPI'\r\nimport { getImageSource } from '../../../App'\r\nimport { translate } from '../../../lang'\r\nimport { alertTypes, openAlert } from '../../../state/alert/alertSlice'\r\nimport { getCurrentPrice, selectConfigurationDescription, selectConfigurationId, selectConfigurationImages, selectConfigurationName, selectSelectedModel, selectSelectedOptions } from '../../../state/configuration/configurationSelectors'\r\nimport { resetActiveConfiguration } from '../../../state/configuration/configurationSlice'\r\nimport { confirmDialogOpen } from '../../../state/confirmationDialog/confirmationSlice'\r\nimport { inputDialogOpen } from '../../../state/inputDialog/inputDialogSlice'\r\nimport { selectLanguage } from '../../../state/language/languageSelectors'\r\nimport { selectIsAuthenticated } from '../../../state/user/userSelector'\r\nimport { openLogInDialog } from '../../header/LoginButton'\r\nimport { Slide } from 'react-slideshow-image'\r\nimport Loader from '../../Loader'\r\nimport ModelSelector from './ModelSelector/ModelSelector'\r\n\r\nimport OptionTabs from './OptionTabs'\r\nimport Summary from './SidePanel/Summary'\r\nimport 'react-slideshow-image/dist/styles.css'\r\n// import Summary from './SidePanel/Summary'\r\n\r\n\r\n/*\r\n\r\noptionGroups: [\r\n    {\r\n        id: 'COLOR_GROUP',\r\n        name: 'Color',\r\n        description: 'the exterior color of the car',\r\n        optionIds: [\r\n            'BLUE', 'YELLOW', 'GREEN'\r\n        ]\r\n    }\r\n]\r\n\r\n*/\r\n\r\nfunction Configurator({ isLoggedIn, configurationName, configurationDescription, configurationImages, configurationId, selectedOptions, price, model, isLoading, resetConfig, openConfirm, openInputDialog, openLogInDialog, openAlert, language }) {\r\n\r\n    const navigate = useNavigate()\r\n\r\n    function handleSaveClicked() {\r\n        if (!isLoggedIn) {\r\n            openLogInDialog()\r\n            return\r\n        }\r\n\r\n        const data = {\r\n            configurationName: {name: translate('configurationName', language), value: '' }\r\n        }\r\n        const title = translate('saveConfiguration', language)\r\n\r\n        openInputDialog(title, data, (data) => {\r\n            const configurationName = data.configurationName.value\r\n\r\n            requestSaveConfiguration(configurationId, configurationName, selectedOptions)\r\n            .then(res => {\r\n                openAlert(`${translate('savedConfiguration', language)}: ${configurationName}!`, alertTypes.SUCCESS)\r\n                console.log(res)\r\n            })\r\n            .catch(err => {\r\n                openAlert(`Error: ${err}`, alertTypes.ERROR)\r\n                console.log(err)\r\n            })\r\n        })\r\n    }\r\n\r\n    function handleResetClicked() {\r\n        openConfirm(translate('resetConfigurationPrompt', language), {}, null, () => {\r\n            resetConfig()\r\n        })\r\n    }\r\n\r\n    function handleFinishClicked() {\r\n        if (!isLoggedIn) {\r\n            openLogInDialog()\r\n            return\r\n        }\r\n\r\n        // confirm dialog that shows the summary\r\n        openConfirm('', {}, <Summary configurationId={configurationId} selectedOptions={selectedOptions}></Summary>, () => {\r\n            // when confirmed -> prompt with configuration name and then send the request to order the configuration\r\n            promptOrderConfiguration()\r\n        })\r\n    }\r\n    function promptOrderConfiguration() {\r\n        const data = {\r\n            configurationName: {name: translate('configurationName', language), value: '' }\r\n        }\r\n        const title = translate('finishConfiguration', language)\r\n        openInputDialog(title, data, (data) => {\r\n            const configurationName = data.configurationName.value\r\n\r\n            postOrderConfiguredProduct(configurationId, configurationName, selectedOptions, price, model)\r\n            .then(res => {\r\n                openAlert(`${translate('successOrderedConfiguration', language)}!`, alertTypes.SUCCESS)\r\n                console.log(res)\r\n                navigate('/account/ordered')\r\n            })\r\n            .catch(err => {\r\n                openAlert(`Error: ${err}`, alertTypes.ERROR)\r\n                console.log(err)\r\n            })\r\n        })\r\n    }\r\n\r\n\r\n    function renderConfigurator() {\r\n\r\n        if (isLoading) {\r\n            return (\r\n                <Loader></Loader>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                {/* Configurator header */}\r\n                <Grid container justifyContent=\"flex-end\">\r\n                    <Box sx={{flexGrow: 1}}>\r\n                        <Typography variant=\"h2\">{translate('configureYour', language)} {configurationName}</Typography>\r\n                        <Typography variant=\"subtitle1\">{configurationDescription}</Typography>\r\n                    </Box>\r\n\r\n                    <Grid item sx={{paddingTop: 2, justifySelf: 'flex-end'}}>\r\n                        <Tooltip title={translate('saveConfiguration', language)}>\r\n                            <IconButton \r\n                                variant=\"contained\" \r\n                                onClick={handleSaveClicked}\r\n                                >\r\n                                <SaveAs />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n\r\n                        <Tooltip title={translate('resetConfiguration', language)}>\r\n                            <IconButton\r\n                                variant=\"contained\" \r\n                                onClick={handleResetClicked}\r\n                            >\r\n                                <RestartAlt />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n\r\n                        <Tooltip title={translate('finishConfiguration', language)}>\r\n                            <IconButton \r\n                                variant=\"contained\" \r\n                                onClick={handleFinishClicked}\r\n                                >\r\n                                <Done />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    </Grid>\r\n                </Grid>\r\n\r\n                {/* Images */}\r\n                <Box mb={4}>\r\n                    <Slide easing=\"ease\">\r\n                        {configurationImages.map((image, index) => (\r\n                            <div key={index} className=\"each-slide\">\r\n                                <div style={{\r\n                                    height: '60vw',\r\n                                    maxHeight: '600px', \r\n                                    backgroundImage: `url(${getImageSource(image)})`,\r\n                                    backgroundSize: 'cover',\r\n                                    backgroundPosition: 'center'\r\n                                }}>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </Slide>\r\n                </Box>\r\n\r\n                {/* <ImageList sx={{ width: '100%', height: '350px' }} cols={{sm: 1, lg: 4}} rowHeight={350}>\r\n                    {[...configurationImages, ...configurationImages, ...configurationImages].map((item) => (\r\n                        <ImageListItem key={item}>\r\n                            <img\r\n                                {...srcset(getImageSource(item), '100%', 350, 1, 1)}\r\n                                //src={`${getImageSource(item)}`}\r\n                                //srcSet={`${getImageSource(item)}`}\r\n                                alt={configurationName}\r\n                                loading=\"lazy\"\r\n                            />\r\n                        </ImageListItem>\r\n                    ))}\r\n                </ImageList> */}\r\n\r\n                {/* Models */}\r\n                <ModelSelector></ModelSelector>\r\n\r\n                <Grid container>\r\n                    <OptionTabs></OptionTabs>\r\n                </Grid>\r\n            </div>\r\n\r\n        )\r\n    }\r\n\r\n    function srcset(image, width, height, rows = 1, cols = 1) {\r\n        return {\r\n            src: `${image}?w=${width * cols}&h=${height * rows}&fit=crop&auto=format`,\r\n            srcSet: `${image}?w=${width * cols}&h=${height * rows}&fit=crop&auto=format&dpr=2 2x`\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {renderConfigurator()}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    configurationName: selectConfigurationName(state),\r\n    configurationDescription: selectConfigurationDescription(state),\r\n    configurationImages: selectConfigurationImages(state),\r\n    configurationId: selectConfigurationId(state),\r\n    selectedOptions: selectSelectedOptions(state),\r\n    price: getCurrentPrice(state),\r\n    model: selectSelectedModel(state),\r\n    language: selectLanguage(state),\r\n    isLoggedIn: selectIsAuthenticated(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    resetConfig: resetActiveConfiguration,\r\n    openConfirm: confirmDialogOpen,\r\n    openInputDialog: inputDialogOpen,\r\n    openLogInDialog: openLogInDialog,\r\n    openAlert: openAlert\r\n}\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(Configurator)\r\n","import { Typography } from '@mui/material'\r\nimport React, { useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { /*useNavigate,*/ useParams } from 'react-router-dom'\r\nimport { translate } from '../../../lang'\r\n// import { alertTypes, openAlert } from '../../../state/alert/alertSlice'\r\nimport { fetchConfiguration } from '../../../state/configuration/configurationSlice'\r\nimport { selectLanguage } from '../../../state/language/languageSelectors'\r\nimport Configurator from './Configurator'\r\n\r\nfunction ConfigurationView({ fetchConfiguration, /*openAlert,*/ status, error, language }) {\r\n\r\n    // const navigate = useNavigate()\r\n\r\n    // const { configuration, status, error } = useSelector(state => state.configuration)\r\n\r\n    const { id } = useParams()\r\n    \r\n    // const { products/*, status, error*/ } = useSelector(state => state.product)\r\n    // let product = products.find(p => p.configId === id)\r\n    // if (!product && configuration) {\r\n    //     const {id, name, description, image} = configuration\r\n    //     product = {id, name, description, image}\r\n    // }\r\n\r\n    // console.log('loading configuration for product id:', id)\r\n\r\n    useEffect(() => {\r\n        if (id) {\r\n            fetchConfiguration(id)\r\n        }\r\n    }, [fetchConfiguration, id])\r\n\r\n\r\n    function render() {\r\n        switch (status) {\r\n            case 'loading':\r\n                return renderConfiguration(true)\r\n            case 'succeeded':\r\n                return renderConfiguration()\r\n            case 'failed':\r\n                return renderApiFailed(error)\r\n            default:\r\n                return renderConfiguration(true)\r\n        }\r\n    }\r\n\r\n    function renderConfiguration(isLoading = false) {\r\n        return (\r\n            <div>\r\n                <Configurator isLoading={isLoading}></Configurator>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    function renderApiFailed(errorMessage) {\r\n        return (\r\n            <div>\r\n                <Typography variant=\"h2\">{translate('failedToLoadConfiguration', language)}</Typography>\r\n                <Typography vairant=\"body1\">{translate(errorMessage, language)}</Typography>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {render()}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    status: state.configuration.status,\r\n    error: state.configuration.error,\r\n    language: selectLanguage(state)\r\n})\r\nconst mapDispatchToProps = {\r\n    fetchConfiguration,\r\n    // openAlert\r\n}\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ConfigurationView)","import { createTheme, responsiveFontSizes } from '@mui/material'\r\n\r\nconst theme = responsiveFontSizes(createTheme())\r\n\r\ntheme.palette = {\r\n    ...theme.palette\r\n}\r\n\r\ntheme.typography = {\r\n    ...theme.typography\r\n}\r\n\r\n\r\n// const coef = 0.1\r\n// const modifyRem = (value, coef) => {\r\n//     return `${parseFloat(value) * (1 + coef)}rem`\r\n// }\r\n\r\n// each(theme.typography, (variant, variantName) => {\r\n//     if (typeof variant !== 'object') {\r\n//         return variant\r\n//     }\r\n//     theme.typography[variantName] = {\r\n//         ...variant,\r\n//         fontSize: modifyRem(variant.fontSize, -coef * 5),\r\n//         [theme.breakpoints.up('sm')]: {\r\n//             fontSize: modifyRem(variant.fontSize, -coef * 2.5),\r\n//         },\r\n//         [theme.breakpoints.up('md')]: {\r\n//             fontSize: modifyRem(variant.fontSize, -coef * 1),\r\n//         },\r\n//         [theme.breakpoints.up('lg')]: {\r\n//             fontSize: modifyRem(variant.fontSize, 0),\r\n//         },\r\n//         [theme.breakpoints.up('xl')]: {\r\n//             fontSize: modifyRem(variant.fontSize, coef),\r\n//         },\r\n//     }\r\n// })\r\n\r\nexport default theme","import React from 'react'\r\nimport {\r\n    BrowserRouter as Router,\r\n    Route,\r\n    Routes\r\n} from 'react-router-dom'\r\nimport { ThemeProvider } from '@mui/material/styles'\r\nimport { Container, Typography } from '@mui/material'\r\nimport Header from './components/header/Header'\r\nimport ConfirmationOptionSelect from './components/dialog/ConfirmationDialog'\r\nimport InputDialog from './components/dialog/InputDialog'\r\nimport GenericAlert from './components/alert/GenericAlert'\r\nimport ProductView from './components/products/ProductView'\r\nimport AccountView from './components/account/AccountView'\r\nimport ConfigurationBuilderView from './components/configuration/Builder/ConfigurationBuilderView'\r\nimport ConfigurationView from './components/configuration/Configurator/ConfigurationView'\r\nimport theme from './Theme'\r\n\r\nfunction App() {\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            <Container sx={{padding: 0}} maxWidth=\"xl\" className=\"App\">\r\n                <Router>\r\n                    <Header></Header>\r\n                    <ConfirmationOptionSelect></ConfirmationOptionSelect>\r\n                    <InputDialog></InputDialog>\r\n                    <GenericAlert></GenericAlert>\r\n\r\n                    <Routes>\r\n\r\n                        <Route exact path=\"/\" element={\r\n                            <ProductView></ProductView>\r\n                        }>\r\n                        </Route>\r\n\r\n                        <Route exact path=\"/account/:tab\" element={<AccountView></AccountView>}></Route>\r\n                        <Route exact path=\"/account\" element={<AccountView></AccountView>}></Route>\r\n\r\n                        <Route exact path=\"/configuration/:id\" element={\r\n                            <ConfigurationView></ConfigurationView>\r\n                        }>\r\n                        </Route>\r\n\r\n                        <Route exact path=\"/create\" element={\r\n                            <ConfigurationBuilderView></ConfigurationBuilderView>\r\n                        }>\r\n                        </Route>\r\n\r\n                        <Route path=\"*\" element={\r\n                            <Typography variant=\"h2\">Not Found!</Typography>\r\n                        }>\r\n                        </Route>\r\n\r\n                    </Routes>\r\n                </Router>\r\n            </Container>\r\n        </ThemeProvider>\r\n    )\r\n}\r\n\r\nexport function getImageSource(image) {\r\n    let imageSource = ''\r\n\r\n    try {\r\n        const src = require(`./assets/img/${image.replace('./', '')}`)\r\n        imageSource = src.default\r\n    } catch (err) {\r\n        console.log(`image '${image}' no found!`)\r\n        const src = require(`./assets/img/notfound.jpg`)\r\n        imageSource = src.default\r\n    } finally {\r\n        return imageSource\r\n    }\r\n}\r\n\r\nexport function writeToLocalStorage(data, key) {\r\n    try {\r\n        data = JSON.stringify(data)\r\n        localStorage.setItem(key, data)\r\n        // console.log('Saved to storage!')\r\n        // console.log(data)\r\n    } catch(err) {\r\n        console.log('Can not save the to local storage!')\r\n        console.log(err)\r\n    }\r\n}\r\n\r\nexport function readFromLocalStorage(key) {\r\n    let data = null\r\n    try {\r\n        data = JSON.parse(localStorage.getItem(key))\r\n    } catch(err) {\r\n        console.log('Can not load from local storage!')\r\n        console.log(err)\r\n    }\r\n\r\n    return data\r\n}\r\n\r\nexport default App","import { configureStore } from '@reduxjs/toolkit'\r\nimport productReducer from './product/productSlice'\r\nimport configurationReducer from './configuration/configurationSlice'\r\nimport languageReducer, { setLanguage } from './language/languageSlice'\r\nimport confirmationReducer from './confirmationDialog/confirmationSlice'\r\nimport userReducer, { setCurrentUser } from './user/userSlice'\r\nimport inputDialogReducer from './inputDialog/inputDialogSlice'\r\nimport alertReducer from './alert/alertSlice'\r\nimport builderReducer from './configurationBuilder/builderSlice'\r\nimport jwt from 'jsonwebtoken'\r\nimport { setAuthorizationToken } from '../api/general'\r\n\r\nexport const store = configureStore({\r\n    reducer: {\r\n        product: productReducer,\r\n        configuration: configurationReducer,\r\n        language: languageReducer,\r\n        confirmation: confirmationReducer,\r\n        user: userReducer,\r\n        inputDialog: inputDialogReducer,\r\n        alert: alertReducer,\r\n        builder: builderReducer\r\n    }\r\n})\r\n\r\n// set user if there is a user token saved to the local storage\r\nconst authToken = localStorage.jwtToken\r\nif (authToken) {\r\n    setAuthorizationToken(authToken)\r\n    store.dispatch(setCurrentUser(jwt.decode(authToken)))\r\n}\r\n\r\n// set language if there is a language saved to the local storage\r\nconst localStorageLang = localStorage.language\r\nif (localStorageLang) {\r\n    console.log('storage lang:', localStorageLang)\r\n    store.dispatch(setLanguage(localStorageLang))\r\n}","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport { Provider } from 'react-redux'\r\nimport { store } from './state/store'\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <Provider store={store}>\r\n            <App />\r\n        </Provider>\r\n    </React.StrictMode>,\r\n    document.getElementById('root')\r\n)"],"sourceRoot":""}